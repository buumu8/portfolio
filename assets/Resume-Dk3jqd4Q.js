import{a as requireReact,j as jsxRuntimeExports}from"./index-ClloTWIi.js";import{g as getAugmentedNamespace,c as commonjsRequire}from"./_commonjs-dynamic-modules-psZwOBky.js";var lib={exports:{}},core_min={},pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(a,I){module.exports=a.pdfjsLib=I()})(globalThis,()=>(()=>{var __webpack_modules__=[,((d,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.TextRenderingMode=a.RenderingIntentFlag=a.PromiseCapability=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.MAX_IMAGE_SIZE_TO_CACHE=a.LINE_FACTOR=a.LINE_DESCENT_FACTOR=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FeatureTest=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.BASELINE_FACTOR=a.AnnotationType=a.AnnotationReplyType=a.AnnotationPrefix=a.AnnotationMode=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationEditorType=a.AnnotationEditorPrefix=a.AnnotationEditorParamsType=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.assert=f,a.bytesToString=j,a.createValidAbsoluteUrl=S,a.getModificationDate=Ae,a.getUuid=hn,a.getVerbosityLevel=Et,a.info=ct,a.isArrayBuffer=ne,a.isArrayEqual=Me,a.isNodeJS=void 0,a.normalizeUnicode=qe,a.objectFromMap=rt,a.objectSize=At,a.setVerbosityLevel=vt,a.shadow=L,a.string32=it,a.stringToBytes=X,a.stringToPDFString=Bt,a.stringToUTF8String=Xt,a.unreachable=A,a.utf8StringToString=$t,a.warn=O;const I=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");a.isNodeJS=I;const h=[1,0,0,1,0,0];a.IDENTITY_MATRIX=h;const b=[.001,0,0,.001,0,0];a.FONT_IDENTITY_MATRIX=b;const n=1e7;a.MAX_IMAGE_SIZE_TO_CACHE=n;const M=1.35;a.LINE_FACTOR=M;const V=.35;a.LINE_DESCENT_FACTOR=V;const q=V/M;a.BASELINE_FACTOR=q;const r={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};a.RenderingIntentFlag=r;const t={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};a.AnnotationMode=t;const i="pdfjs_internal_editor_";a.AnnotationEditorPrefix=i;const u={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};a.AnnotationEditorType=u;const c={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};a.AnnotationEditorParamsType=c;const e={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};a.PermissionFlag=e;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};a.TextRenderingMode=g;const v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};a.ImageKind=v;const l={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};a.AnnotationType=l;const w={GROUP:"Group",REPLY:"R"};a.AnnotationReplyType=w;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};a.AnnotationFlag=x;const k={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};a.AnnotationFieldFlag=k;const m={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};a.AnnotationBorderStyleType=m;const C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};a.AnnotationActionEventType=C;const z={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};a.DocumentActionEventType=z;const $={O:"PageOpen",C:"PageClose"};a.PageActionEventType=$;const H={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=H;const tt={NONE:0,BINARY:1};a.CMapCompressionType=tt;const nt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};a.OPS=nt;const yt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};a.PasswordResponses=yt;let dt=H.WARNINGS;function vt(bt){Number.isInteger(bt)&&(dt=bt)}function Et(){return dt}function ct(bt){dt>=H.INFOS&&console.log(`Info: ${bt}`)}function O(bt){dt>=H.WARNINGS&&console.log(`Warning: ${bt}`)}function A(bt){throw new Error(bt)}function f(bt,et){bt||A(et)}function p(bt){switch(bt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function S(bt,et=null,Q=null){if(!bt)return null;try{if(Q&&typeof bt=="string"&&(Q.addDefaultProtocol&&bt.startsWith("www.")&&bt.match(/\./g)?.length>=2&&(bt=`http://${bt}`),Q.tryConvertEncoding))try{bt=Xt(bt)}catch{}const St=et?new URL(bt,et):new URL(bt);if(p(St))return St}catch{}return null}function L(bt,et,Q,St=!1){return Object.defineProperty(bt,et,{value:Q,enumerable:!St,configurable:!0,writable:!1}),Q}const F=(function(){function et(Q,St){this.constructor===et&&A("Cannot initialize BaseException."),this.message=Q,this.name=St}return et.prototype=new Error,et.constructor=et,et})();a.BaseException=F;class U extends F{constructor(et,Q){super(et,"PasswordException"),this.code=Q}}a.PasswordException=U;class T extends F{constructor(et,Q){super(et,"UnknownErrorException"),this.details=Q}}a.UnknownErrorException=T;class s extends F{constructor(et){super(et,"InvalidPDFException")}}a.InvalidPDFException=s;class _ extends F{constructor(et){super(et,"MissingPDFException")}}a.MissingPDFException=_;class E extends F{constructor(et,Q){super(et,"UnexpectedResponseException"),this.status=Q}}a.UnexpectedResponseException=E;class P extends F{constructor(et){super(et,"FormatError")}}a.FormatError=P;class R extends F{constructor(et){super(et,"AbortException")}}a.AbortException=R;function j(bt){(typeof bt!="object"||bt?.length===void 0)&&A("Invalid argument for bytesToString");const et=bt.length,Q=8192;if(et<Q)return String.fromCharCode.apply(null,bt);const St=[];for(let oe=0;oe<et;oe+=Q){const Wt=Math.min(oe+Q,et),Qt=bt.subarray(oe,Wt);St.push(String.fromCharCode.apply(null,Qt))}return St.join("")}function X(bt){typeof bt!="string"&&A("Invalid argument for stringToBytes");const et=bt.length,Q=new Uint8Array(et);for(let St=0;St<et;++St)Q[St]=bt.charCodeAt(St)&255;return Q}function it(bt){return String.fromCharCode(bt>>24&255,bt>>16&255,bt>>8&255,bt&255)}function At(bt){return Object.keys(bt).length}function rt(bt){const et=Object.create(null);for(const[Q,St]of bt)et[Q]=St;return et}function st(){const bt=new Uint8Array(4);return bt[0]=1,new Uint32Array(bt.buffer,0,1)[0]===1}function ht(){try{return new Function(""),!0}catch{return!1}}class ut{static get isLittleEndian(){return L(this,"isLittleEndian",st())}static get isEvalSupported(){return L(this,"isEvalSupported",ht())}static get isOffscreenCanvasSupported(){return L(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?L(this,"platform",{isWin:!1,isMac:!1}):L(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return L(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}a.FeatureTest=ut;const gt=[...Array(256).keys()].map(bt=>bt.toString(16).padStart(2,"0"));class Ct{static makeHexColor(et,Q,St){return`#${gt[et]}${gt[Q]}${gt[St]}`}static scaleMinMax(et,Q){let St;et[0]?(et[0]<0&&(St=Q[0],Q[0]=Q[1],Q[1]=St),Q[0]*=et[0],Q[1]*=et[0],et[3]<0&&(St=Q[2],Q[2]=Q[3],Q[3]=St),Q[2]*=et[3],Q[3]*=et[3]):(St=Q[0],Q[0]=Q[2],Q[2]=St,St=Q[1],Q[1]=Q[3],Q[3]=St,et[1]<0&&(St=Q[2],Q[2]=Q[3],Q[3]=St),Q[2]*=et[1],Q[3]*=et[1],et[2]<0&&(St=Q[0],Q[0]=Q[1],Q[1]=St),Q[0]*=et[2],Q[1]*=et[2]),Q[0]+=et[4],Q[1]+=et[4],Q[2]+=et[5],Q[3]+=et[5]}static transform(et,Q){return[et[0]*Q[0]+et[2]*Q[1],et[1]*Q[0]+et[3]*Q[1],et[0]*Q[2]+et[2]*Q[3],et[1]*Q[2]+et[3]*Q[3],et[0]*Q[4]+et[2]*Q[5]+et[4],et[1]*Q[4]+et[3]*Q[5]+et[5]]}static applyTransform(et,Q){const St=et[0]*Q[0]+et[1]*Q[2]+Q[4],oe=et[0]*Q[1]+et[1]*Q[3]+Q[5];return[St,oe]}static applyInverseTransform(et,Q){const St=Q[0]*Q[3]-Q[1]*Q[2],oe=(et[0]*Q[3]-et[1]*Q[2]+Q[2]*Q[5]-Q[4]*Q[3])/St,Wt=(-et[0]*Q[1]+et[1]*Q[0]+Q[4]*Q[1]-Q[5]*Q[0])/St;return[oe,Wt]}static getAxialAlignedBoundingBox(et,Q){const St=this.applyTransform(et,Q),oe=this.applyTransform(et.slice(2,4),Q),Wt=this.applyTransform([et[0],et[3]],Q),Qt=this.applyTransform([et[2],et[1]],Q);return[Math.min(St[0],oe[0],Wt[0],Qt[0]),Math.min(St[1],oe[1],Wt[1],Qt[1]),Math.max(St[0],oe[0],Wt[0],Qt[0]),Math.max(St[1],oe[1],Wt[1],Qt[1])]}static inverseTransform(et){const Q=et[0]*et[3]-et[1]*et[2];return[et[3]/Q,-et[1]/Q,-et[2]/Q,et[0]/Q,(et[2]*et[5]-et[4]*et[3])/Q,(et[4]*et[1]-et[5]*et[0])/Q]}static singularValueDecompose2dScale(et){const Q=[et[0],et[2],et[1],et[3]],St=et[0]*Q[0]+et[1]*Q[2],oe=et[0]*Q[1]+et[1]*Q[3],Wt=et[2]*Q[0]+et[3]*Q[2],Qt=et[2]*Q[1]+et[3]*Q[3],Ge=(St+Qt)/2,Xe=Math.sqrt((St+Qt)**2-4*(St*Qt-Wt*oe))/2,ze=Ge+Xe||1,xe=Ge-Xe||1;return[Math.sqrt(ze),Math.sqrt(xe)]}static normalizeRect(et){const Q=et.slice(0);return et[0]>et[2]&&(Q[0]=et[2],Q[2]=et[0]),et[1]>et[3]&&(Q[1]=et[3],Q[3]=et[1]),Q}static intersect(et,Q){const St=Math.max(Math.min(et[0],et[2]),Math.min(Q[0],Q[2])),oe=Math.min(Math.max(et[0],et[2]),Math.max(Q[0],Q[2]));if(St>oe)return null;const Wt=Math.max(Math.min(et[1],et[3]),Math.min(Q[1],Q[3])),Qt=Math.min(Math.max(et[1],et[3]),Math.max(Q[1],Q[3]));return Wt>Qt?null:[St,Wt,oe,Qt]}static bezierBoundingBox(et,Q,St,oe,Wt,Qt,Ge,Xe){const ze=[],xe=[[],[]];let je,Be,rn,Se,sn,an,un,dn;for(let fn=0;fn<2;++fn){if(fn===0?(Be=6*et-12*St+6*Wt,je=-3*et+9*St-9*Wt+3*Ge,rn=3*St-3*et):(Be=6*Q-12*oe+6*Qt,je=-3*Q+9*oe-9*Qt+3*Xe,rn=3*oe-3*Q),Math.abs(je)<1e-12){if(Math.abs(Be)<1e-12)continue;Se=-rn/Be,0<Se&&Se<1&&ze.push(Se);continue}un=Be*Be-4*rn*je,dn=Math.sqrt(un),!(un<0)&&(sn=(-Be+dn)/(2*je),0<sn&&sn<1&&ze.push(sn),an=(-Be-dn)/(2*je),0<an&&an<1&&ze.push(an))}let Qe=ze.length,Fe;const tn=Qe;for(;Qe--;)Se=ze[Qe],Fe=1-Se,xe[0][Qe]=Fe*Fe*Fe*et+3*Fe*Fe*Se*St+3*Fe*Se*Se*Wt+Se*Se*Se*Ge,xe[1][Qe]=Fe*Fe*Fe*Q+3*Fe*Fe*Se*oe+3*Fe*Se*Se*Qt+Se*Se*Se*Xe;return xe[0][tn]=et,xe[1][tn]=Q,xe[0][tn+1]=Ge,xe[1][tn+1]=Xe,xe[0].length=xe[1].length=tn+2,[Math.min(...xe[0]),Math.min(...xe[1]),Math.max(...xe[0]),Math.max(...xe[1])]}}a.Util=Ct;const Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Bt(bt){if(bt[0]>="ï"){let Q;if(bt[0]==="þ"&&bt[1]==="ÿ"?Q="utf-16be":bt[0]==="ÿ"&&bt[1]==="þ"?Q="utf-16le":bt[0]==="ï"&&bt[1]==="»"&&bt[2]==="¿"&&(Q="utf-8"),Q)try{const St=new TextDecoder(Q,{fatal:!0}),oe=X(bt);return St.decode(oe)}catch(St){O(`stringToPDFString: "${St}".`)}}const et=[];for(let Q=0,St=bt.length;Q<St;Q++){const oe=Lt[bt.charCodeAt(Q)];et.push(oe?String.fromCharCode(oe):bt.charAt(Q))}return et.join("")}function Xt(bt){return decodeURIComponent(escape(bt))}function $t(bt){return unescape(encodeURIComponent(bt))}function ne(bt){return typeof bt=="object"&&bt?.byteLength!==void 0}function Me(bt,et){if(bt.length!==et.length)return!1;for(let Q=0,St=bt.length;Q<St;Q++)if(bt[Q]!==et[Q])return!1;return!0}function Ae(bt=new Date){return[bt.getUTCFullYear().toString(),(bt.getUTCMonth()+1).toString().padStart(2,"0"),bt.getUTCDate().toString().padStart(2,"0"),bt.getUTCHours().toString().padStart(2,"0"),bt.getUTCMinutes().toString().padStart(2,"0"),bt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ue{#t=!1;constructor(){this.promise=new Promise((et,Q)=>{this.resolve=St=>{this.#t=!0,et(St)},this.reject=St=>{this.#t=!0,Q(St)}})}get settled(){return this.#t}}a.PromiseCapability=Ue;let Pe=null,Oe=null;function qe(bt){return Pe||(Pe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Oe=new Map([["ﬅ","ſt"]])),bt.replaceAll(Pe,(et,Q,St)=>Q?Q.normalize("NFKC"):Oe.get(St))}function hn(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const bt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(bt);else for(let et=0;et<32;et++)bt[et]=Math.floor(Math.random()*255);return j(bt)}const Ne="pdfjs_internal_id_";a.AnnotationPrefix=Ne}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(d){if(typeof d=="string"||d instanceof URL?d={url:d}:(0,_util.isArrayBuffer)(d)&&(d={data:d}),typeof d!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!d.url&&!d.data&&!d.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const a=new PDFDocumentLoadingTask,{docId:I}=a,h=d.url?getUrlProp(d.url):null,b=d.data?getDataProp(d.data):null,n=d.httpHeaders||null,M=d.withCredentials===!0,V=d.password??null,q=d.range instanceof PDFDataRangeTransport?d.range:null,r=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let t=d.worker instanceof PDFWorker?d.worker:null;const i=d.verbosity,u=typeof d.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(d.docBaseUrl)?d.docBaseUrl:null,c=typeof d.cMapUrl=="string"?d.cMapUrl:null,e=d.cMapPacked!==!1,g=d.CMapReaderFactory||DefaultCMapReaderFactory,v=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,l=d.StandardFontDataFactory||DefaultStandardFontDataFactory,w=d.stopAtErrors!==!0,x=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,k=d.isEvalSupported!==!1,m=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!_util.isNodeJS,C=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,z=typeof d.disableFontFace=="boolean"?d.disableFontFace:_util.isNodeJS,$=d.fontExtraProperties===!0,H=d.enableXfa===!0,tt=d.ownerDocument||globalThis.document,nt=d.disableRange===!0,yt=d.disableStream===!0,dt=d.disableAutoFetch===!0,vt=d.pdfBug===!0,Et=q?q.length:d.length??NaN,ct=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!_util.isNodeJS&&!z,O=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:g===_display_utils.DOMCMapReaderFactory&&l===_display_utils.DOMStandardFontDataFactory&&c&&v&&(0,_display_utils.isValidFetchUrl)(c,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(v,document.baseURI),A=d.canvasFactory||new DefaultCanvasFactory({ownerDocument:tt}),f=d.filterFactory||new DefaultFilterFactory({docId:I,ownerDocument:tt}),p=null;(0,_util.setVerbosityLevel)(i);const S={canvasFactory:A,filterFactory:f};if(O||(S.cMapReaderFactory=new g({baseUrl:c,isCompressed:e}),S.standardFontDataFactory=new l({baseUrl:v})),!t){const U={verbosity:i,port:_worker_options.GlobalWorkerOptions.workerPort};t=U.port?PDFWorker.fromPort(U):new PDFWorker(U),a._worker=t}const L={docId:I,apiVersion:"3.11.174",data:b,password:V,disableAutoFetch:dt,rangeChunkSize:r,length:Et,docBaseUrl:u,enableXfa:H,evaluatorOptions:{maxImageSize:x,disableFontFace:z,ignoreErrors:w,isEvalSupported:k,isOffscreenCanvasSupported:m,canvasMaxAreaInBytes:C,fontExtraProperties:$,useSystemFonts:ct,cMapUrl:O?c:null,standardFontDataUrl:O?v:null}},F={ignoreErrors:w,isEvalSupported:k,disableFontFace:z,fontExtraProperties:$,enableXfa:H,ownerDocument:tt,disableAutoFetch:dt,pdfBug:vt,styleElement:p};return t.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const U=_fetchDocument(t,L),T=new Promise(function(s){let _;q?_=new _transport_stream.PDFDataTransportStream({length:Et,initialData:q.initialData,progressiveDone:q.progressiveDone,contentDispositionFilename:q.contentDispositionFilename,disableRange:nt,disableStream:yt},q):b||(_=(P=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(P):(0,_display_utils.isValidFetchUrl)(P.url)?new _displayFetch_stream.PDFFetchStream(P):new _displayNetwork.PDFNetworkStream(P))({url:h,length:Et,httpHeaders:n,withCredentials:M,rangeChunkSize:r,disableRange:nt,disableStream:yt})),s(_)});return Promise.all([U,T]).then(function([s,_]){if(a.destroyed)throw new Error("Loading aborted");const E=new _message_handler.MessageHandler(I,s,t.port),P=new WorkerTransport(E,a,_,F,S);a._transport=P,E.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(d,a){if(d.destroyed)throw new Error("Worker was destroyed");const I=await d.messageHandler.sendWithPromise("GetDocRequest",a,a.data?[a.data.buffer]:null);if(d.destroyed)throw new Error("Worker was destroyed");return I}function getUrlProp(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(_util.isNodeJS&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(d){if(_util.isNodeJS&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return(0,_util.stringToBytes)(d);if(typeof d=="object"&&!isNaN(d?.length)||(0,_util.isArrayBuffer)(d))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(a){throw this._worker?.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,I,h=!1,b=null){this.length=a,this.initialData=I,this.progressiveDone=h,this.contentDispositionFilename=b,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,I){for(const h of this._rangeListeners)h(a,I)}onDataProgress(a,I){this._readyCapability.promise.then(()=>{for(const h of this._progressListeners)h(a,I)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const I of this._progressiveReadListeners)I(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,I){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,I){this._pdfInfo=a,this._transport=I,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(h=>{if(!h)return h;const b=[];for(const n in h)b.push(...h[n]);return b}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(a,I,h,b=!1){this._pageIndex=a,this._pageInfo=I,this._transport=h,this._stats=b?new _display_utils.StatTimer:null,this._pdfBug=b,this.commonObjs=h.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:I=this.rotate,offsetX:h=0,offsetY:b=0,dontFlip:n=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:I,offsetX:h,offsetY:b,dontFlip:n})}getAnnotations({intent:a="display"}={}){const I=this._transport.getRenderingIntent(a);return this._transport.getAnnotations(this._pageIndex,I.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:a,viewport:I,intent:h="display",annotationMode:b=_util.AnnotationMode.ENABLE,transform:n=null,background:M=null,optionalContentConfigPromise:V=null,annotationCanvasMap:q=null,pageColors:r=null,printAnnotationStorage:t=null}){this._stats?.time("Overall");const i=this._transport.getRenderingIntent(h,b,t);this.#e=!1,this.#i(),V||(V=this._transport.getOptionalContentConfig());let u=this._intentStates.get(i.cacheKey);u||(u=Object.create(null),this._intentStates.set(i.cacheKey,u)),u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null);const c=!!(i.renderingIntent&_util.RenderingIntentFlag.PRINT);u.displayReadyCapability||(u.displayReadyCapability=new _util.PromiseCapability,u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(i));const e=l=>{u.renderTasks.delete(g),(this._maybeCleanupAfterRender||c)&&(this.#e=!0),this.#n(!c),l?(g.capability.reject(l),this._abortOperatorList({intentState:u,reason:l instanceof Error?l:new Error(l)})):g.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},g=new InternalRenderTask({callback:e,params:{canvasContext:a,viewport:I,transform:n,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:q,operatorList:u.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!c,pdfBug:this._pdfBug,pageColors:r});(u.renderTasks||=new Set).add(g);const v=g.task;return Promise.all([u.displayReadyCapability.promise,V]).then(([l,w])=>{if(this.destroyed){e();return}this._stats?.time("Rendering"),g.initializeGraphics({transparency:l,optionalContentConfig:w}),g.operatorListChanged()}).catch(e),v}getOperatorList({intent:a="display",annotationMode:I=_util.AnnotationMode.ENABLE,printAnnotationStorage:h=null}={}){function b(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(V))}const n=this._transport.getRenderingIntent(a,I,h,!0);let M=this._intentStates.get(n.cacheKey);M||(M=Object.create(null),this._intentStates.set(n.cacheKey,M));let V;return M.opListReadCapability||(V=Object.create(null),V.operatorListChanged=b,M.opListReadCapability=new _util.PromiseCapability,(M.renderTasks||=new Set).add(V),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(n)),M.opListReadCapability.promise}streamTextContent({includeMarkedContent:a=!1,disableNormalization:I=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:a===!0,disableNormalization:I===!0},{highWaterMark:100,size(b){return b.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(h=>_xfa_text.XfaText.textContent(h));const I=this.streamTextContent(a);return new Promise(function(h,b){function n(){M.read().then(function({value:q,done:r}){if(r){h(V);return}Object.assign(V.styles,q.styles),V.items.push(...q.items),n()},b)}const M=I.getReader(),V={items:[],styles:Object.create(null)};n()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const a=[];for(const I of this._intentStates.values())if(this._abortOperatorList({intentState:I,reason:new Error("Page was destroyed."),force:!0}),!I.opListReadCapability)for(const h of I.renderTasks)a.push(h.completed),h.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(a)}cleanup(a=!1){this.#e=!0;const I=this.#n(!1);return a&&I&&(this._stats&&=new _display_utils.StatTimer),I}#n(a=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(a)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:I,operatorList:h}of this._intentStates.values())if(I.size>0||!h.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(a,I){const h=this._intentStates.get(I);h&&(this._stats?.timeEnd("Page Request"),h.displayReadyCapability?.resolve(a))}_renderPageChunk(a,I){for(let h=0,b=a.length;h<b;h++)I.operatorList.fnArray.push(a.fnArray[h]),I.operatorList.argsArray.push(a.argsArray[h]);I.operatorList.lastChunk=a.lastChunk,I.operatorList.separateAnnots=a.separateAnnots;for(const h of I.renderTasks)h.operatorListChanged();a.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:a,cacheKey:I,annotationStorageSerializable:h}){const{map:b,transfers:n}=h,V=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:I,annotationStorage:b},n).getReader(),q=this._intentStates.get(I);q.streamReader=V;const r=()=>{V.read().then(({value:t,done:i})=>{if(i){q.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,q),r())},t=>{if(q.streamReader=null,!this._transport.destroyed){if(q.operatorList){q.operatorList.lastChunk=!0;for(const i of q.renderTasks)i.operatorListChanged();this.#n(!0)}if(q.displayReadyCapability)q.displayReadyCapability.reject(t);else if(q.opListReadCapability)q.opListReadCapability.reject(t);else throw t}})};r()}_abortOperatorList({intentState:a,reason:I,force:h=!1}){if(a.streamReader){if(a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null),!h){if(a.renderTasks.size>0)return;if(I instanceof _display_utils.RenderingCancelledException){let b=RENDERING_CANCELLED_TIMEOUT;I.extraDelay>0&&I.extraDelay<1e3&&(b+=I.extraDelay),a.streamReaderCancelTimeout=setTimeout(()=>{a.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:a,reason:I,force:!0})},b);return}}if(a.streamReader.cancel(new _util.AbortException(I.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[b,n]of this._intentStates)if(n===a){this._intentStates.delete(b);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(a,I){const h={data:structuredClone(a,I?{transfer:I}:null)};this.#e.then(()=>{for(const b of this.#t)b.call(this,h)})}addEventListener(a,I){this.#t.add(I)}removeEventListener(a,I){this.#t.delete(I)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const d=document?.currentScript?.src;d&&(PDFWorkerUtil.fallbackWorkerSrc=d.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(d,a){let I;try{if(I=new URL(d),!I.origin||I.origin==="null")return!1}catch{return!1}const h=new URL(a,I);return I.origin===h.origin},PDFWorkerUtil.createCDNWrapper=function(d){const a=`importScripts("${d}");`;return URL.createObjectURL(new Blob([a]))}}class PDFWorker{static#workerPorts;constructor({name:d=null,port:a=null,verbosity:I=(0,_util.getVerbosityLevel)()}={}){if(this.name=d,this.destroyed=!1,this.verbosity=I,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,a){if(PDFWorker.#workerPorts?.has(a))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(d){this._port=d,this._messageHandler=new _message_handler.MessageHandler("main","worker",d),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:d}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,d)||(d=PDFWorkerUtil.createCDNWrapper(new URL(d,window.location).href));const a=new Worker(d),I=new _message_handler.MessageHandler("main","worker",a),h=()=>{a.removeEventListener("error",b),I.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},b=()=>{this._webWorker||h()};a.addEventListener("error",b),I.on("test",M=>{if(a.removeEventListener("error",b),this.destroyed){h();return}M?(this._messageHandler=I,this._port=a,this._webWorker=a,this._readyCapability.resolve(),I.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),I.destroy(),a.terminate())}),I.on("ready",M=>{if(a.removeEventListener("error",b),this.destroyed){h();return}try{n()}catch{this._setupFakeWorker()}});const n=()=>{const M=new Uint8Array;I.send("test",M,[M.buffer])};n();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(d=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const I=`fake${PDFWorkerUtil.fakeWorkerId++}`,h=new _message_handler.MessageHandler(I+"_worker",I,a);d.setup(h,a);const b=new _message_handler.MessageHandler(I,I+"_worker",a);this._messageHandler=b,this._readyCapability.resolve(),b.send("configure",{verbosity:this.verbosity})}).catch(d=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${d.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(d){if(!d?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const a=this.#workerPorts?.get(d.port);if(a){if(a._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return a}return new PDFWorker(d)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(a,I,h,b,n){this.messageHandler=a,this.loadingTask=I,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:b.ownerDocument,styleElement:b.styleElement}),this._params=b,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=h,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(a,I=null){const h=this.#t.get(a);if(h)return h;const b=this.messageHandler.sendWithPromise(a,I);return this.#t.set(a,b),b}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(a,I=_util.AnnotationMode.ENABLE,h=null,b=!1){let n=_util.RenderingIntentFlag.DISPLAY,M=_annotation_storage.SerializableEmpty;switch(a){case"any":n=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(I){case _util.AnnotationMode.DISABLE:n+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:n+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:n+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=(n&_util.RenderingIntentFlag.PRINT&&h instanceof _annotation_storage.PrintAnnotationStorage?h:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${I}`)}return b&&(n+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:n,cacheKey:`${n}_${M.hash}`,annotationStorageSerializable:M}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const h of this.#e.values())a.push(h._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const I=this.messageHandler.sendWithPromise("Terminate",null);return a.push(I),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:I}=this;a.on("GetReader",(h,b)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=n=>{this._lastProgress={loaded:n.loaded,total:n.total}},b.onPull=()=>{this._fullReader.read().then(function({value:n,done:M}){if(M){b.close();return}(0,_util.assert)(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(n),1,[n])}).catch(n=>{b.error(n)})},b.onCancel=n=>{this._fullReader.cancel(n),b.ready.catch(M=>{if(!this.destroyed)throw M})}}),a.on("ReaderHeadersReady",h=>{const b=new _util.PromiseCapability,n=this._fullReader;return n.headersReady.then(()=>{(!n.isStreamingSupported||!n.isRangeSupported)&&(this._lastProgress&&I.onProgress?.(this._lastProgress),n.onProgress=M=>{I.onProgress?.({loaded:M.loaded,total:M.total})}),b.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},b.reject),b.promise}),a.on("GetRangeReader",(h,b)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(h.begin,h.end);if(!n){b.close();return}b.onPull=()=>{n.read().then(function({value:M,done:V}){if(V){b.close();return}(0,_util.assert)(M instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{b.error(M)})},b.onCancel=M=>{n.cancel(M),b.ready.catch(V=>{if(!this.destroyed)throw V})}}),a.on("GetDoc",({pdfInfo:h})=>{this._numPages=h.numPages,this._htmlForXfa=h.htmlForXfa,delete h.htmlForXfa,I._capability.resolve(new PDFDocumentProxy(h,this))}),a.on("DocException",function(h){let b;switch(h.name){case"PasswordException":b=new _util.PasswordException(h.message,h.code);break;case"InvalidPDFException":b=new _util.InvalidPDFException(h.message);break;case"MissingPDFException":b=new _util.MissingPDFException(h.message);break;case"UnexpectedResponseException":b=new _util.UnexpectedResponseException(h.message,h.status);break;case"UnknownErrorException":b=new _util.UnknownErrorException(h.message,h.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}I._capability.reject(b)}),a.on("PasswordRequest",h=>{if(this.#i=new _util.PromiseCapability,I.onPassword){const b=n=>{n instanceof Error?this.#i.reject(n):this.#i.resolve({password:n})};try{I.onPassword(b,h.code)}catch(n){this.#i.reject(n)}}else this.#i.reject(new _util.PasswordException(h.message,h.code));return this.#i.promise}),a.on("DataLoaded",h=>{I.onProgress?.({loaded:h.length,total:h.length}),this.downloadInfoCapability.resolve(h)}),a.on("StartRenderPage",h=>{if(this.destroyed)return;this.#e.get(h.pageIndex)._startRenderPage(h.transparency,h.cacheKey)}),a.on("commonobj",([h,b,n])=>{if(!this.destroyed&&!this.commonObjs.has(h))switch(b){case"Font":const M=this._params;if("error"in n){const r=n.error;(0,_util.warn)(`Error during font loading: ${r}`),this.commonObjs.resolve(h,r);break}const V=M.pdfBug&&globalThis.FontInspector?.enabled?(r,t)=>globalThis.FontInspector.fontAdded(r,t):null,q=new _font_loader.FontFaceObject(n,{isEvalSupported:M.isEvalSupported,disableFontFace:M.disableFontFace,ignoreErrors:M.ignoreErrors,inspectFont:V});this.fontLoader.bind(q).catch(r=>a.sendWithPromise("FontFallback",{id:h})).finally(()=>{!M.fontExtraProperties&&q.data&&(q.data=null),this.commonObjs.resolve(h,q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(h,n);break;default:throw new Error(`Got unknown common object type ${b}`)}}),a.on("obj",([h,b,n,M])=>{if(this.destroyed)return;const V=this.#e.get(b);if(!V.objs.has(h))switch(n){case"Image":if(V.objs.resolve(h,M),M){let q;if(M.bitmap){const{width:r,height:t}=M;q=r*t*4}else q=M.data?.length||0;q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(V._maybeCleanupAfterRender=!0)}break;case"Pattern":V.objs.resolve(h,M);break;default:throw new Error(`Got unknown object type ${n}`)}}),a.on("DocProgress",h=>{this.destroyed||I.onProgress?.({loaded:h.loaded,total:h.total})}),a.on("FetchBuiltInCMap",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(h):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(h):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:a,transfers:I}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:this._fullReader?.filename??null},I).finally(()=>{this.annotationStorage.resetModified()})}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const I=a-1,h=this.#n.get(I);if(h)return h;const b=this.messageHandler.sendWithPromise("GetPage",{pageIndex:I}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");const M=new PDFPageProxy(I,n,this,this._params.pdfBug);return this.#e.set(I,M),M});return this.#n.set(I,b),b}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,I){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:I})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const a="GetMetadata",I=this.#t.get(a);if(I)return I;const h=this.messageHandler.sendWithPromise(a,null).then(b=>({info:b[0],metadata:b[1]?new _metadata.Metadata(b[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(a,h),h}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const I of this.#e.values())if(!I.cleanup())throw new Error(`startCleanup: Page ${I.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:a,enableXfa:I}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a,enableXfa:I})}}class PDFObjects{#t=Object.create(null);#e(a){return this.#t[a]||={capability:new _util.PromiseCapability,data:null}}get(a,I=null){if(I){const b=this.#e(a);return b.capability.promise.then(()=>I(b.data)),null}const h=this.#t[a];if(!h?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${a}.`);return h.data}has(a){return this.#t[a]?.capability.settled||!1}resolve(a,I=null){const h=this.#e(a);h.data=I,h.capability.resolve()}clear(){for(const a in this.#t){const{data:I}=this.#t[a];I?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(a){this.#t=a,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(a=0){this.#t.cancel(null,a)}get separateAnnots(){const{separateAnnots:a}=this.#t.operatorList;if(!a)return!1;const{annotationCanvasMap:I}=this.#t;return a.form||a.canvas&&I?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:a,params:I,objs:h,commonObjs:b,annotationCanvasMap:n,operatorList:M,pageIndex:V,canvasFactory:q,filterFactory:r,useRequestAnimationFrame:t=!1,pdfBug:i=!1,pageColors:u=null}){this.callback=a,this.params=I,this.objs=h,this.commonObjs=b,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=V,this.canvasFactory=q,this.filterFactory=r,this._pdfBug=i,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=t===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=I.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:I}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:h,viewport:b,transform:n,background:M}=this.params;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:I},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:n,viewport:b,transparency:a,background:M}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(a=null,I=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,I))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SerializableEmpty=a.PrintAnnotationStorage=a.AnnotationStorage=void 0;var h=I(1),b=I(4),n=I(8);const M=Object.freeze({map:null,hash:"",transfers:void 0});a.SerializableEmpty=M;class V{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const u=this.#e.get(t);return u===void 0?i:Object.assign(i,u)}getRawValue(t){return this.#e.get(t)}remove(t){if(this.#e.delete(t),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of this.#e.values())if(i instanceof b.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,i){const u=this.#e.get(t);let c=!1;if(u!==void 0)for(const[e,g]of Object.entries(i))u[e]!==g&&(c=!0,u[e]=g);else c=!0,this.#e.set(t,i);c&&this.#n(),i instanceof b.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(t){return this.#e.has(t)}getAll(){return this.#e.size>0?(0,h.objectFromMap)(this.#e):null}setAll(t){for(const[i,u]of Object.entries(t))this.setValue(i,u)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new q(this)}get serializable(){if(this.#e.size===0)return M;const t=new Map,i=new n.MurmurHash3_64,u=[],c=Object.create(null);let e=!1;for(const[g,v]of this.#e){const l=v instanceof b.AnnotationEditor?v.serialize(!1,c):v;l&&(t.set(g,l),i.update(`${g}:${JSON.stringify(l)}`),e||=!!l.bitmap)}if(e)for(const g of t.values())g.bitmap&&u.push(g.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfers:u}:M}}a.AnnotationStorage=V;class q extends V{#t;constructor(t){super();const{map:i,hash:u,transfers:c}=t.serializable,e=structuredClone(i,c?{transfer:c}:null);this.#t={map:e,hash:u,transfers:c}}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}a.PrintAnnotationStorage=q}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditor=void 0;var h=I(5),b=I(1),n=I(6);class M{#t="";#e=!1;#n=null;#i=null;#o=null;#a=!1;#s=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#r=!1;#f=!1;#u=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#d=!1;#p=M._zIndex++;static _borderLineWidth=-1;static _colorManager=new h.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(r){this.constructor===M&&(0,b.unreachable)("Cannot initialize AnnotationEditor."),this.parent=r.parent,this.id=r.id,this.width=this.height=null,this.pageIndex=r.parent.pageIndex,this.name=r.name,this.div=null,this._uiManager=r.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=r.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:u,pageX:c,pageY:e}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,u],this.pageTranslation=[c,e];const[g,v]=this.parentDimensions;this.x=r.x/g,this.y=r.y/v,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,b.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(r){const t=new V({id:r.parent.getNextId(),parent:r.parent,uiManager:r._uiManager});t.annotationElementId=r.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(r,t=null){if(M._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(u=>[u,r.get(u)])),t?.strings)for(const u of t.strings)M._l10nPromise.set(u,r.get(u));if(M._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);M._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(r,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(r){return!1}static paste(r,t){(0,b.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#d}set _isDraggable(r){this.#d=r,this.div?.classList.toggle("draggable",r)}center(){const[r,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(r*2),this.y+=this.width*r/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(r*2),this.y-=this.width*r/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(r){this._uiManager.addCommands(r)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(r){r!==null&&(this.pageIndex=r.pageIndex,this.pageDimensions=r.pageDimensions),this.parent=r}focusin(r){this._focusEventsAllowed&&(this.#r?this.#r=!1:this.parent.setSelected(this))}focusout(r){!this._focusEventsAllowed||!this.isAttachedToDOM||r.relatedTarget?.closest(`#${this.id}`)||(r.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(r,t,i,u){const[c,e]=this.parentDimensions;[i,u]=this.screenToPageTranslation(i,u),this.x=(r+i)/c,this.y=(t+u)/e,this.fixAndSetPosition()}#v([r,t],i,u){[i,u]=this.screenToPageTranslation(i,u),this.x+=i/r,this.y+=u/t,this.fixAndSetPosition()}translate(r,t){this.#v(this.parentDimensions,r,t)}translateInPage(r,t){this.#v(this.pageDimensions,r,t),this.div.scrollIntoView({block:"nearest"})}drag(r,t){const[i,u]=this.parentDimensions;if(this.x+=r/i,this.y+=t/u,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:l,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,l,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:e}=this;const[g,v]=this.#m();c+=g,e+=v,this.div.style.left=`${(100*c).toFixed(2)}%`,this.div.style.top=`${(100*e).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[r,t]=this.parentDimensions,{_borderLineWidth:i}=M,u=i/r,c=i/t;switch(this.rotation){case 90:return[-u,c];case 180:return[u,c];case 270:return[u,-c];default:return[-u,-c]}}fixAndSetPosition(){const[r,t]=this.pageDimensions;let{x:i,y:u,width:c,height:e}=this;switch(c*=r,e*=t,i*=r,u*=t,this.rotation){case 0:i=Math.max(0,Math.min(r-c,i)),u=Math.max(0,Math.min(t-e,u));break;case 90:i=Math.max(0,Math.min(r-e,i)),u=Math.min(t,Math.max(c,u));break;case 180:i=Math.min(r,Math.max(c,i)),u=Math.min(t,Math.max(e,u));break;case 270:i=Math.min(r,Math.max(e,i)),u=Math.max(0,Math.min(t-c,u));break}this.x=i/=r,this.y=u/=t;const[g,v]=this.#m();i+=g,u+=v;const{style:l}=this.div;l.left=`${(100*i).toFixed(2)}%`,l.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}static#g(r,t,i){switch(i){case 90:return[t,-r];case 180:return[-r,-t];case 270:return[-t,r];default:return[r,t]}}screenToPageTranslation(r,t){return M.#g(r,t,this.parentRotation)}pageTranslationToScreen(r,t){return M.#g(r,t,360-this.parentRotation)}#h(r){switch(r){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:r,pageDimensions:[t,i]}=this,u=t*r,c=i*r;return b.FeatureTest.isCSSRoundSupported?[Math.round(u),Math.round(c)]:[u,c]}setDims(r,t){const[i,u]=this.parentDimensions;this.div.style.width=`${(100*r/i).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*t/u).toFixed(2)}%`),this.#n?.classList.toggle("small",r<M.SMALL_EDITOR_SIZE||t<M.SMALL_EDITOR_SIZE)}fixDims(){const{style:r}=this.div,{height:t,width:i}=r,u=i.endsWith("%"),c=!this.#a&&t.endsWith("%");if(u&&c)return;const[e,g]=this.parentDimensions;u||(r.width=`${(100*parseFloat(i)/e).toFixed(2)}%`),!this.#a&&!c&&(r.height=`${(100*parseFloat(t)/g).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const r=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||r.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of r){const i=document.createElement("div");this.#s.append(i),i.classList.add("resizer",t),i.addEventListener("pointerdown",this.#E.bind(this,t)),i.addEventListener("contextmenu",n.noContextMenu)}this.div.prepend(this.#s)}#E(r,t){t.preventDefault();const{isMac:i}=b.FeatureTest.platform;if(t.button!==0||t.ctrlKey&&i)return;const u=this.#S.bind(this,r),c=this._isDraggable;this._isDraggable=!1;const e={passive:!0,capture:!0};window.addEventListener("pointermove",u,e);const g=this.x,v=this.y,l=this.width,w=this.height,x=this.parent.div.style.cursor,k=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{this._isDraggable=c,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",u,e),this.parent.div.style.cursor=x,this.div.style.cursor=k;const C=this.x,z=this.y,$=this.width,H=this.height;C===g&&z===v&&$===l&&H===w||this.addCommands({cmd:()=>{this.width=$,this.height=H,this.x=C,this.y=z;const[tt,nt]=this.parentDimensions;this.setDims(tt*$,nt*H),this.fixAndSetPosition()},undo:()=>{this.width=l,this.height=w,this.x=g,this.y=v;const[tt,nt]=this.parentDimensions;this.setDims(tt*l,nt*w),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",m),window.addEventListener("blur",m)}#S(r,t){const[i,u]=this.parentDimensions,c=this.x,e=this.y,g=this.width,v=this.height,l=M.MIN_SIZE/i,w=M.MIN_SIZE/u,x=T=>Math.round(T*1e4)/1e4,k=this.#h(this.rotation),m=(T,s)=>[k[0]*T+k[2]*s,k[1]*T+k[3]*s],C=this.#h(360-this.rotation),z=(T,s)=>[C[0]*T+C[2]*s,C[1]*T+C[3]*s];let $,H,tt=!1,nt=!1;switch(r){case"topLeft":tt=!0,$=(T,s)=>[0,0],H=(T,s)=>[T,s];break;case"topMiddle":$=(T,s)=>[T/2,0],H=(T,s)=>[T/2,s];break;case"topRight":tt=!0,$=(T,s)=>[T,0],H=(T,s)=>[0,s];break;case"middleRight":nt=!0,$=(T,s)=>[T,s/2],H=(T,s)=>[0,s/2];break;case"bottomRight":tt=!0,$=(T,s)=>[T,s],H=(T,s)=>[0,0];break;case"bottomMiddle":$=(T,s)=>[T/2,s],H=(T,s)=>[T/2,0];break;case"bottomLeft":tt=!0,$=(T,s)=>[0,s],H=(T,s)=>[T,0];break;case"middleLeft":nt=!0,$=(T,s)=>[0,s/2],H=(T,s)=>[T,s/2];break}const yt=$(g,v),dt=H(g,v);let vt=m(...dt);const Et=x(c+vt[0]),ct=x(e+vt[1]);let O=1,A=1,[f,p]=this.screenToPageTranslation(t.movementX,t.movementY);if([f,p]=z(f/i,p/u),tt){const T=Math.hypot(g,v);O=A=Math.max(Math.min(Math.hypot(dt[0]-yt[0]-f,dt[1]-yt[1]-p)/T,1/g,1/v),l/g,w/v)}else nt?O=Math.max(l,Math.min(1,Math.abs(dt[0]-yt[0]-f)))/g:A=Math.max(w,Math.min(1,Math.abs(dt[1]-yt[1]-p)))/v;const S=x(g*O),L=x(v*A);vt=m(...H(S,L));const F=Et-vt[0],U=ct-vt[1];this.width=S,this.height=L,this.x=F,this.y=U,this.setDims(i*S,u*L),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const r=this.#n=document.createElement("button");r.className="altText";const t=await M._l10nPromise.get("editor_alt_text_button_label");r.textContent=t,r.setAttribute("aria-label",t),r.tabIndex="0",r.addEventListener("contextmenu",n.noContextMenu),r.addEventListener("pointerdown",i=>i.stopPropagation()),r.addEventListener("click",i=>{i.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),r.addEventListener("keydown",i=>{i.target===r&&i.key==="Enter"&&(i.preventDefault(),this._uiManager.editAltText(this))}),this.#P(),this.div.append(r),M.SMALL_EDITOR_SIZE||(M.SMALL_EDITOR_SIZE=Math.min(128,Math.round(r.getBoundingClientRect().width*1.4)))}async#P(){const r=this.#n;if(!r)return;if(!this.#t&&!this.#e){r.classList.remove("done"),this.#i?.remove();return}M._l10nPromise.get("editor_alt_text_edit_button_label").then(i=>{r.setAttribute("aria-label",i)});let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const i=t.id=`alt-text-tooltip-${this.id}`;r.setAttribute("aria-describedby",i);const u=100;r.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},u)}),r.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#i?.classList.remove("show")})}r.classList.add("done"),t.innerText=this.#e?await M._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,t.parentNode||r.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:r,decorative:t}){this.#t===r&&this.#e===t||(this.#t=r,this.#e=t,this.#P())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[r,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/r).toFixed(2)}%`,this.div.style.maxHeight=`${(100*r/t).toFixed(2)}%`);const[i,u]=this.getInitialTranslation();return this.translate(i,u),(0,h.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(r){const{isMac:t}=b.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&t){r.preventDefault();return}this.#r=!0,this.#k(r)}#k(r){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,u;t&&(i={passive:!0,capture:!0},u=e=>{const[g,v]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(g,v)},window.addEventListener("pointermove",u,i));const c=()=>{if(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),t&&window.removeEventListener("pointermove",u,i),this.#r=!1,!this._uiManager.endDragSession()){const{isMac:e}=b.FeatureTest.platform;r.ctrlKey&&!e||r.shiftKey||r.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",c),window.addEventListener("blur",c)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(r,t,i){r.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(r,t){const i=this.parentScale,[u,c]=this.pageDimensions,[e,g]=this.pageTranslation,v=r/i,l=t/i,w=this.x*u,x=this.y*c,k=this.width*u,m=this.height*c;switch(this.rotation){case 0:return[w+v+e,c-x-l-m+g,w+v+k+e,c-x-l+g];case 90:return[w+l+e,c-x+v+g,w+l+m+e,c-x+v+k+g];case 180:return[w-v-k+e,c-x+l+g,w-v+e,c-x+l+m+g];case 270:return[w-l-m+e,c-x-v-k+g,w-l+e,c-x-v+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(r,t){const[i,u,c,e]=r,g=c-i,v=e-u;switch(this.rotation){case 0:return[i,t-e,g,v];case 90:return[i,t-u,v,g];case 180:return[c,t-u,g,v];case 270:return[c,t-e,v,g];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#u=!0}disableEditMode(){this.#u=!1}isInEditMode(){return this.#u}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(r=!1,t=null){(0,b.unreachable)("An editor must be serializable")}static deserialize(r,t,i){const u=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});u.rotation=r.rotation;const[c,e]=u.pageDimensions,[g,v,l,w]=u.getRectInCurrentCoords(r.rect,e);return u.x=g/c,u.y=v/e,u.width=l/c,u.height=w/e,u}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(r,t){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(r){this.#f=r,this.parent&&(r?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(r,t){this.#a=!0;const i=r/t,{style:u}=this.div;u.aspectRatio=i,u.height="auto"}static get MIN_SIZE(){return 16}}a.AnnotationEditor=M;class V extends M{constructor(r){super(r),this.annotationElementId=r.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.KeyboardManager=a.CommandManager=a.ColorManager=a.AnnotationEditorUIManager=void 0,a.bindEvents=n,a.opacityToHex=M;var h=I(1),b=I(6);function n(c,e,g){for(const v of g)e.addEventListener(v,c[v].bind(c))}function M(c){return Math.round(Math.min(255,Math.max(1,255*c))).toString(16).padStart(2,"0")}class V{#t=0;getId(){return`${h.AnnotationEditorPrefix}${this.#t++}`}}class q{#t=(0,h.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',v=new OffscreenCanvas(1,3).getContext("2d"),l=new Image;l.src=e;const w=l.decode().then(()=>(v.drawImage(l,0,0,1,1,0,0,1,3),new Uint32Array(v.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,h.shadow)(this,"_isSVGFittingCanvas",w)}async#i(e,g){this.#n||=new Map;let v=this.#n.get(e);if(v===null)return null;if(v?.bitmap)return v.refCounter+=1,v;try{v||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let l;if(typeof g=="string"){v.url=g;const w=await fetch(g);if(!w.ok)throw new Error(w.statusText);l=await w.blob()}else l=v.file=g;if(l.type==="image/svg+xml"){const w=q._isSVGFittingCanvas,x=new FileReader,k=new Image,m=new Promise((C,z)=>{k.onload=()=>{v.bitmap=k,v.isSvg=!0,C()},x.onload=async()=>{const $=v.svgUrl=x.result;k.src=await w?`${$}#svgView(preserveAspectRatio(none))`:$},k.onerror=x.onerror=z});x.readAsDataURL(l),await m}else v.bitmap=await createImageBitmap(l);v.refCounter=1}catch(l){console.error(l),v=null}return this.#n.set(e,v),v&&this.#n.set(v.id,v),v}async getFromFile(e){const{lastModified:g,name:v,size:l,type:w}=e;return this.#i(`${g}_${v}_${l}_${w}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromId(e){this.#n||=new Map;const g=this.#n.get(e);return g?g.bitmap?(g.refCounter+=1,g):g.file?this.getFromFile(g.file):this.getFromUrl(g.url):null}getSvgUrl(e){const g=this.#n.get(e);return g?.isSvg?g.svgUrl:null}deleteId(e){this.#n||=new Map;const g=this.#n.get(e);g&&(g.refCounter-=1,g.refCounter===0&&(g.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#t}_`)}}class r{#t=[];#e=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:g,mustExec:v,type:l=NaN,overwriteIfSameType:w=!1,keepUndo:x=!1}){if(v&&e(),this.#e)return;const k={cmd:e,undo:g,type:l};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(k);return}if(w&&this.#t[this.#i].type===l){x&&(k.undo=this.#t[this.#i].undo),this.#t[this.#i]=k;return}const m=this.#i+1;m===this.#n?this.#t.splice(0,1):(this.#i=m,m<this.#t.length&&this.#t.splice(m)),this.#t.push(k)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}a.CommandManager=r;class t{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:g}=h.FeatureTest.platform;for(const[v,l,w={}]of e)for(const x of v){const k=x.startsWith("mac+");g&&k?(this.callbacks.set(x.slice(4),{callback:l,options:w}),this.allKeys.add(x.split("+").at(-1))):!g&&!k&&(this.callbacks.set(x,{callback:l,options:w}),this.allKeys.add(x.split("+").at(-1)))}}#t(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const g=this.buffer.join("+");return this.buffer.length=0,g}exec(e,g){if(!this.allKeys.has(g.key))return;const v=this.callbacks.get(this.#t(g));if(!v)return;const{callback:l,options:{bubbles:w=!1,args:x=[],checker:k=null}}=v;k&&!k(e,g)||(l.bind(e,...x)(),w||(g.stopPropagation(),g.preventDefault()))}}a.KeyboardManager=t;class i{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,b.getColorValues)(e),(0,h.shadow)(this,"_colors",e)}convert(e){const g=(0,b.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return g;for(const[v,l]of this._colors)if(l.every((w,x)=>w===g[x]))return i._colorsMapping.get(v);return g}getHexCode(e){const g=this._colors.get(e);return g?h.Util.makeHexColor(...g):e}}a.ColorManager=i;class u{#t=null;#e=new Map;#n=new Map;#i=null;#o=null;#a=new r;#s=0;#l=new Set;#c=null;#r=null;#f=new Set;#u=null;#d=new V;#p=!1;#v=!1;#m=null;#g=h.AnnotationEditorType.NONE;#h=new Set;#b=null;#E=this.blur.bind(this);#S=this.focus.bind(this);#P=this.copy.bind(this);#k=this.cut.bind(this);#D=this.paste.bind(this);#I=this.keydown.bind(this);#O=this.onEditingAction.bind(this);#_=this.onPageChanging.bind(this);#L=this.onScaleChanging.bind(this);#R=this.onRotationChanging.bind(this);#M={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#y=[0,0];#T=null;#w=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=u.prototype,g=w=>{const{activeElement:x}=document;return x&&w.#w.contains(x)&&w.hasSomethingToControl()},v=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new t([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-v,0],checker:g}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:g}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[v,0],checker:g}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:g}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-v],checker:g}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:g}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,v],checker:g}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:g}]]))}constructor(e,g,v,l,w,x){this.#w=e,this.#N=g,this.#i=v,this._eventBus=l,this._eventBus._on("editingaction",this.#O),this._eventBus._on("pagechanging",this.#_),this._eventBus._on("scalechanging",this.#L),this._eventBus._on("rotationchanging",this.#R),this.#o=w.annotationStorage,this.#u=w.filterFactory,this.#b=x,this.viewParameters={realScale:b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#x(),this.#H(),this._eventBus._off("editingaction",this.#O),this._eventBus._off("pagechanging",this.#_),this._eventBus._off("scalechanging",this.#L),this._eventBus._off("rotationchanging",this.#R);for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#h.clear(),this.#a.destroy(),this.#i.destroy()}get hcmFilter(){return(0,h.shadow)(this,"hcmFilter",this.#b?this.#u.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,h.shadow)(this,"direction",getComputedStyle(this.#w).direction)}editAltText(e){this.#i?.editAltText(this,e)}onPageChanging({pageNumber:e}){this.#s=e-1}focusMainContainer(){this.#w.focus()}findParent(e,g){for(const v of this.#n.values()){const{x:l,y:w,width:x,height:k}=v.div.getBoundingClientRect();if(e>=l&&e<=l+x&&g>=w&&g<=w+k)return v}return null}disableUserSelect(e=!1){this.#N.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#f.add(e)}removeShouldRescale(e){this.#f.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*b.PixelsPerInch.PDF_TO_CSS_UNITS;for(const g of this.#f)g.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}#B(){window.addEventListener("focus",this.#S),window.addEventListener("blur",this.#E)}#H(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const g of this.#h)if(g.div.contains(e)){this.#m=[g,e],g._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[e,g]=this.#m;this.#m=null,g.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),g.focus()}#U(){window.addEventListener("keydown",this.#I,{capture:!0})}#x(){window.removeEventListener("keydown",this.#I,{capture:!0})}#F(){document.addEventListener("copy",this.#P),document.addEventListener("cut",this.#k),document.addEventListener("paste",this.#D)}#C(){document.removeEventListener("copy",this.#P),document.removeEventListener("cut",this.#k),document.removeEventListener("paste",this.#D)}addEditListeners(){this.#U(),this.#F()}removeEditListeners(){this.#x(),this.#C()}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const g=[];for(const v of this.#h){const l=v.serialize(!0);l&&g.push(l)}g.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(g))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:g}=e;for(const w of g.items)for(const x of this.#r)if(x.isHandlingMimeForPasting(w.type)){x.paste(w,this.currentLayer);return}let v=g.getData("application/pdfjs");if(!v)return;try{v=JSON.parse(v)}catch(w){(0,h.warn)(`paste: "${w.message}".`);return}if(!Array.isArray(v))return;this.unselectAll();const l=this.currentLayer;try{const w=[];for(const m of v){const C=l.deserialize(m);if(!C)return;w.push(C)}const x=()=>{for(const m of w)this.#z(m);this.#V(w)},k=()=>{for(const m of w)m.remove()};this.addCommands({cmd:x,undo:k,mustExec:!0})}catch(w){(0,h.warn)(`paste: "${w.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||u._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#A(e){Object.entries(e).some(([v,l])=>this.#M[v]!==l)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#M,e)})}#j(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#B(),this.#U(),this.#F(),this.#A({isEditing:this.#g!==h.AnnotationEditorType.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#H(),this.#x(),this.#C(),this.#A({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#r){this.#r=e;for(const g of this.#r)this.#j(g.defaultPropertiesToUpdate)}}getId(){return this.#d.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#s}addLayer(e){this.#n.set(e.pageIndex,e),this.#p?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}updateMode(e,g=null){if(this.#g!==e){if(this.#g=e,e===h.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#q(),this.unselectAll();for(const v of this.#n.values())v.updateMode(e);if(g){for(const v of this.#e.values())if(v.annotationElementId===g){this.setSelected(v),v.enterInEditMode();break}}}}updateToolbar(e){e!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,g){if(this.#r){if(e===h.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const v of this.#h)v.updateParams(e,g);for(const v of this.#r)v.updateDefaultParams(e,g)}}enableWaiting(e=!1){if(this.#v!==e){this.#v=e;for(const g of this.#n.values())e?g.disableClick():g.enableClick(),g.div.classList.toggle("waiting",e)}}#q(){if(!this.#p){this.#p=!0;for(const e of this.#n.values())e.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(const e of this.#n.values())e.disable()}}getEditors(e){const g=[];for(const v of this.#e.values())v.pageIndex===e&&g.push(v);return g}getEditor(e){return this.#e.get(e)}addEditor(e){this.#e.set(e.id,e)}removeEditor(e){this.#e.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#l.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#l.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#l.has(e)}removeDeletedAnnotationElement(e){this.#l.delete(e.annotationElementId),e.deleted=!1}#z(e){const g=this.#n.get(e.pageIndex);g?g.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#j(e.propertiesToUpdate))}toggleSelected(e){if(this.#h.has(e)){this.#h.delete(e),e.unselect(),this.#A({hasSelectedEditor:this.hasSelection});return}this.#h.add(e),e.select(),this.#j(e.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}setSelected(e){for(const g of this.#h)g!==e&&g.unselect();this.#h.clear(),this.#h.add(e),e.select(),this.#j(e.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}isSelected(e){return this.#h.has(e)}unselect(e){e.unselect(),this.#h.delete(e),this.#A({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#h.size!==0}undo(){this.#a.undo(),this.#A({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()})}redo(){this.#a.redo(),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#a.add(e),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}#W(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const e of this.#e.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#h],g=()=>{for(const l of e)l.remove()},v=()=>{for(const l of e)this.#z(l)};this.addCommands({cmd:g,undo:v,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#V(e){this.#h.clear();for(const g of e)g.isEmpty()||(this.#h.add(g),g.select());this.#A({hasSelectedEditor:!0})}selectAll(){for(const e of this.#h)e.commit();this.#V(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const e of this.#h)e.unselect();this.#h.clear(),this.#A({hasSelectedEditor:!1})}}translateSelectedEditors(e,g,v=!1){if(v||this.commitOrRemove(),!this.hasSelection)return;this.#y[0]+=e,this.#y[1]+=g;const[l,w]=this.#y,x=[...this.#h],k=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#y[0]=this.#y[1]=0,this.addCommands({cmd:()=>{for(const m of x)this.#e.has(m.id)&&m.translateInPage(l,w)},undo:()=>{for(const m of x)this.#e.has(m.id)&&m.translateInPage(-l,-w)},mustExec:!1})},k);for(const m of x)m.translateInPage(e,g)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const e of this.#h)this.#c.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const e=this.#c;this.#c=null;let g=!1;for(const[{x:l,y:w,pageIndex:x},k]of e)k.newX=l,k.newY=w,k.newPageIndex=x,g||=l!==k.savedX||w!==k.savedY||x!==k.savedPageIndex;if(!g)return!1;const v=(l,w,x,k)=>{if(this.#e.has(l.id)){const m=this.#n.get(k);m?l._setParentAndPosition(m,w,x):(l.pageIndex=k,l.x=w,l.y=x)}};return this.addCommands({cmd:()=>{for(const[l,{newX:w,newY:x,newPageIndex:k}]of e)v(l,w,x,k)},undo:()=>{for(const[l,{savedX:w,savedY:x,savedPageIndex:k}]of e)v(l,w,x,k)},mustExec:!0}),!0}dragSelectedEditors(e,g){if(this.#c)for(const v of this.#c.keys())v.drag(e,g)}rebuild(e){if(e.parent===null){const g=this.getLayer(e.pageIndex);g?(g.changeParent(e),g.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#g}get imageManager(){return(0,h.shadow)(this,"imageManager",new q)}}a.AnnotationEditorUIManager=u}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMFilterFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=void 0,a.deprecated=z,a.getColorValues=yt,a.getCurrentTransform=dt,a.getCurrentTransformInverse=vt,a.getFilenameFromUrl=l,a.getPdfFilenameFromUrl=w,a.getRGB=nt,a.getXfaPageViewport=tt,a.isDataScheme=g,a.isPdfFile=v,a.isValidFetchUrl=k,a.loadScript=C,a.noContextMenu=m,a.setLayerDimensions=Et;var h=I(7),b=I(1);const n="http://www.w3.org/2000/svg";class M{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}a.PixelsPerInch=M;class V extends h.BaseFilterFactory{#t;#e;#n;#i;#o;#a;#s;#l;#c;#r;#f=0;constructor({docId:O,ownerDocument:A=globalThis.document}={}){super(),this.#n=O,this.#i=A}get#u(){return this.#t||=new Map}get#d(){if(!this.#e){const O=this.#i.createElement("div"),{style:A}=O;A.visibility="hidden",A.contain="strict",A.width=A.height=0,A.position="absolute",A.top=A.left=0,A.zIndex=-1;const f=this.#i.createElementNS(n,"svg");f.setAttribute("width",0),f.setAttribute("height",0),this.#e=this.#i.createElementNS(n,"defs"),O.append(f),f.append(this.#e),this.#i.body.append(O)}return this.#e}addFilter(O){if(!O)return"none";let A=this.#u.get(O);if(A)return A;let f,p,S,L;if(O.length===1){const s=O[0],_=new Array(256);for(let E=0;E<256;E++)_[E]=s[E]/255;L=f=p=S=_.join(",")}else{const[s,_,E]=O,P=new Array(256),R=new Array(256),j=new Array(256);for(let X=0;X<256;X++)P[X]=s[X]/255,R[X]=_[X]/255,j[X]=E[X]/255;f=P.join(","),p=R.join(","),S=j.join(","),L=`${f}${p}${S}`}if(A=this.#u.get(L),A)return this.#u.set(O,A),A;const F=`g_${this.#n}_transfer_map_${this.#f++}`,U=`url(#${F})`;this.#u.set(O,U),this.#u.set(L,U);const T=this.#v(F);return this.#g(f,p,S,T),U}addHCMFilter(O,A){const f=`${O}-${A}`;if(this.#a===f)return this.#s;if(this.#a=f,this.#s="none",this.#o?.remove(),!O||!A)return this.#s;const p=this.#h(O);O=b.Util.makeHexColor(...p);const S=this.#h(A);if(A=b.Util.makeHexColor(...S),this.#d.style.color="",O==="#000000"&&A==="#ffffff"||O===A)return this.#s;const L=new Array(256);for(let _=0;_<=255;_++){const E=_/255;L[_]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const F=L.join(","),U=`g_${this.#n}_hcm_filter`,T=this.#l=this.#v(U);this.#g(F,F,F,T),this.#p(T);const s=(_,E)=>{const P=p[_]/255,R=S[_]/255,j=new Array(E+1);for(let X=0;X<=E;X++)j[X]=P+X/E*(R-P);return j.join(",")};return this.#g(s(0,5),s(1,5),s(2,5),T),this.#s=`url(#${U})`,this.#s}addHighlightHCMFilter(O,A,f,p){const S=`${O}-${A}-${f}-${p}`;if(this.#c===S)return this.#r;if(this.#c=S,this.#r="none",this.#l?.remove(),!O||!A)return this.#r;const[L,F]=[O,A].map(this.#h.bind(this));let U=Math.round(.2126*L[0]+.7152*L[1]+.0722*L[2]),T=Math.round(.2126*F[0]+.7152*F[1]+.0722*F[2]),[s,_]=[f,p].map(this.#h.bind(this));T<U&&([U,T,s,_]=[T,U,_,s]),this.#d.style.color="";const E=(j,X,it)=>{const At=new Array(256),rt=(T-U)/it,st=j/255,ht=(X-j)/(255*it);let ut=0;for(let gt=0;gt<=it;gt++){const Ct=Math.round(U+gt*rt),Lt=st+gt*ht;for(let Bt=ut;Bt<=Ct;Bt++)At[Bt]=Lt;ut=Ct+1}for(let gt=ut;gt<256;gt++)At[gt]=At[ut-1];return At.join(",")},P=`g_${this.#n}_hcm_highlight_filter`,R=this.#l=this.#v(P);return this.#p(R),this.#g(E(s[0],_[0],5),E(s[1],_[1],5),E(s[2],_[2],5),R),this.#r=`url(#${P})`,this.#r}destroy(O=!1){O&&(this.#s||this.#r)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(O){const A=this.#i.createElementNS(n,"feColorMatrix");A.setAttribute("type","matrix"),A.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),O.append(A)}#v(O){const A=this.#i.createElementNS(n,"filter");return A.setAttribute("color-interpolation-filters","sRGB"),A.setAttribute("id",O),this.#d.append(A),A}#m(O,A,f){const p=this.#i.createElementNS(n,A);p.setAttribute("type","discrete"),p.setAttribute("tableValues",f),O.append(p)}#g(O,A,f,p){const S=this.#i.createElementNS(n,"feComponentTransfer");p.append(S),this.#m(S,"feFuncR",O),this.#m(S,"feFuncG",A),this.#m(S,"feFuncB",f)}#h(O){return this.#d.style.color=O,nt(getComputedStyle(this.#d).getPropertyValue("color"))}}a.DOMFilterFactory=V;class q extends h.BaseCanvasFactory{constructor({ownerDocument:O=globalThis.document}={}){super(),this._document=O}_createCanvas(O,A){const f=this._document.createElement("canvas");return f.width=O,f.height=A,f}}a.DOMCanvasFactory=q;async function r(ct,O=!1){if(k(ct,document.baseURI)){const A=await fetch(ct);if(!A.ok)throw new Error(A.statusText);return O?new Uint8Array(await A.arrayBuffer()):(0,b.stringToBytes)(await A.text())}return new Promise((A,f)=>{const p=new XMLHttpRequest;p.open("GET",ct,!0),O&&(p.responseType="arraybuffer"),p.onreadystatechange=()=>{if(p.readyState===XMLHttpRequest.DONE){if(p.status===200||p.status===0){let S;if(O&&p.response?S=new Uint8Array(p.response):!O&&p.responseText&&(S=(0,b.stringToBytes)(p.responseText)),S){A(S);return}}f(new Error(p.statusText))}},p.send(null)})}class t extends h.BaseCMapReaderFactory{_fetchData(O,A){return r(O,this.isCompressed).then(f=>({cMapData:f,compressionType:A}))}}a.DOMCMapReaderFactory=t;class i extends h.BaseStandardFontDataFactory{_fetchData(O){return r(O,!0)}}a.DOMStandardFontDataFactory=i;class u extends h.BaseSVGFactory{_createSVG(O){return document.createElementNS(n,O)}}a.DOMSVGFactory=u;class c{constructor({viewBox:O,scale:A,rotation:f,offsetX:p=0,offsetY:S=0,dontFlip:L=!1}){this.viewBox=O,this.scale=A,this.rotation=f,this.offsetX=p,this.offsetY=S;const F=(O[2]+O[0])/2,U=(O[3]+O[1])/2;let T,s,_,E;switch(f%=360,f<0&&(f+=360),f){case 180:T=-1,s=0,_=0,E=1;break;case 90:T=0,s=1,_=1,E=0;break;case 270:T=0,s=-1,_=-1,E=0;break;case 0:T=1,s=0,_=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}L&&(_=-_,E=-E);let P,R,j,X;T===0?(P=Math.abs(U-O[1])*A+p,R=Math.abs(F-O[0])*A+S,j=(O[3]-O[1])*A,X=(O[2]-O[0])*A):(P=Math.abs(F-O[0])*A+p,R=Math.abs(U-O[1])*A+S,j=(O[2]-O[0])*A,X=(O[3]-O[1])*A),this.transform=[T*A,s*A,_*A,E*A,P-T*A*F-_*A*U,R-s*A*F-E*A*U],this.width=j,this.height=X}get rawDims(){const{viewBox:O}=this;return(0,b.shadow)(this,"rawDims",{pageWidth:O[2]-O[0],pageHeight:O[3]-O[1],pageX:O[0],pageY:O[1]})}clone({scale:O=this.scale,rotation:A=this.rotation,offsetX:f=this.offsetX,offsetY:p=this.offsetY,dontFlip:S=!1}={}){return new c({viewBox:this.viewBox.slice(),scale:O,rotation:A,offsetX:f,offsetY:p,dontFlip:S})}convertToViewportPoint(O,A){return b.Util.applyTransform([O,A],this.transform)}convertToViewportRectangle(O){const A=b.Util.applyTransform([O[0],O[1]],this.transform),f=b.Util.applyTransform([O[2],O[3]],this.transform);return[A[0],A[1],f[0],f[1]]}convertToPdfPoint(O,A){return b.Util.applyInverseTransform([O,A],this.transform)}}a.PageViewport=c;class e extends b.BaseException{constructor(O,A=0){super(O,"RenderingCancelledException"),this.extraDelay=A}}a.RenderingCancelledException=e;function g(ct){const O=ct.length;let A=0;for(;A<O&&ct[A].trim()==="";)A++;return ct.substring(A,A+5).toLowerCase()==="data:"}function v(ct){return typeof ct=="string"&&/\.pdf$/i.test(ct)}function l(ct,O=!1){return O||([ct]=ct.split(/[#?]/,1)),ct.substring(ct.lastIndexOf("/")+1)}function w(ct,O="document.pdf"){if(typeof ct!="string")return O;if(g(ct))return(0,b.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),O;const A=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,p=A.exec(ct);let S=f.exec(p[1])||f.exec(p[2])||f.exec(p[3]);if(S&&(S=S[0],S.includes("%")))try{S=f.exec(decodeURIComponent(S))[0]}catch{}return S||O}class x{started=Object.create(null);times=[];time(O){O in this.started&&(0,b.warn)(`Timer is already running for ${O}`),this.started[O]=Date.now()}timeEnd(O){O in this.started||(0,b.warn)(`Timer has not been started for ${O}`),this.times.push({name:O,start:this.started[O],end:Date.now()}),delete this.started[O]}toString(){const O=[];let A=0;for(const{name:f}of this.times)A=Math.max(f.length,A);for(const{name:f,start:p,end:S}of this.times)O.push(`${f.padEnd(A)} ${S-p}ms
`);return O.join("")}}a.StatTimer=x;function k(ct,O){try{const{protocol:A}=O?new URL(ct,O):new URL(ct);return A==="http:"||A==="https:"}catch{return!1}}function m(ct){ct.preventDefault()}function C(ct,O=!1){return new Promise((A,f)=>{const p=document.createElement("script");p.src=ct,p.onload=function(S){O&&p.remove(),A(S)},p.onerror=function(){f(new Error(`Cannot load script at: ${p.src}`))},(document.head||document.documentElement).append(p)})}function z(ct){console.log("Deprecated API usage: "+ct)}let $;class H{static toDateObject(O){if(!O||typeof O!="string")return null;$||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const A=$.exec(O);if(!A)return null;const f=parseInt(A[1],10);let p=parseInt(A[2],10);p=p>=1&&p<=12?p-1:0;let S=parseInt(A[3],10);S=S>=1&&S<=31?S:1;let L=parseInt(A[4],10);L=L>=0&&L<=23?L:0;let F=parseInt(A[5],10);F=F>=0&&F<=59?F:0;let U=parseInt(A[6],10);U=U>=0&&U<=59?U:0;const T=A[7]||"Z";let s=parseInt(A[8],10);s=s>=0&&s<=23?s:0;let _=parseInt(A[9],10)||0;return _=_>=0&&_<=59?_:0,T==="-"?(L+=s,F+=_):T==="+"&&(L-=s,F-=_),new Date(Date.UTC(f,p,S,L,F,U))}}a.PDFDateString=H;function tt(ct,{scale:O=1,rotation:A=0}){const{width:f,height:p}=ct.attributes.style,S=[0,0,parseInt(f),parseInt(p)];return new c({viewBox:S,scale:O,rotation:A})}function nt(ct){if(ct.startsWith("#")){const O=parseInt(ct.slice(1),16);return[(O&16711680)>>16,(O&65280)>>8,O&255]}return ct.startsWith("rgb(")?ct.slice(4,-1).split(",").map(O=>parseInt(O)):ct.startsWith("rgba(")?ct.slice(5,-1).split(",").map(O=>parseInt(O)).slice(0,3):((0,b.warn)(`Not a valid color format: "${ct}"`),[0,0,0])}function yt(ct){const O=document.createElement("span");O.style.visibility="hidden",document.body.append(O);for(const A of ct.keys()){O.style.color=A;const f=window.getComputedStyle(O).color;ct.set(A,nt(f))}O.remove()}function dt(ct){const{a:O,b:A,c:f,d:p,e:S,f:L}=ct.getTransform();return[O,A,f,p,S,L]}function vt(ct){const{a:O,b:A,c:f,d:p,e:S,f:L}=ct.getTransform().invertSelf();return[O,A,f,p,S,L]}function Et(ct,O,A=!1,f=!0){if(O instanceof c){const{pageWidth:p,pageHeight:S}=O.rawDims,{style:L}=ct,F=b.FeatureTest.isCSSRoundSupported,U=`var(--scale-factor) * ${p}px`,T=`var(--scale-factor) * ${S}px`,s=F?`round(${U}, 1px)`:`calc(${U})`,_=F?`round(${T}, 1px)`:`calc(${T})`;!A||O.rotation%180===0?(L.width=s,L.height=_):(L.width=_,L.height=s)}f&&ct.setAttribute("data-main-rotation",O.rotation)}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseFilterFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var h=I(1);class b{constructor(){this.constructor===b&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addHighlightHCMFilter(t,i,u,c){return"none"}destroy(t=!1){}}a.BaseFilterFactory=b;class n{constructor(){this.constructor===n&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const u=this._createCanvas(t,i);return{canvas:u,context:u.getContext("2d")}}reset(t,i,u){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||u<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=u}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=n;class M{constructor({baseUrl:t=null,isCompressed:i=!0}){this.constructor===M&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":""),u=this.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE;return this._fetchData(i,u).catch(c=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}_fetchData(t,i){(0,h.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=M;class V{constructor({baseUrl:t=null}){this.constructor===V&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetchData(i).catch(u=>{throw new Error(`Unable to load font data at: ${i}`)})}_fetchData(t){(0,h.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=V;class q{constructor(){this.constructor===q&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,i,u=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const c=this._createSVG("svg:svg");return c.setAttribute("version","1.1"),u||(c.setAttribute("width",`${t}px`),c.setAttribute("height",`${i}px`)),c.setAttribute("preserveAspectRatio","none"),c.setAttribute("viewBox",`0 0 ${t} ${i}`),c}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,h.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=q}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MurmurHash3_64=void 0;var h=I(1);const b=3285377520,n=4294901760,M=65535;class V{constructor(r){this.h1=r?r&4294967295:b,this.h2=r?r&4294967295:b}update(r){let t,i;if(typeof r=="string"){t=new Uint8Array(r.length*2),i=0;for(let z=0,$=r.length;z<$;z++){const H=r.charCodeAt(z);H<=255?t[i++]=H:(t[i++]=H>>>8,t[i++]=H&255)}}else if((0,h.isArrayBuffer)(r))t=r.slice(),i=t.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const u=i>>2,c=i-u*4,e=new Uint32Array(t.buffer,0,u);let g=0,v=0,l=this.h1,w=this.h2;const x=3432918353,k=461845907,m=x&M,C=k&M;for(let z=0;z<u;z++)z&1?(g=e[z],g=g*x&n|g*m&M,g=g<<15|g>>>17,g=g*k&n|g*C&M,l^=g,l=l<<13|l>>>19,l=l*5+3864292196):(v=e[z],v=v*x&n|v*m&M,v=v<<15|v>>>17,v=v*k&n|v*C&M,w^=v,w=w<<13|w>>>19,w=w*5+3864292196);switch(g=0,c){case 3:g^=t[u*4+2]<<16;case 2:g^=t[u*4+1]<<8;case 1:g^=t[u*4],g=g*x&n|g*m&M,g=g<<15|g>>>17,g=g*k&n|g*C&M,u&1?l^=g:w^=g}this.h1=l,this.h2=w}hexdigest(){let r=this.h1,t=this.h2;return r^=t>>>1,r=r*3981806797&n|r*36045&M,t=t*4283543511&n|((t<<16|r>>>16)*2950163797&n)>>>16,r^=t>>>1,r=r*444984403&n|r*60499&M,t=t*3301882366&n|((t<<16|r>>>16)*3120437893&n)>>>16,r^=t>>>1,(r>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}a.MurmurHash3_64=V}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var h=I(1);class b{#t=new Set;constructor({ownerDocument:V=globalThis.document,styleElement:q=null}){this._document=V,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(V){this.nativeFontFaces.add(V),this._document.fonts.add(V)}removeNativeFontFace(V){this.nativeFontFaces.delete(V),this._document.fonts.delete(V)}insertRule(V){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const q=this.styleElement.sheet;q.insertRule(V,q.cssRules.length)}clear(){for(const V of this.nativeFontFaces)this._document.fonts.delete(V);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(V){if(!(!V||this.#t.has(V.loadedName))){if((0,h.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:q,src:r,style:t}=V,i=new FontFace(q,r,t);this.addNativeFontFace(i);try{await i.load(),this.#t.add(q)}catch{(0,h.warn)(`Cannot load system font: ${V.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(i)}return}(0,h.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(V){if(V.attached||V.missingFile&&!V.systemFontInfo)return;if(V.attached=!0,V.systemFontInfo){await this.loadSystemFont(V.systemFontInfo);return}if(this.isFontLoadingAPISupported){const r=V.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(t){throw(0,h.warn)(`Failed to load font '${r.family}': '${t}'.`),V.disableFontFace=!0,t}}return}const q=V.createFontFaceRule();if(q){if(this.insertRule(q),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const t=this._queueLoadingCallback(r);this._prepareFontLoadEvent(V,t)})}}get isFontLoadingAPISupported(){const V=!!this._document?.fonts;return(0,h.shadow)(this,"isFontLoadingAPISupported",V)}get isSyncFontLoadingSupported(){let V=!1;return(h.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(V=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",V)}_queueLoadingCallback(V){function q(){for((0,h.assert)(!t.done,"completeRequest() cannot be called twice."),t.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,t={done:!1,complete:q,callback:V};return r.push(t),t}get _loadTestFont(){const V=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",V)}_prepareFontLoadEvent(V,q){function r(tt,nt){return tt.charCodeAt(nt)<<24|tt.charCodeAt(nt+1)<<16|tt.charCodeAt(nt+2)<<8|tt.charCodeAt(nt+3)&255}function t(tt,nt,yt,dt){const vt=tt.substring(0,nt),Et=tt.substring(nt+yt);return vt+dt+Et}let i,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const e=c.getContext("2d");let g=0;function v(tt,nt){if(++g>30){(0,h.warn)("Load test font never loaded."),nt();return}if(e.font="30px "+tt,e.fillText(".",0,20),e.getImageData(0,0,1,1).data[3]>0){nt();return}setTimeout(v.bind(null,tt,nt))}const l=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=t(w,976,l.length,l);const k=16,m=1482184792;let C=r(w,k);for(i=0,u=l.length-3;i<u;i+=4)C=C-m+r(l,i)|0;i<l.length&&(C=C-m+r(l+"XXX",i)|0),w=t(w,k,4,(0,h.string32)(C));const z=`url(data:font/opentype;base64,${btoa(w)});`,$=`@font-face {font-family:"${l}";src:${z}}`;this.insertRule($);const H=this._document.createElement("div");H.style.visibility="hidden",H.style.width=H.style.height="10px",H.style.position="absolute",H.style.top=H.style.left="0px";for(const tt of[V.loadedName,l]){const nt=this._document.createElement("span");nt.textContent="Hi",nt.style.fontFamily=tt,H.append(nt)}this._document.body.append(H),v(l,()=>{H.remove(),q.complete()})}}a.FontLoader=b;class n{constructor(V,{isEvalSupported:q=!0,disableFontFace:r=!1,ignoreErrors:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const u in V)this[u]=V[u];this.isEvalSupported=q!==!1,this.disableFontFace=r===!0,this.ignoreErrors=t===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let V;if(!this.cssFontInfo)V=new FontFace(this.loadedName,this.data,{});else{const q={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(q.style=`oblique ${this.cssFontInfo.italicAngle}deg`),V=new FontFace(this.cssFontInfo.fontFamily,this.data,q)}return this._inspectFont?.(this),V}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const V=(0,h.bytesToString)(this.data),q=`url(data:${this.mimetype};base64,${btoa(V)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${q}}`;else{let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${q}}`}return this._inspectFont?.(this,q),r}getPathGenerator(V,q){if(this.compiledGlyphs[q]!==void 0)return this.compiledGlyphs[q];let r;try{r=V.get(this.loadedName+"_path_"+q)}catch(t){if(!this.ignoreErrors)throw t;return(0,h.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[q]=function(i,u){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const t=[];for(const i of r){const u=i.args!==void 0?i.args.join(","):"";t.push("c.",i.cmd,"(",u,`);
`)}return this.compiledGlyphs[q]=new Function("c","size",t.join(""))}return this.compiledGlyphs[q]=function(t,i){for(const u of r)u.cmd==="scale"&&(u.args=[i,-i]),t[u.cmd].apply(t,u.args)}}}a.FontFaceObject=n}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeFilterFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var h=I(7);I(1);const b=function(r){return new Promise((t,i)=>{require$$5.readFile(r,(c,e)=>{if(c||!e){i(new Error(c));return}t(new Uint8Array(e))})})};class n extends h.BaseFilterFactory{}a.NodeFilterFactory=n;class M extends h.BaseCanvasFactory{_createCanvas(t,i){return require$$5.createCanvas(t,i)}}a.NodeCanvasFactory=M;class V extends h.BaseCMapReaderFactory{_fetchData(t,i){return b(t).then(u=>({cMapData:u,compressionType:i}))}}a.NodeCMapReaderFactory=V;class q extends h.BaseStandardFontDataFactory{_fetchData(t){return b(t)}}a.NodeStandardFontDataFactory=q}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var h=I(1),b=I(6),n=I(12),M=I(13);const V=16,q=100,r=4096,t=15,i=10,u=1e3,c=16;function e(A,f){if(A._removeMirroring)throw new Error("Context is already forwarding operations.");A.__originalSave=A.save,A.__originalRestore=A.restore,A.__originalRotate=A.rotate,A.__originalScale=A.scale,A.__originalTranslate=A.translate,A.__originalTransform=A.transform,A.__originalSetTransform=A.setTransform,A.__originalResetTransform=A.resetTransform,A.__originalClip=A.clip,A.__originalMoveTo=A.moveTo,A.__originalLineTo=A.lineTo,A.__originalBezierCurveTo=A.bezierCurveTo,A.__originalRect=A.rect,A.__originalClosePath=A.closePath,A.__originalBeginPath=A.beginPath,A._removeMirroring=()=>{A.save=A.__originalSave,A.restore=A.__originalRestore,A.rotate=A.__originalRotate,A.scale=A.__originalScale,A.translate=A.__originalTranslate,A.transform=A.__originalTransform,A.setTransform=A.__originalSetTransform,A.resetTransform=A.__originalResetTransform,A.clip=A.__originalClip,A.moveTo=A.__originalMoveTo,A.lineTo=A.__originalLineTo,A.bezierCurveTo=A.__originalBezierCurveTo,A.rect=A.__originalRect,A.closePath=A.__originalClosePath,A.beginPath=A.__originalBeginPath,delete A._removeMirroring},A.save=function(){f.save(),this.__originalSave()},A.restore=function(){f.restore(),this.__originalRestore()},A.translate=function(S,L){f.translate(S,L),this.__originalTranslate(S,L)},A.scale=function(S,L){f.scale(S,L),this.__originalScale(S,L)},A.transform=function(S,L,F,U,T,s){f.transform(S,L,F,U,T,s),this.__originalTransform(S,L,F,U,T,s)},A.setTransform=function(S,L,F,U,T,s){f.setTransform(S,L,F,U,T,s),this.__originalSetTransform(S,L,F,U,T,s)},A.resetTransform=function(){f.resetTransform(),this.__originalResetTransform()},A.rotate=function(S){f.rotate(S),this.__originalRotate(S)},A.clip=function(S){f.clip(S),this.__originalClip(S)},A.moveTo=function(p,S){f.moveTo(p,S),this.__originalMoveTo(p,S)},A.lineTo=function(p,S){f.lineTo(p,S),this.__originalLineTo(p,S)},A.bezierCurveTo=function(p,S,L,F,U,T){f.bezierCurveTo(p,S,L,F,U,T),this.__originalBezierCurveTo(p,S,L,F,U,T)},A.rect=function(p,S,L,F){f.rect(p,S,L,F),this.__originalRect(p,S,L,F)},A.closePath=function(){f.closePath(),this.__originalClosePath()},A.beginPath=function(){f.beginPath(),this.__originalBeginPath()}}class g{constructor(f){this.canvasFactory=f,this.cache=Object.create(null)}getCanvas(f,p,S){let L;return this.cache[f]!==void 0?(L=this.cache[f],this.canvasFactory.reset(L,p,S)):(L=this.canvasFactory.create(p,S),this.cache[f]=L),L}delete(f){delete this.cache[f]}clear(){for(const f in this.cache){const p=this.cache[f];this.canvasFactory.destroy(p),delete this.cache[f]}}}function v(A,f,p,S,L,F,U,T,s,_){const[E,P,R,j,X,it]=(0,b.getCurrentTransform)(A);if(P===0&&R===0){const st=U*E+X,ht=Math.round(st),ut=T*j+it,gt=Math.round(ut),Ct=(U+s)*E+X,Lt=Math.abs(Math.round(Ct)-ht)||1,Bt=(T+_)*j+it,Xt=Math.abs(Math.round(Bt)-gt)||1;return A.setTransform(Math.sign(E),0,0,Math.sign(j),ht,gt),A.drawImage(f,p,S,L,F,0,0,Lt,Xt),A.setTransform(E,P,R,j,X,it),[Lt,Xt]}if(E===0&&j===0){const st=T*R+X,ht=Math.round(st),ut=U*P+it,gt=Math.round(ut),Ct=(T+_)*R+X,Lt=Math.abs(Math.round(Ct)-ht)||1,Bt=(U+s)*P+it,Xt=Math.abs(Math.round(Bt)-gt)||1;return A.setTransform(0,Math.sign(P),Math.sign(R),0,ht,gt),A.drawImage(f,p,S,L,F,0,0,Xt,Lt),A.setTransform(E,P,R,j,X,it),[Xt,Lt]}A.drawImage(f,p,S,L,F,U,T,s,_);const At=Math.hypot(E,P),rt=Math.hypot(R,j);return[At*s,rt*_]}function l(A){const{width:f,height:p}=A;if(f>u||p>u)return null;const S=1e3,L=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),F=f+1;let U=new Uint8Array(F*(p+1)),T,s,_;const E=f+7&-8;let P=new Uint8Array(E*p),R=0;for(const rt of A.data){let st=128;for(;st>0;)P[R++]=rt&st?0:255,st>>=1}let j=0;for(R=0,P[R]!==0&&(U[0]=1,++j),s=1;s<f;s++)P[R]!==P[R+1]&&(U[s]=P[R]?2:1,++j),R++;for(P[R]!==0&&(U[s]=2,++j),T=1;T<p;T++){R=T*E,_=T*F,P[R-E]!==P[R]&&(U[_]=P[R]?1:8,++j);let rt=(P[R]?4:0)+(P[R-E]?8:0);for(s=1;s<f;s++)rt=(rt>>2)+(P[R+1]?4:0)+(P[R-E+1]?8:0),L[rt]&&(U[_+s]=L[rt],++j),R++;if(P[R-E]!==P[R]&&(U[_+s]=P[R]?2:4,++j),j>S)return null}for(R=E*(p-1),_=T*F,P[R]!==0&&(U[_]=8,++j),s=1;s<f;s++)P[R]!==P[R+1]&&(U[_+s]=P[R]?4:8,++j),R++;if(P[R]!==0&&(U[_+s]=4,++j),j>S)return null;const X=new Int32Array([0,F,-1,0,-F,0,0,0,1]),it=new Path2D;for(T=0;j&&T<=p;T++){let rt=T*F;const st=rt+f;for(;rt<st&&!U[rt];)rt++;if(rt===st)continue;it.moveTo(rt%F,T);const ht=rt;let ut=U[rt];do{const gt=X[ut];do rt+=gt;while(!U[rt]);const Ct=U[rt];Ct!==5&&Ct!==10?(ut=Ct,U[rt]=0):(ut=Ct&51*ut>>4,U[rt]&=ut>>2|ut<<2),it.lineTo(rt%F,rt/F|0),U[rt]||--j}while(ht!==rt);--T}return P=null,U=null,function(rt){rt.save(),rt.scale(1/f,-1/p),rt.translate(0,-p),rt.fill(it),rt.beginPath(),rt.restore()}}class w{constructor(f,p){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,f,p])}clone(){const f=Object.create(this);return f.clipBox=this.clipBox.slice(),f}setCurrentPoint(f,p){this.x=f,this.y=p}updatePathMinMax(f,p,S){[p,S]=h.Util.applyTransform([p,S],f),this.minX=Math.min(this.minX,p),this.minY=Math.min(this.minY,S),this.maxX=Math.max(this.maxX,p),this.maxY=Math.max(this.maxY,S)}updateRectMinMax(f,p){const S=h.Util.applyTransform(p,f),L=h.Util.applyTransform(p.slice(2),f);this.minX=Math.min(this.minX,S[0],L[0]),this.minY=Math.min(this.minY,S[1],L[1]),this.maxX=Math.max(this.maxX,S[0],L[0]),this.maxY=Math.max(this.maxY,S[1],L[1])}updateScalingPathMinMax(f,p){h.Util.scaleMinMax(f,p),this.minX=Math.min(this.minX,p[0]),this.maxX=Math.max(this.maxX,p[1]),this.minY=Math.min(this.minY,p[2]),this.maxY=Math.max(this.maxY,p[3])}updateCurvePathMinMax(f,p,S,L,F,U,T,s,_,E){const P=h.Util.bezierBoundingBox(p,S,L,F,U,T,s,_);if(E){E[0]=Math.min(E[0],P[0],P[2]),E[1]=Math.max(E[1],P[0],P[2]),E[2]=Math.min(E[2],P[1],P[3]),E[3]=Math.max(E[3],P[1],P[3]);return}this.updateRectMinMax(f,P)}getPathBoundingBox(f=n.PathType.FILL,p=null){const S=[this.minX,this.minY,this.maxX,this.maxY];if(f===n.PathType.STROKE){p||(0,h.unreachable)("Stroke bounding box must include transform.");const L=h.Util.singularValueDecompose2dScale(p),F=L[0]*this.lineWidth/2,U=L[1]*this.lineWidth/2;S[0]-=F,S[1]-=U,S[2]+=F,S[3]+=U}return S}updateClipFromPath(){const f=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(f||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(f){this.clipBox=f,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(f=n.PathType.FILL,p=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(f,p))}}function x(A,f){if(typeof ImageData<"u"&&f instanceof ImageData){A.putImageData(f,0,0);return}const p=f.height,S=f.width,L=p%c,F=(p-L)/c,U=L===0?F:F+1,T=A.createImageData(S,c);let s=0,_;const E=f.data,P=T.data;let R,j,X,it;if(f.kind===h.ImageKind.GRAYSCALE_1BPP){const At=E.byteLength,rt=new Uint32Array(P.buffer,0,P.byteLength>>2),st=rt.length,ht=S+7>>3,ut=4294967295,gt=h.FeatureTest.isLittleEndian?4278190080:255;for(R=0;R<U;R++){for(X=R<F?c:L,_=0,j=0;j<X;j++){const Ct=At-s;let Lt=0;const Bt=Ct>ht?S:Ct*8-7,Xt=Bt&-8;let $t=0,ne=0;for(;Lt<Xt;Lt+=8)ne=E[s++],rt[_++]=ne&128?ut:gt,rt[_++]=ne&64?ut:gt,rt[_++]=ne&32?ut:gt,rt[_++]=ne&16?ut:gt,rt[_++]=ne&8?ut:gt,rt[_++]=ne&4?ut:gt,rt[_++]=ne&2?ut:gt,rt[_++]=ne&1?ut:gt;for(;Lt<Bt;Lt++)$t===0&&(ne=E[s++],$t=128),rt[_++]=ne&$t?ut:gt,$t>>=1}for(;_<st;)rt[_++]=0;A.putImageData(T,0,R*c)}}else if(f.kind===h.ImageKind.RGBA_32BPP){for(j=0,it=S*c*4,R=0;R<F;R++)P.set(E.subarray(s,s+it)),s+=it,A.putImageData(T,0,j),j+=c;R<U&&(it=S*L*4,P.set(E.subarray(s,s+it)),A.putImageData(T,0,j))}else if(f.kind===h.ImageKind.RGB_24BPP)for(X=c,it=S*X,R=0;R<U;R++){for(R>=F&&(X=L,it=S*X),_=0,j=it;j--;)P[_++]=E[s++],P[_++]=E[s++],P[_++]=E[s++],P[_++]=255;A.putImageData(T,0,R*c)}else throw new Error(`bad image kind: ${f.kind}`)}function k(A,f){if(f.bitmap){A.drawImage(f.bitmap,0,0);return}const p=f.height,S=f.width,L=p%c,F=(p-L)/c,U=L===0?F:F+1,T=A.createImageData(S,c);let s=0;const _=f.data,E=T.data;for(let P=0;P<U;P++){const R=P<F?c:L;({srcPos:s}=(0,M.convertBlackAndWhiteToRGBA)({src:_,srcPos:s,dest:E,width:S,height:R,nonBlackColor:0})),A.putImageData(T,0,P*c)}}function m(A,f){const p=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const S of p)A[S]!==void 0&&(f[S]=A[S]);A.setLineDash!==void 0&&(f.setLineDash(A.getLineDash()),f.lineDashOffset=A.lineDashOffset)}function C(A){if(A.strokeStyle=A.fillStyle="#000000",A.fillRule="nonzero",A.globalAlpha=1,A.lineWidth=1,A.lineCap="butt",A.lineJoin="miter",A.miterLimit=10,A.globalCompositeOperation="source-over",A.font="10px sans-serif",A.setLineDash!==void 0&&(A.setLineDash([]),A.lineDashOffset=0),!h.isNodeJS){const{filter:f}=A;f!=="none"&&f!==""&&(A.filter="none")}}function z(A,f,p,S){const L=A.length;for(let F=3;F<L;F+=4){const U=A[F];if(U===0)A[F-3]=f,A[F-2]=p,A[F-1]=S;else if(U<255){const T=255-U;A[F-3]=A[F-3]*U+f*T>>8,A[F-2]=A[F-2]*U+p*T>>8,A[F-1]=A[F-1]*U+S*T>>8}}}function $(A,f,p){const S=A.length,L=1/255;for(let F=3;F<S;F+=4){const U=p?p[A[F]]:A[F];f[F]=f[F]*U*L|0}}function H(A,f,p){const S=A.length;for(let L=3;L<S;L+=4){const F=A[L-3]*77+A[L-2]*152+A[L-1]*28;f[L]=p?f[L]*p[F>>8]>>8:f[L]*F>>16}}function tt(A,f,p,S,L,F,U,T,s,_,E){const P=!!F,R=P?F[0]:0,j=P?F[1]:0,X=P?F[2]:0,it=L==="Luminosity"?H:$,rt=Math.min(S,Math.ceil(1048576/p));for(let st=0;st<S;st+=rt){const ht=Math.min(rt,S-st),ut=A.getImageData(T-_,st+(s-E),p,ht),gt=f.getImageData(T,st+s,p,ht);P&&z(ut.data,R,j,X),it(ut.data,gt.data,U),f.putImageData(gt,T,st+s)}}function nt(A,f,p,S){const L=S[0],F=S[1],U=S[2]-L,T=S[3]-F;U===0||T===0||(tt(f.context,p,U,T,f.subtype,f.backdrop,f.transferMap,L,F,f.offsetX,f.offsetY),A.save(),A.globalAlpha=1,A.globalCompositeOperation="source-over",A.setTransform(1,0,0,1,0,0),A.drawImage(p.canvas,0,0),A.restore())}function yt(A,f){const p=h.Util.singularValueDecompose2dScale(A);p[0]=Math.fround(p[0]),p[1]=Math.fround(p[1]);const S=Math.fround((globalThis.devicePixelRatio||1)*b.PixelsPerInch.PDF_TO_CSS_UNITS);return f!==void 0?f:p[0]<=S||p[1]<=S}const dt=["butt","round","square"],vt=["miter","round","bevel"],Et={},ct={};class O{constructor(f,p,S,L,F,{optionalContentConfig:U,markedContentStack:T=null},s,_){this.ctx=f,this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=p,this.objs=S,this.canvasFactory=L,this.filterFactory=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=T||[],this.optionalContentConfig=U,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=_,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(f,p=null){return typeof f=="string"?f.startsWith("g_")?this.commonObjs.get(f):this.objs.get(f):p}beginDrawing({transform:f,viewport:p,transparency:S=!1,background:L=null}){const F=this.ctx.canvas.width,U=this.ctx.canvas.height,T=this.ctx.fillStyle;if(this.ctx.fillStyle=L||"#ffffff",this.ctx.fillRect(0,0,F,U),this.ctx.fillStyle=T,S){const s=this.cachedCanvases.getCanvas("transparent",F,U);this.compositeCtx=this.ctx,this.transparentCanvas=s.canvas,this.ctx=s.context,this.ctx.save(),this.ctx.transform(...(0,b.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),f&&(this.ctx.transform(...f),this.outputScaleX=f[0],this.outputScaleY=f[0]),this.ctx.transform(...p.transform),this.viewportScale=p.scale,this.baseTransform=(0,b.getCurrentTransform)(this.ctx)}executeOperatorList(f,p,S,L){const F=f.argsArray,U=f.fnArray;let T=p||0;const s=F.length;if(s===T)return T;const _=s-T>i&&typeof S=="function",E=_?Date.now()+t:0;let P=0;const R=this.commonObjs,j=this.objs;let X;for(;;){if(L!==void 0&&T===L.nextBreakPoint)return L.breakIt(T,S),T;if(X=U[T],X!==h.OPS.dependency)this[X].apply(this,F[T]);else for(const it of F[T]){const At=it.startsWith("g_")?R:j;if(!At.has(it))return At.get(it,S),T}if(T++,T===s)return T;if(_&&++P>i){if(Date.now()>E)return S(),T;P=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const f of this._cachedBitmapsMap.values()){for(const p of f.values())typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement&&(p.width=p.height=0);f.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const f=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(f!=="none"){const p=this.ctx.filter;this.ctx.filter=f,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=p}}}_scaleImage(f,p){const S=f.width,L=f.height;let F=Math.max(Math.hypot(p[0],p[1]),1),U=Math.max(Math.hypot(p[2],p[3]),1),T=S,s=L,_="prescale1",E,P;for(;F>2&&T>1||U>2&&s>1;){let R=T,j=s;F>2&&T>1&&(R=T>=16384?Math.floor(T/2)-1||1:Math.ceil(T/2),F/=T/R),U>2&&s>1&&(j=s>=16384?Math.floor(s/2)-1||1:Math.ceil(s)/2,U/=s/j),E=this.cachedCanvases.getCanvas(_,R,j),P=E.context,P.clearRect(0,0,R,j),P.drawImage(f,0,0,T,s,0,0,R,j),f=E.canvas,T=R,s=j,_=_==="prescale1"?"prescale2":"prescale1"}return{img:f,paintWidth:T,paintHeight:s}}_createMaskCanvas(f){const p=this.ctx,{width:S,height:L}=f,F=this.current.fillColor,U=this.current.patternFill,T=(0,b.getCurrentTransform)(p);let s,_,E,P;if((f.bitmap||f.data)&&f.count>1){const Lt=f.bitmap||f.data.buffer;_=JSON.stringify(U?T:[T.slice(0,4),F]),s=this._cachedBitmapsMap.get(Lt),s||(s=new Map,this._cachedBitmapsMap.set(Lt,s));const Bt=s.get(_);if(Bt&&!U){const Xt=Math.round(Math.min(T[0],T[2])+T[4]),$t=Math.round(Math.min(T[1],T[3])+T[5]);return{canvas:Bt,offsetX:Xt,offsetY:$t}}E=Bt}E||(P=this.cachedCanvases.getCanvas("maskCanvas",S,L),k(P.context,f));let R=h.Util.transform(T,[1/S,0,0,-1/L,0,0]);R=h.Util.transform(R,[1,0,0,1,0,-L]);const j=h.Util.applyTransform([0,0],R),X=h.Util.applyTransform([S,L],R),it=h.Util.normalizeRect([j[0],j[1],X[0],X[1]]),At=Math.round(it[2]-it[0])||1,rt=Math.round(it[3]-it[1])||1,st=this.cachedCanvases.getCanvas("fillCanvas",At,rt),ht=st.context,ut=Math.min(j[0],X[0]),gt=Math.min(j[1],X[1]);ht.translate(-ut,-gt),ht.transform(...R),E||(E=this._scaleImage(P.canvas,(0,b.getCurrentTransformInverse)(ht)),E=E.img,s&&U&&s.set(_,E)),ht.imageSmoothingEnabled=yt((0,b.getCurrentTransform)(ht),f.interpolate),v(ht,E,0,0,E.width,E.height,0,0,S,L),ht.globalCompositeOperation="source-in";const Ct=h.Util.transform((0,b.getCurrentTransformInverse)(ht),[1,0,0,1,-ut,-gt]);return ht.fillStyle=U?F.getPattern(p,this,Ct,n.PathType.FILL):F,ht.fillRect(0,0,S,L),s&&!U&&(this.cachedCanvases.delete("fillCanvas"),s.set(_,st.canvas)),{canvas:st.canvas,offsetX:Math.round(ut),offsetY:Math.round(gt)}}setLineWidth(f){f!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=f,this.ctx.lineWidth=f}setLineCap(f){this.ctx.lineCap=dt[f]}setLineJoin(f){this.ctx.lineJoin=vt[f]}setMiterLimit(f){this.ctx.miterLimit=f}setDash(f,p){const S=this.ctx;S.setLineDash!==void 0&&(S.setLineDash(f),S.lineDashOffset=p)}setRenderingIntent(f){}setFlatness(f){}setGState(f){for(const[p,S]of f)switch(p){case"LW":this.setLineWidth(S);break;case"LC":this.setLineCap(S);break;case"LJ":this.setLineJoin(S);break;case"ML":this.setMiterLimit(S);break;case"D":this.setDash(S[0],S[1]);break;case"RI":this.setRenderingIntent(S);break;case"FL":this.setFlatness(S);break;case"Font":this.setFont(S[0],S[1]);break;case"CA":this.current.strokeAlpha=S;break;case"ca":this.current.fillAlpha=S,this.ctx.globalAlpha=S;break;case"BM":this.ctx.globalCompositeOperation=S;break;case"SMask":this.current.activeSMask=S?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(S);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const f=this.inSMaskMode;this.current.activeSMask&&!f?this.beginSMaskMode():!this.current.activeSMask&&f&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const f=this.ctx.canvas.width,p=this.ctx.canvas.height,S="smaskGroupAt"+this.groupLevel,L=this.cachedCanvases.getCanvas(S,f,p);this.suspendedCtx=this.ctx,this.ctx=L.context;const F=this.ctx;F.setTransform(...(0,b.getCurrentTransform)(this.suspendedCtx)),m(this.suspendedCtx,F),e(F,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(f){if(!this.current.activeSMask)return;f?(f[0]=Math.floor(f[0]),f[1]=Math.floor(f[1]),f[2]=Math.ceil(f[2]),f[3]=Math.ceil(f[3])):f=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const p=this.current.activeSMask,S=this.suspendedCtx;nt(S,p,this.ctx,f),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const f=this.current;this.stateStack.push(f),this.current=f.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(f,p,S,L,F,U){this.ctx.transform(f,p,S,L,F,U),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(f,p,S){const L=this.ctx,F=this.current;let U=F.x,T=F.y,s,_;const E=(0,b.getCurrentTransform)(L),P=E[0]===0&&E[3]===0||E[1]===0&&E[2]===0,R=P?S.slice(0):null;for(let j=0,X=0,it=f.length;j<it;j++)switch(f[j]|0){case h.OPS.rectangle:U=p[X++],T=p[X++];const At=p[X++],rt=p[X++],st=U+At,ht=T+rt;L.moveTo(U,T),At===0||rt===0?L.lineTo(st,ht):(L.lineTo(st,T),L.lineTo(st,ht),L.lineTo(U,ht)),P||F.updateRectMinMax(E,[U,T,st,ht]),L.closePath();break;case h.OPS.moveTo:U=p[X++],T=p[X++],L.moveTo(U,T),P||F.updatePathMinMax(E,U,T);break;case h.OPS.lineTo:U=p[X++],T=p[X++],L.lineTo(U,T),P||F.updatePathMinMax(E,U,T);break;case h.OPS.curveTo:s=U,_=T,U=p[X+4],T=p[X+5],L.bezierCurveTo(p[X],p[X+1],p[X+2],p[X+3],U,T),F.updateCurvePathMinMax(E,s,_,p[X],p[X+1],p[X+2],p[X+3],U,T,R),X+=6;break;case h.OPS.curveTo2:s=U,_=T,L.bezierCurveTo(U,T,p[X],p[X+1],p[X+2],p[X+3]),F.updateCurvePathMinMax(E,s,_,U,T,p[X],p[X+1],p[X+2],p[X+3],R),U=p[X+2],T=p[X+3],X+=4;break;case h.OPS.curveTo3:s=U,_=T,U=p[X+2],T=p[X+3],L.bezierCurveTo(p[X],p[X+1],U,T,U,T),F.updateCurvePathMinMax(E,s,_,p[X],p[X+1],U,T,U,T,R),X+=4;break;case h.OPS.closePath:L.closePath();break}P&&F.updateScalingPathMinMax(E,R),F.setCurrentPoint(U,T)}closePath(){this.ctx.closePath()}stroke(f=!0){const p=this.ctx,S=this.current.strokeColor;p.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof S=="object"&&S?.getPattern?(p.save(),p.strokeStyle=S.getPattern(p,this,(0,b.getCurrentTransformInverse)(p),n.PathType.STROKE),this.rescaleAndStroke(!1),p.restore()):this.rescaleAndStroke(!0)),f&&this.consumePath(this.current.getClippedPathBoundingBox()),p.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(f=!0){const p=this.ctx,S=this.current.fillColor,L=this.current.patternFill;let F=!1;L&&(p.save(),p.fillStyle=S.getPattern(p,this,(0,b.getCurrentTransformInverse)(p),n.PathType.FILL),F=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&U!==null&&(this.pendingEOFill?(p.fill("evenodd"),this.pendingEOFill=!1):p.fill()),F&&p.restore(),f&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Et}eoClip(){this.pendingClip=ct}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const f=this.pendingTextPaths,p=this.ctx;if(f===void 0){p.beginPath();return}p.save(),p.beginPath();for(const S of f)p.setTransform(...S.transform),p.translate(S.x,S.y),S.addToPath(p,S.fontSize);p.restore(),p.clip(),p.beginPath(),delete this.pendingTextPaths}setCharSpacing(f){this.current.charSpacing=f}setWordSpacing(f){this.current.wordSpacing=f}setHScale(f){this.current.textHScale=f/100}setLeading(f){this.current.leading=-f}setFont(f,p){const S=this.commonObjs.get(f),L=this.current;if(!S)throw new Error(`Can't find font for ${f}`);if(L.fontMatrix=S.fontMatrix||h.FONT_IDENTITY_MATRIX,(L.fontMatrix[0]===0||L.fontMatrix[3]===0)&&(0,h.warn)("Invalid font matrix for font "+f),p<0?(p=-p,L.fontDirection=-1):L.fontDirection=1,this.current.font=S,this.current.fontSize=p,S.isType3Font)return;const F=S.loadedName||"sans-serif",U=S.systemFontInfo?.css||`"${F}", ${S.fallbackName}`;let T="normal";S.black?T="900":S.bold&&(T="bold");const s=S.italic?"italic":"normal";let _=p;p<V?_=V:p>q&&(_=q),this.current.fontSizeScale=p/_,this.ctx.font=`${s} ${T} ${_}px ${U}`}setTextRenderingMode(f){this.current.textRenderingMode=f}setTextRise(f){this.current.textRise=f}moveText(f,p){this.current.x=this.current.lineX+=f,this.current.y=this.current.lineY+=p}setLeadingMoveText(f,p){this.setLeading(-p),this.moveText(f,p)}setTextMatrix(f,p,S,L,F,U){this.current.textMatrix=[f,p,S,L,F,U],this.current.textMatrixScale=Math.hypot(f,p),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(f,p,S,L){const F=this.ctx,U=this.current,T=U.font,s=U.textRenderingMode,_=U.fontSize/U.fontSizeScale,E=s&h.TextRenderingMode.FILL_STROKE_MASK,P=!!(s&h.TextRenderingMode.ADD_TO_PATH_FLAG),R=U.patternFill&&!T.missingFile;let j;(T.disableFontFace||P||R)&&(j=T.getPathGenerator(this.commonObjs,f)),T.disableFontFace||R?(F.save(),F.translate(p,S),F.beginPath(),j(F,_),L&&F.setTransform(...L),(E===h.TextRenderingMode.FILL||E===h.TextRenderingMode.FILL_STROKE)&&F.fill(),(E===h.TextRenderingMode.STROKE||E===h.TextRenderingMode.FILL_STROKE)&&F.stroke(),F.restore()):((E===h.TextRenderingMode.FILL||E===h.TextRenderingMode.FILL_STROKE)&&F.fillText(f,p,S),(E===h.TextRenderingMode.STROKE||E===h.TextRenderingMode.FILL_STROKE)&&F.strokeText(f,p,S)),P&&(this.pendingTextPaths||=[]).push({transform:(0,b.getCurrentTransform)(F),x:p,y:S,fontSize:_,addToPath:j})}get isFontSubpixelAAEnabled(){const{context:f}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);f.scale(1.5,1),f.fillText("I",0,10);const p=f.getImageData(0,0,10,10).data;let S=!1;for(let L=3;L<p.length;L+=4)if(p[L]>0&&p[L]<255){S=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",S)}showText(f){const p=this.current,S=p.font;if(S.isType3Font)return this.showType3Text(f);const L=p.fontSize;if(L===0)return;const F=this.ctx,U=p.fontSizeScale,T=p.charSpacing,s=p.wordSpacing,_=p.fontDirection,E=p.textHScale*_,P=f.length,R=S.vertical,j=R?1:-1,X=S.defaultVMetrics,it=L*p.fontMatrix[0],At=p.textRenderingMode===h.TextRenderingMode.FILL&&!S.disableFontFace&&!p.patternFill;F.save(),F.transform(...p.textMatrix),F.translate(p.x,p.y+p.textRise),_>0?F.scale(E,-1):F.scale(E,1);let rt;if(p.patternFill){F.save();const Ct=p.fillColor.getPattern(F,this,(0,b.getCurrentTransformInverse)(F),n.PathType.FILL);rt=(0,b.getCurrentTransform)(F),F.restore(),F.fillStyle=Ct}let st=p.lineWidth;const ht=p.textMatrixScale;if(ht===0||st===0){const Ct=p.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(Ct===h.TextRenderingMode.STROKE||Ct===h.TextRenderingMode.FILL_STROKE)&&(st=this.getSinglePixelWidth())}else st/=ht;if(U!==1&&(F.scale(U,U),st/=U),F.lineWidth=st,S.isInvalidPDFjsFont){const Ct=[];let Lt=0;for(const Bt of f)Ct.push(Bt.unicode),Lt+=Bt.width;F.fillText(Ct.join(""),0,0),p.x+=Lt*it*E,F.restore(),this.compose();return}let ut=0,gt;for(gt=0;gt<P;++gt){const Ct=f[gt];if(typeof Ct=="number"){ut+=j*Ct*L/1e3;continue}let Lt=!1;const Bt=(Ct.isSpace?s:0)+T,Xt=Ct.fontChar,$t=Ct.accent;let ne,Me,Ae=Ct.width;if(R){const Pe=Ct.vmetric||X,Oe=-(Ct.vmetric?Pe[1]:Ae*.5)*it,qe=Pe[2]*it;Ae=Pe?-Pe[0]:Ae,ne=Oe/U,Me=(ut+qe)/U}else ne=ut/U,Me=0;if(S.remeasure&&Ae>0){const Pe=F.measureText(Xt).width*1e3/L*U;if(Ae<Pe&&this.isFontSubpixelAAEnabled){const Oe=Ae/Pe;Lt=!0,F.save(),F.scale(Oe,1),ne/=Oe}else Ae!==Pe&&(ne+=(Ae-Pe)/2e3*L/U)}if(this.contentVisible&&(Ct.isInFont||S.missingFile)){if(At&&!$t)F.fillText(Xt,ne,Me);else if(this.paintChar(Xt,ne,Me,rt),$t){const Pe=ne+L*$t.offset.x/U,Oe=Me-L*$t.offset.y/U;this.paintChar($t.fontChar,Pe,Oe,rt)}}const Ue=R?Ae*it-Bt*_:Ae*it+Bt*_;ut+=Ue,Lt&&F.restore()}R?p.y-=ut:p.x+=ut*E,F.restore(),this.compose()}showType3Text(f){const p=this.ctx,S=this.current,L=S.font,F=S.fontSize,U=S.fontDirection,T=L.vertical?1:-1,s=S.charSpacing,_=S.wordSpacing,E=S.textHScale*U,P=S.fontMatrix||h.FONT_IDENTITY_MATRIX,R=f.length,j=S.textRenderingMode===h.TextRenderingMode.INVISIBLE;let X,it,At,rt;if(!(j||F===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,p.save(),p.transform(...S.textMatrix),p.translate(S.x,S.y),p.scale(E,U),X=0;X<R;++X){if(it=f[X],typeof it=="number"){rt=T*it*F/1e3,this.ctx.translate(rt,0),S.x+=rt*E;continue}const st=(it.isSpace?_:0)+s,ht=L.charProcOperatorList[it.operatorListId];if(!ht){(0,h.warn)(`Type3 character "${it.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=it,this.save(),p.scale(F,F),p.transform(...P),this.executeOperatorList(ht),this.restore()),At=h.Util.applyTransform([it.width,0],P)[0]*F+st,p.translate(At,0),S.x+=At*E}p.restore(),this.processingType3=null}}setCharWidth(f,p){}setCharWidthAndBounds(f,p,S,L,F,U){this.ctx.rect(S,L,F-S,U-L),this.ctx.clip(),this.endPath()}getColorN_Pattern(f){let p;if(f[0]==="TilingPattern"){const S=f[1],L=this.baseTransform||(0,b.getCurrentTransform)(this.ctx),F={createCanvasGraphics:U=>new O(U,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};p=new n.TilingPattern(f,S,this.ctx,F,L)}else p=this._getPattern(f[1],f[2]);return p}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(f,p,S){const L=h.Util.makeHexColor(f,p,S);this.ctx.strokeStyle=L,this.current.strokeColor=L}setFillRGBColor(f,p,S){const L=h.Util.makeHexColor(f,p,S);this.ctx.fillStyle=L,this.current.fillColor=L,this.current.patternFill=!1}_getPattern(f,p=null){let S;return this.cachedPatterns.has(f)?S=this.cachedPatterns.get(f):(S=(0,n.getShadingPattern)(this.getObject(f)),this.cachedPatterns.set(f,S)),p&&(S.matrix=p),S}shadingFill(f){if(!this.contentVisible)return;const p=this.ctx;this.save();const S=this._getPattern(f);p.fillStyle=S.getPattern(p,this,(0,b.getCurrentTransformInverse)(p),n.PathType.SHADING);const L=(0,b.getCurrentTransformInverse)(p);if(L){const{width:F,height:U}=p.canvas,[T,s,_,E]=h.Util.getAxialAlignedBoundingBox([0,0,F,U],L);this.ctx.fillRect(T,s,_-T,E-s)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(f,p){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(f)&&f.length===6&&this.transform(...f),this.baseTransform=(0,b.getCurrentTransform)(this.ctx),p)){const S=p[2]-p[0],L=p[3]-p[1];this.ctx.rect(p[0],p[1],S,L),this.current.updateRectMinMax((0,b.getCurrentTransform)(this.ctx),p),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(f){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const p=this.ctx;f.isolated||(0,h.info)("TODO: Support non-isolated groups."),f.knockout&&(0,h.warn)("Knockout groups not supported.");const S=(0,b.getCurrentTransform)(p);if(f.matrix&&p.transform(...f.matrix),!f.bbox)throw new Error("Bounding box is required.");let L=h.Util.getAxialAlignedBoundingBox(f.bbox,(0,b.getCurrentTransform)(p));const F=[0,0,p.canvas.width,p.canvas.height];L=h.Util.intersect(L,F)||[0,0,0,0];const U=Math.floor(L[0]),T=Math.floor(L[1]);let s=Math.max(Math.ceil(L[2])-U,1),_=Math.max(Math.ceil(L[3])-T,1),E=1,P=1;s>r&&(E=s/r,s=r),_>r&&(P=_/r,_=r),this.current.startNewPathAndClipBox([0,0,s,_]);let R="groupAt"+this.groupLevel;f.smask&&(R+="_smask_"+this.smaskCounter++%2);const j=this.cachedCanvases.getCanvas(R,s,_),X=j.context;X.scale(1/E,1/P),X.translate(-U,-T),X.transform(...S),f.smask?this.smaskStack.push({canvas:j.canvas,context:X,offsetX:U,offsetY:T,scaleX:E,scaleY:P,subtype:f.smask.subtype,backdrop:f.smask.backdrop,transferMap:f.smask.transferMap||null,startTransformInverse:null}):(p.setTransform(1,0,0,1,0,0),p.translate(U,T),p.scale(E,P),p.save()),m(p,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(p),this.groupLevel++}endGroup(f){if(!this.contentVisible)return;this.groupLevel--;const p=this.ctx,S=this.groupStack.pop();if(this.ctx=S,this.ctx.imageSmoothingEnabled=!1,f.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const L=(0,b.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...L);const F=h.Util.getAxialAlignedBoundingBox([0,0,p.canvas.width,p.canvas.height],L);this.ctx.drawImage(p.canvas,0,0),this.ctx.restore(),this.compose(F)}}beginAnnotation(f,p,S,L,F){if(this.#t(),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(p)&&p.length===4){const U=p[2]-p[0],T=p[3]-p[1];if(F&&this.annotationCanvasMap){S=S.slice(),S[4]-=p[0],S[5]-=p[1],p=p.slice(),p[0]=p[1]=0,p[2]=U,p[3]=T;const[s,_]=h.Util.singularValueDecompose2dScale((0,b.getCurrentTransform)(this.ctx)),{viewportScale:E}=this,P=Math.ceil(U*this.outputScaleX*E),R=Math.ceil(T*this.outputScaleY*E);this.annotationCanvas=this.canvasFactory.create(P,R);const{canvas:j,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(f,j),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.save(),this.ctx.setTransform(s,0,0,-_,0,T*_),C(this.ctx)}else C(this.ctx),this.ctx.rect(p[0],p[1],U,T),this.ctx.clip(),this.endPath()}this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...S),this.transform(...L)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(f){if(!this.contentVisible)return;const p=f.count;f=this.getObject(f.data,f),f.count=p;const S=this.ctx,L=this.processingType3;if(L&&(L.compiled===void 0&&(L.compiled=l(f)),L.compiled)){L.compiled(S);return}const F=this._createMaskCanvas(f),U=F.canvas;S.save(),S.setTransform(1,0,0,1,0,0),S.drawImage(U,F.offsetX,F.offsetY),S.restore(),this.compose()}paintImageMaskXObjectRepeat(f,p,S=0,L=0,F,U){if(!this.contentVisible)return;f=this.getObject(f.data,f);const T=this.ctx;T.save();const s=(0,b.getCurrentTransform)(T);T.transform(p,S,L,F,0,0);const _=this._createMaskCanvas(f);T.setTransform(1,0,0,1,_.offsetX-s[4],_.offsetY-s[5]);for(let E=0,P=U.length;E<P;E+=2){const R=h.Util.transform(s,[p,S,L,F,U[E],U[E+1]]),[j,X]=h.Util.applyTransform([0,0],R);T.drawImage(_.canvas,j,X)}T.restore(),this.compose()}paintImageMaskXObjectGroup(f){if(!this.contentVisible)return;const p=this.ctx,S=this.current.fillColor,L=this.current.patternFill;for(const F of f){const{data:U,width:T,height:s,transform:_}=F,E=this.cachedCanvases.getCanvas("maskCanvas",T,s),P=E.context;P.save();const R=this.getObject(U,F);k(P,R),P.globalCompositeOperation="source-in",P.fillStyle=L?S.getPattern(P,this,(0,b.getCurrentTransformInverse)(p),n.PathType.FILL):S,P.fillRect(0,0,T,s),P.restore(),p.save(),p.transform(..._),p.scale(1,-1),v(p,E.canvas,0,0,T,s,0,-1,1,1),p.restore()}this.compose()}paintImageXObject(f){if(!this.contentVisible)return;const p=this.getObject(f);if(!p){(0,h.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(p)}paintImageXObjectRepeat(f,p,S,L){if(!this.contentVisible)return;const F=this.getObject(f);if(!F){(0,h.warn)("Dependent image isn't ready yet");return}const U=F.width,T=F.height,s=[];for(let _=0,E=L.length;_<E;_+=2)s.push({transform:[p,0,0,S,L[_],L[_+1]],x:0,y:0,w:U,h:T});this.paintInlineImageXObjectGroup(F,s)}applyTransferMapsToCanvas(f){return this.current.transferMaps!=="none"&&(f.filter=this.current.transferMaps,f.drawImage(f.canvas,0,0),f.filter="none"),f.canvas}applyTransferMapsToBitmap(f){if(this.current.transferMaps==="none")return f.bitmap;const{bitmap:p,width:S,height:L}=f,F=this.cachedCanvases.getCanvas("inlineImage",S,L),U=F.context;return U.filter=this.current.transferMaps,U.drawImage(p,0,0),U.filter="none",F.canvas}paintInlineImageXObject(f){if(!this.contentVisible)return;const p=f.width,S=f.height,L=this.ctx;if(this.save(),!h.isNodeJS){const{filter:T}=L;T!=="none"&&T!==""&&(L.filter="none")}L.scale(1/p,-1/S);let F;if(f.bitmap)F=this.applyTransferMapsToBitmap(f);else if(typeof HTMLElement=="function"&&f instanceof HTMLElement||!f.data)F=f;else{const s=this.cachedCanvases.getCanvas("inlineImage",p,S).context;x(s,f),F=this.applyTransferMapsToCanvas(s)}const U=this._scaleImage(F,(0,b.getCurrentTransformInverse)(L));L.imageSmoothingEnabled=yt((0,b.getCurrentTransform)(L),f.interpolate),v(L,U.img,0,0,U.paintWidth,U.paintHeight,0,-S,p,S),this.compose(),this.restore()}paintInlineImageXObjectGroup(f,p){if(!this.contentVisible)return;const S=this.ctx;let L;if(f.bitmap)L=f.bitmap;else{const F=f.width,U=f.height,s=this.cachedCanvases.getCanvas("inlineImage",F,U).context;x(s,f),L=this.applyTransferMapsToCanvas(s)}for(const F of p)S.save(),S.transform(...F.transform),S.scale(1,-1),v(S,L,F.x,F.y,F.w,F.h,0,-1,1,1),S.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(f){}markPointProps(f,p){}beginMarkedContent(f){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(f,p){f==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(p)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(f){const p=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(f);const S=this.ctx;this.pendingClip&&(p||(this.pendingClip===ct?S.clip("evenodd"):S.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),S.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const f=(0,b.getCurrentTransform)(this.ctx);if(f[1]===0&&f[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(f[0]),Math.abs(f[3]));else{const p=Math.abs(f[0]*f[3]-f[2]*f[1]),S=Math.hypot(f[0],f[2]),L=Math.hypot(f[1],f[3]);this._cachedGetSinglePixelWidth=Math.max(S,L)/p}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:f}=this.current,{a:p,b:S,c:L,d:F}=this.ctx.getTransform();let U,T;if(S===0&&L===0){const s=Math.abs(p),_=Math.abs(F);if(s===_)if(f===0)U=T=1/s;else{const E=s*f;U=T=E<1?1/E:1}else if(f===0)U=1/s,T=1/_;else{const E=s*f,P=_*f;U=E<1?1/E:1,T=P<1?1/P:1}}else{const s=Math.abs(p*F-S*L),_=Math.hypot(p,S),E=Math.hypot(L,F);if(f===0)U=E/s,T=_/s;else{const P=f*s;U=E>P?E/P:1,T=_>P?_/P:1}}this._cachedScaleForStroking[0]=U,this._cachedScaleForStroking[1]=T}return this._cachedScaleForStroking}rescaleAndStroke(f){const{ctx:p}=this,{lineWidth:S}=this.current,[L,F]=this.getScaleForStroking();if(p.lineWidth=S||1,L===1&&F===1){p.stroke();return}const U=p.getLineDash();if(f&&p.save(),p.scale(L,F),U.length>0){const T=Math.max(L,F);p.setLineDash(U.map(s=>s/T)),p.lineDashOffset/=T}p.stroke(),f&&p.restore()}isContentVisible(){for(let f=this.markedContentStack.length-1;f>=0;f--)if(!this.markedContentStack[f].visible)return!1;return!0}}a.CanvasGraphics=O;for(const A in h.OPS)O.prototype[A]!==void 0&&(O.prototype[h.OPS[A]]=O.prototype[A])}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=c;var h=I(1),b=I(6);const n={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};a.PathType=n;function M(v,l){if(!l)return;const w=l[2]-l[0],x=l[3]-l[1],k=new Path2D;k.rect(l[0],l[1],w,x),v.clip(k)}class V{constructor(){this.constructor===V&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class q extends V{constructor(l){super(),this._type=l[1],this._bbox=l[2],this._colorStops=l[3],this._p0=l[4],this._p1=l[5],this._r0=l[6],this._r1=l[7],this.matrix=null}_createGradient(l){let w;this._type==="axial"?w=l.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(w=l.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)w.addColorStop(x[0],x[1]);return w}getPattern(l,w,x,k){let m;if(k===n.STROKE||k===n.FILL){const C=w.current.getClippedPathBoundingBox(k,(0,b.getCurrentTransform)(l))||[0,0,0,0],z=Math.ceil(C[2]-C[0])||1,$=Math.ceil(C[3]-C[1])||1,H=w.cachedCanvases.getCanvas("pattern",z,$,!0),tt=H.context;tt.clearRect(0,0,tt.canvas.width,tt.canvas.height),tt.beginPath(),tt.rect(0,0,tt.canvas.width,tt.canvas.height),tt.translate(-C[0],-C[1]),x=h.Util.transform(x,[1,0,0,1,C[0],C[1]]),tt.transform(...w.baseTransform),this.matrix&&tt.transform(...this.matrix),M(tt,this._bbox),tt.fillStyle=this._createGradient(tt),tt.fill(),m=l.createPattern(H.canvas,"no-repeat");const nt=new DOMMatrix(x);m.setTransform(nt)}else M(l,this._bbox),m=this._createGradient(l);return m}}function r(v,l,w,x,k,m,C,z){const $=l.coords,H=l.colors,tt=v.data,nt=v.width*4;let yt;$[w+1]>$[x+1]&&(yt=w,w=x,x=yt,yt=m,m=C,C=yt),$[x+1]>$[k+1]&&(yt=x,x=k,k=yt,yt=C,C=z,z=yt),$[w+1]>$[x+1]&&(yt=w,w=x,x=yt,yt=m,m=C,C=yt);const dt=($[w]+l.offsetX)*l.scaleX,vt=($[w+1]+l.offsetY)*l.scaleY,Et=($[x]+l.offsetX)*l.scaleX,ct=($[x+1]+l.offsetY)*l.scaleY,O=($[k]+l.offsetX)*l.scaleX,A=($[k+1]+l.offsetY)*l.scaleY;if(vt>=A)return;const f=H[m],p=H[m+1],S=H[m+2],L=H[C],F=H[C+1],U=H[C+2],T=H[z],s=H[z+1],_=H[z+2],E=Math.round(vt),P=Math.round(A);let R,j,X,it,At,rt,st,ht;for(let ut=E;ut<=P;ut++){if(ut<ct){const Xt=ut<vt?0:(vt-ut)/(vt-ct);R=dt-(dt-Et)*Xt,j=f-(f-L)*Xt,X=p-(p-F)*Xt,it=S-(S-U)*Xt}else{let Xt;ut>A?Xt=1:ct===A?Xt=0:Xt=(ct-ut)/(ct-A),R=Et-(Et-O)*Xt,j=L-(L-T)*Xt,X=F-(F-s)*Xt,it=U-(U-_)*Xt}let gt;ut<vt?gt=0:ut>A?gt=1:gt=(vt-ut)/(vt-A),At=dt-(dt-O)*gt,rt=f-(f-T)*gt,st=p-(p-s)*gt,ht=S-(S-_)*gt;const Ct=Math.round(Math.min(R,At)),Lt=Math.round(Math.max(R,At));let Bt=nt*ut+Ct*4;for(let Xt=Ct;Xt<=Lt;Xt++)gt=(R-Xt)/(R-At),gt<0?gt=0:gt>1&&(gt=1),tt[Bt++]=j-(j-rt)*gt|0,tt[Bt++]=X-(X-st)*gt|0,tt[Bt++]=it-(it-ht)*gt|0,tt[Bt++]=255}}function t(v,l,w){const x=l.coords,k=l.colors;let m,C;switch(l.type){case"lattice":const z=l.verticesPerRow,$=Math.floor(x.length/z)-1,H=z-1;for(m=0;m<$;m++){let tt=m*z;for(let nt=0;nt<H;nt++,tt++)r(v,w,x[tt],x[tt+1],x[tt+z],k[tt],k[tt+1],k[tt+z]),r(v,w,x[tt+z+1],x[tt+1],x[tt+z],k[tt+z+1],k[tt+1],k[tt+z])}break;case"triangles":for(m=0,C=x.length;m<C;m+=3)r(v,w,x[m],x[m+1],x[m+2],k[m],k[m+1],k[m+2]);break;default:throw new Error("illegal figure")}}class i extends V{constructor(l){super(),this._coords=l[2],this._colors=l[3],this._figures=l[4],this._bounds=l[5],this._bbox=l[7],this._background=l[8],this.matrix=null}_createMeshCanvas(l,w,x){const z=Math.floor(this._bounds[0]),$=Math.floor(this._bounds[1]),H=Math.ceil(this._bounds[2])-z,tt=Math.ceil(this._bounds[3])-$,nt=Math.min(Math.ceil(Math.abs(H*l[0]*1.1)),3e3),yt=Math.min(Math.ceil(Math.abs(tt*l[1]*1.1)),3e3),dt=H/nt,vt=tt/yt,Et={coords:this._coords,colors:this._colors,offsetX:-z,offsetY:-$,scaleX:1/dt,scaleY:1/vt},ct=nt+4,O=yt+4,A=x.getCanvas("mesh",ct,O,!1),f=A.context,p=f.createImageData(nt,yt);if(w){const L=p.data;for(let F=0,U=L.length;F<U;F+=4)L[F]=w[0],L[F+1]=w[1],L[F+2]=w[2],L[F+3]=255}for(const L of this._figures)t(p,L,Et);return f.putImageData(p,2,2),{canvas:A.canvas,offsetX:z-2*dt,offsetY:$-2*vt,scaleX:dt,scaleY:vt}}getPattern(l,w,x,k){M(l,this._bbox);let m;if(k===n.SHADING)m=h.Util.singularValueDecompose2dScale((0,b.getCurrentTransform)(l));else if(m=h.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const z=h.Util.singularValueDecompose2dScale(this.matrix);m=[m[0]*z[0],m[1]*z[1]]}const C=this._createMeshCanvas(m,k===n.SHADING?null:this._background,w.cachedCanvases);return k!==n.SHADING&&(l.setTransform(...w.baseTransform),this.matrix&&l.transform(...this.matrix)),l.translate(C.offsetX,C.offsetY),l.scale(C.scaleX,C.scaleY),l.createPattern(C.canvas,"no-repeat")}}class u extends V{getPattern(){return"hotpink"}}function c(v){switch(v[0]){case"RadialAxial":return new q(v);case"Mesh":return new i(v);case"Dummy":return new u}throw new Error(`Unknown IR type: ${v[0]}`)}const e={COLORED:1,UNCOLORED:2};class g{static MAX_PATTERN_SIZE=3e3;constructor(l,w,x,k,m){this.operatorList=l[2],this.matrix=l[3]||[1,0,0,1,0,0],this.bbox=l[4],this.xstep=l[5],this.ystep=l[6],this.paintType=l[7],this.tilingType=l[8],this.color=w,this.ctx=x,this.canvasGraphicsFactory=k,this.baseTransform=m}createPatternCanvas(l){const w=this.operatorList,x=this.bbox,k=this.xstep,m=this.ystep,C=this.paintType,z=this.tilingType,$=this.color,H=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+z);const tt=x[0],nt=x[1],yt=x[2],dt=x[3],vt=h.Util.singularValueDecompose2dScale(this.matrix),Et=h.Util.singularValueDecompose2dScale(this.baseTransform),ct=[vt[0]*Et[0],vt[1]*Et[1]],O=this.getSizeAndScale(k,this.ctx.canvas.width,ct[0]),A=this.getSizeAndScale(m,this.ctx.canvas.height,ct[1]),f=l.cachedCanvases.getCanvas("pattern",O.size,A.size,!0),p=f.context,S=H.createCanvasGraphics(p);S.groupLevel=l.groupLevel,this.setFillAndStrokeStyleToContext(S,C,$);let L=tt,F=nt,U=yt,T=dt;return tt<0&&(L=0,U+=Math.abs(tt)),nt<0&&(F=0,T+=Math.abs(nt)),p.translate(-(O.scale*L),-(A.scale*F)),S.transform(O.scale,0,0,A.scale,0,0),p.save(),this.clipBbox(S,L,F,U,T),S.baseTransform=(0,b.getCurrentTransform)(S.ctx),S.executeOperatorList(w),S.endDrawing(),{canvas:f.canvas,scaleX:O.scale,scaleY:A.scale,offsetX:L,offsetY:F}}getSizeAndScale(l,w,x){l=Math.abs(l);const k=Math.max(g.MAX_PATTERN_SIZE,w);let m=Math.ceil(l*x);return m>=k?m=k:x=m/l,{scale:x,size:m}}clipBbox(l,w,x,k,m){const C=k-w,z=m-x;l.ctx.rect(w,x,C,z),l.current.updateRectMinMax((0,b.getCurrentTransform)(l.ctx),[w,x,k,m]),l.clip(),l.endPath()}setFillAndStrokeStyleToContext(l,w,x){const k=l.ctx,m=l.current;switch(w){case e.COLORED:const C=this.ctx;k.fillStyle=C.fillStyle,k.strokeStyle=C.strokeStyle,m.fillColor=C.fillStyle,m.strokeColor=C.strokeStyle;break;case e.UNCOLORED:const z=h.Util.makeHexColor(x[0],x[1],x[2]);k.fillStyle=z,k.strokeStyle=z,m.fillColor=z,m.strokeColor=z;break;default:throw new h.FormatError(`Unsupported paint type: ${w}`)}}getPattern(l,w,x,k){let m=x;k!==n.SHADING&&(m=h.Util.transform(m,w.baseTransform),this.matrix&&(m=h.Util.transform(m,this.matrix)));const C=this.createPatternCanvas(w);let z=new DOMMatrix(m);z=z.translate(C.offsetX,C.offsetY),z=z.scale(1/C.scaleX,1/C.scaleY);const $=l.createPattern(C.canvas,"repeat");return $.setTransform(z),$}}a.TilingPattern=g}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.convertBlackAndWhiteToRGBA=n,a.convertToRGBA=b,a.grayToRGBA=V;var h=I(1);function b(q){switch(q.kind){case h.ImageKind.GRAYSCALE_1BPP:return n(q);case h.ImageKind.RGB_24BPP:return M(q)}return null}function n({src:q,srcPos:r=0,dest:t,width:i,height:u,nonBlackColor:c=4294967295,inverseDecode:e=!1}){const g=h.FeatureTest.isLittleEndian?4278190080:255,[v,l]=e?[c,g]:[g,c],w=i>>3,x=i&7,k=q.length;t=new Uint32Array(t.buffer);let m=0;for(let C=0;C<u;C++){for(const $=r+w;r<$;r++){const H=r<k?q[r]:255;t[m++]=H&128?l:v,t[m++]=H&64?l:v,t[m++]=H&32?l:v,t[m++]=H&16?l:v,t[m++]=H&8?l:v,t[m++]=H&4?l:v,t[m++]=H&2?l:v,t[m++]=H&1?l:v}if(x===0)continue;const z=r<k?q[r++]:255;for(let $=0;$<x;$++)t[m++]=z&1<<7-$?l:v}return{srcPos:r,destPos:m}}function M({src:q,srcPos:r=0,dest:t,destPos:i=0,width:u,height:c}){let e=0;const g=q.length>>2,v=new Uint32Array(q.buffer,r,g);if(h.FeatureTest.isLittleEndian){for(;e<g-2;e+=3,i+=4){const l=v[e],w=v[e+1],x=v[e+2];t[i]=l|4278190080,t[i+1]=l>>>24|w<<8|4278190080,t[i+2]=w>>>16|x<<16|4278190080,t[i+3]=x>>>8|4278190080}for(let l=e*4,w=q.length;l<w;l+=3)t[i++]=q[l]|q[l+1]<<8|q[l+2]<<16|4278190080}else{for(;e<g-2;e+=3,i+=4){const l=v[e],w=v[e+1],x=v[e+2];t[i]=l|255,t[i+1]=l<<24|w>>>8|255,t[i+2]=w<<16|x>>>16|255,t[i+3]=x<<8|255}for(let l=e*4,w=q.length;l<w;l+=3)t[i++]=q[l]<<24|q[l+1]<<16|q[l+2]<<8|255}return{srcPos:r,destPos:i}}function V(q,r){if(h.FeatureTest.isLittleEndian)for(let t=0,i=q.length;t<i;t++)r[t]=q[t]*65793|4278190080;else for(let t=0,i=q.length;t<i;t++)r[t]=q[t]*16843008|255}}),((d,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const I=Object.create(null);a.GlobalWorkerOptions=I,I.workerPort=null,I.workerSrc=""}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var h=I(1);const b={DATA:1,ERROR:2},n={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M(q){switch(q instanceof Error||typeof q=="object"&&q!==null||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),q.name){case"AbortException":return new h.AbortException(q.message);case"MissingPDFException":return new h.MissingPDFException(q.message);case"PasswordException":return new h.PasswordException(q.message,q.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(q.message,q.status);case"UnknownErrorException":return new h.UnknownErrorException(q.message,q.details);default:return new h.UnknownErrorException(q.message,q.toString())}}class V{constructor(r,t,i){this.sourceName=r,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=u=>{const c=u.data;if(c.targetName!==this.sourceName)return;if(c.stream){this.#e(c);return}if(c.callback){const g=c.callbackId,v=this.callbackCapabilities[g];if(!v)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],c.callback===b.DATA)v.resolve(c.data);else if(c.callback===b.ERROR)v.reject(M(c.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[c.action];if(!e)throw new Error(`Unknown action from worker: ${c.action}`);if(c.callbackId){const g=this.sourceName,v=c.sourceName;new Promise(function(l){l(e(c.data))}).then(function(l){i.postMessage({sourceName:g,targetName:v,callback:b.DATA,callbackId:c.callbackId,data:l})},function(l){i.postMessage({sourceName:g,targetName:v,callback:b.ERROR,callbackId:c.callbackId,reason:M(l)})});return}if(c.streamId){this.#t(c);return}e(c.data)},i.addEventListener("message",this._onComObjOnMessage)}on(r,t){const i=this.actionHandler;if(i[r])throw new Error(`There is already an actionName called "${r}"`);i[r]=t}send(r,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,data:t},i)}sendWithPromise(r,t,i){const u=this.callbackId++,c=new h.PromiseCapability;this.callbackCapabilities[u]=c;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,callbackId:u,data:t},i)}catch(e){c.reject(e)}return c.promise}sendWithStream(r,t,i,u){const c=this.streamId++,e=this.sourceName,g=this.targetName,v=this.comObj;return new ReadableStream({start:l=>{const w=new h.PromiseCapability;return this.streamControllers[c]={controller:l,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},v.postMessage({sourceName:e,targetName:g,action:r,streamId:c,data:t,desiredSize:l.desiredSize},u),w.promise},pull:l=>{const w=new h.PromiseCapability;return this.streamControllers[c].pullCall=w,v.postMessage({sourceName:e,targetName:g,stream:n.PULL,streamId:c,desiredSize:l.desiredSize}),w.promise},cancel:l=>{(0,h.assert)(l instanceof Error,"cancel must have a valid reason");const w=new h.PromiseCapability;return this.streamControllers[c].cancelCall=w,this.streamControllers[c].isClosed=!0,v.postMessage({sourceName:e,targetName:g,stream:n.CANCEL,streamId:c,reason:M(l)}),w.promise}},i)}#t(r){const t=r.streamId,i=this.sourceName,u=r.sourceName,c=this.comObj,e=this,g=this.actionHandler[r.action],v={enqueue(l,w=1,x){if(this.isCancelled)return;const k=this.desiredSize;this.desiredSize-=w,k>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),c.postMessage({sourceName:i,targetName:u,stream:n.ENQUEUE,streamId:t,chunk:l},x)},close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:i,targetName:u,stream:n.CLOSE,streamId:t}),delete e.streamSinks[t])},error(l){(0,h.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,c.postMessage({sourceName:i,targetName:u,stream:n.ERROR,streamId:t,reason:M(l)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:r.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[t]=v,new Promise(function(l){l(g(r.data,v))}).then(function(){c.postMessage({sourceName:i,targetName:u,stream:n.START_COMPLETE,streamId:t,success:!0})},function(l){c.postMessage({sourceName:i,targetName:u,stream:n.START_COMPLETE,streamId:t,reason:M(l)})})}#e(r){const t=r.streamId,i=this.sourceName,u=r.sourceName,c=this.comObj,e=this.streamControllers[t],g=this.streamSinks[t];switch(r.stream){case n.START_COMPLETE:r.success?e.startCall.resolve():e.startCall.reject(M(r.reason));break;case n.PULL_COMPLETE:r.success?e.pullCall.resolve():e.pullCall.reject(M(r.reason));break;case n.PULL:if(!g){c.postMessage({sourceName:i,targetName:u,stream:n.PULL_COMPLETE,streamId:t,success:!0});break}g.desiredSize<=0&&r.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=r.desiredSize,new Promise(function(v){v(g.onPull?.())}).then(function(){c.postMessage({sourceName:i,targetName:u,stream:n.PULL_COMPLETE,streamId:t,success:!0})},function(v){c.postMessage({sourceName:i,targetName:u,stream:n.PULL_COMPLETE,streamId:t,reason:M(v)})});break;case n.ENQUEUE:if((0,h.assert)(e,"enqueue should have stream controller"),e.isClosed)break;e.controller.enqueue(r.chunk);break;case n.CLOSE:if((0,h.assert)(e,"close should have stream controller"),e.isClosed)break;e.isClosed=!0,e.controller.close(),this.#n(e,t);break;case n.ERROR:(0,h.assert)(e,"error should have stream controller"),e.controller.error(M(r.reason)),this.#n(e,t);break;case n.CANCEL_COMPLETE:r.success?e.cancelCall.resolve():e.cancelCall.reject(M(r.reason)),this.#n(e,t);break;case n.CANCEL:if(!g)break;new Promise(function(v){v(g.onCancel?.(M(r.reason)))}).then(function(){c.postMessage({sourceName:i,targetName:u,stream:n.CANCEL_COMPLETE,streamId:t,success:!0})},function(v){c.postMessage({sourceName:i,targetName:u,stream:n.CANCEL_COMPLETE,streamId:t,reason:M(v)})}),g.sinkCapability.reject(M(r.reason)),g.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#n(r,t){await Promise.allSettled([r.startCall?.promise,r.pullCall?.promise,r.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}a.MessageHandler=V}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var h=I(1);class b{#t;#e;constructor({parsedData:M,rawData:V}){this.#t=M,this.#e=V}getRaw(){return this.#e}get(M){return this.#t.get(M)??null}getAll(){return(0,h.objectFromMap)(this.#t)}has(M){return this.#t.has(M)}}a.Metadata=b}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var h=I(1),b=I(8);const n=Symbol("INTERNAL");class M{#t=!0;constructor(r,t){this.name=r,this.intent=t}get visible(){return this.#t}_setVisible(r,t){r!==n&&(0,h.unreachable)("Internal method `_setVisible` called."),this.#t=t}}class V{#t=null;#e=new Map;#n=null;#i=null;constructor(r){if(this.name=null,this.creator=null,r!==null){this.name=r.name,this.creator=r.creator,this.#i=r.order;for(const t of r.groups)this.#e.set(t.id,new M(t.name,t.intent));if(r.baseState==="OFF")for(const t of this.#e.values())t._setVisible(n,!1);for(const t of r.on)this.#e.get(t)._setVisible(n,!0);for(const t of r.off)this.#e.get(t)._setVisible(n,!1);this.#n=this.getHash()}}#o(r){const t=r.length;if(t<2)return!0;const i=r[0];for(let u=1;u<t;u++){const c=r[u];let e;if(Array.isArray(c))e=this.#o(c);else if(this.#e.has(c))e=this.#e.get(c).visible;else return(0,h.warn)(`Optional content group not found: ${c}`),!0;switch(i){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return i==="And"}isVisible(r){if(this.#e.size===0)return!0;if(!r)return(0,h.warn)("Optional content group not defined."),!0;if(r.type==="OCG")return this.#e.has(r.id)?this.#e.get(r.id).visible:((0,h.warn)(`Optional content group not found: ${r.id}`),!0);if(r.type==="OCMD"){if(r.expression)return this.#o(r.expression);if(!r.policy||r.policy==="AnyOn"){for(const t of r.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!0}return!1}else if(r.policy==="AllOn"){for(const t of r.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!1}return!0}else if(r.policy==="AnyOff"){for(const t of r.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!0}return!1}else if(r.policy==="AllOff"){for(const t of r.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${r.policy}.`),!0}return(0,h.warn)(`Unknown group type ${r.type}.`),!0}setVisibility(r,t=!0){if(!this.#e.has(r)){(0,h.warn)(`Optional content group not found: ${r}`);return}this.#e.get(r)._setVisible(n,!!t),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,h.objectFromMap)(this.#e):null}getGroup(r){return this.#e.get(r)||null}getHash(){if(this.#t!==null)return this.#t;const r=new b.MurmurHash3_64;for(const[t,i]of this.#e)r.update(`${t}:${i.visible}`);return this.#t=r.hexdigest()}}a.OptionalContentConfig=V}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var h=I(1),b=I(6);class n{constructor({length:r,initialData:t,progressiveDone:i=!1,contentDispositionFilename:u=null,disableRange:c=!1,disableStream:e=!1},g){if((0,h.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=i,this._contentDispositionFilename=u,t?.length>0){const v=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!e,this._isRangeSupported=!c,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,l)=>{this._onReceiveData({begin:v,chunk:l})}),this._pdfDataRangeTransport.addProgressListener((v,l)=>{this._onProgress({loaded:v,total:l})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:r,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(r===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const u=this._rangeReaders.some(function(c){return c._begin!==r?!1:(c._enqueue(i),!0)});(0,h.assert)(u,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(r){r.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:r.loaded}):this._fullRequestReader?.onProgress?.({loaded:r.loaded,total:r.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(r){const t=this._rangeReaders.indexOf(r);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const r=this._queuedChunks;return this._queuedChunks=null,new M(this,r,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(r,t){if(t<=this._progressiveDataLength)return null;const i=new V(this,r,t);return this._pdfDataRangeTransport.requestDataRange(r,t),this._rangeReaders.push(i),i}cancelAllRequests(r){this._fullRequestReader?.cancel(r);for(const t of this._rangeReaders.slice(0))t.cancel(r);this._pdfDataRangeTransport.abort()}}a.PDFDataTransportStream=n;class M{constructor(r,t,i=!1,u=null){this._stream=r,this._done=i||!1,this._filename=(0,b.isPdfFile)(u)?u:null,this._queuedChunks=t||[],this._loaded=0;for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._requests=[],this._headersReady=Promise.resolve(),r._fullRequestReader=this,this.onProgress=null}_enqueue(r){this._done||(this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunks.push(r),this._loaded+=r.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const r=new h.PromiseCapability;return this._requests.push(r),r.promise}cancel(r){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class V{constructor(r,t,i){this._stream=r,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(r){if(!this._done){if(this._requests.length===0)this._queuedChunk=r;else{this._requests.shift().resolve({value:r,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const r=new h.PromiseCapability;return this._requests.push(r),r.promise}cancel(r){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var h=I(1),b=I(20);function n(i,u,c){return{method:"GET",headers:i,signal:c.signal,mode:"cors",credentials:u?"include":"same-origin",redirect:"follow"}}function M(i){const u=new Headers;for(const c in i){const e=i[c];e!==void 0&&u.append(c,e)}return u}function V(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:((0,h.warn)(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class q{constructor(u){this.source=u,this.isHttp=/^https?:/i.test(u.url),this.httpHeaders=this.isHttp&&u.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new r(this),this._fullRequestReader}getRangeReader(u,c){if(c<=this._progressiveDataLength)return null;const e=new t(this,u,c);return this._rangeRequestReaders.push(e),e}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(const c of this._rangeRequestReaders.slice(0))c.cancel(u)}}a.PDFFetchStream=q;class r{constructor(u){this._stream=u,this._reader=null,this._loaded=0,this._filename=null;const c=u.source;this._withCredentials=c.withCredentials||!1,this._contentLength=c.length,this._headersCapability=new h.PromiseCapability,this._disableRange=c.disableRange||!1,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!c.disableStream,this._isRangeSupported=!c.disableRange,this._headers=M(this._stream.httpHeaders);const e=c.url;fetch(e,n(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,b.validateResponseStatus)(g.status))throw(0,b.createResponseStatusError)(g.status,e);this._reader=g.body.getReader(),this._headersCapability.resolve();const v=x=>g.headers.get(x),{allowRangeRequests:l,suggestedLength:w}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=w||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:u,done:c}=await this._reader.read();return c?{value:u,done:c}:(this._loaded+=u.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:V(u),done:!1})}cancel(u){this._reader?.cancel(u),this._abortController.abort()}}class t{constructor(u,c,e){this._stream=u,this._reader=null,this._loaded=0;const g=u.source;this._withCredentials=g.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!g.disableStream,this._abortController=new AbortController,this._headers=M(this._stream.httpHeaders),this._headers.append("Range",`bytes=${c}-${e-1}`);const v=g.url;fetch(v,n(this._headers,this._withCredentials,this._abortController)).then(l=>{if(!(0,b.validateResponseStatus)(l.status))throw(0,b.createResponseStatusError)(l.status,v);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:u,done:c}=await this._reader.read();return c?{value:u,done:c}:(this._loaded+=u.byteLength,this.onProgress?.({loaded:this._loaded}),{value:V(u),done:!1})}cancel(u){this._reader?.cancel(u),this._abortController.abort()}}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=q,a.extractFilenameFromHeader=V,a.validateRangeRequestCapabilities=M,a.validateResponseStatus=r;var h=I(1),b=I(21),n=I(6);function M({getResponseHeader:t,isHttp:i,rangeChunkSize:u,disableRange:c}){const e={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(t("Content-Length"),10);return!Number.isInteger(g)||(e.suggestedLength=g,g<=2*u)||c||!i||t("Accept-Ranges")!=="bytes"||(t("Content-Encoding")||"identity")!=="identity"||(e.allowRangeRequests=!0),e}function V(t){const i=t("Content-Disposition");if(i){let u=(0,b.getFilenameFromContentDispositionHeader)(i);if(u.includes("%"))try{u=decodeURIComponent(u)}catch{}if((0,n.isPdfFile)(u))return u}return null}function q(t,i){return t===404||t===0&&i.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+i+'".'):new h.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${i}".`,t)}function r(t){return t===200||t===206}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=b;var h=I(1);function b(n){let M=!0,V=q("filename\\*","i").exec(n);if(V){V=V[1];let g=u(V);return g=unescape(g),g=c(g),g=e(g),t(g)}if(V=i(n),V){const g=e(V);return t(g)}if(V=q("filename","i").exec(n),V){V=V[1];let g=u(V);return g=e(g),t(g)}function q(g,v){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(g,v){if(g){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const l=new TextDecoder(g,{fatal:!0}),w=(0,h.stringToBytes)(v);v=l.decode(w),M=!1}catch{}}return v}function t(g){return M&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),M&&(g=r("iso-8859-1",g))),g}function i(g){const v=[];let l;const w=q("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=w.exec(g))!==null;){let[,k,m,C]=l;if(k=parseInt(k,10),k in v){if(k===0)break;continue}v[k]=[m,C]}const x=[];for(let k=0;k<v.length&&k in v;++k){let[m,C]=v[k];C=u(C),m&&(C=unescape(C),k===0&&(C=c(C))),x.push(C)}return x.join("")}function u(g){if(g.startsWith('"')){const v=g.slice(1).split('\\"');for(let l=0;l<v.length;++l){const w=v[l].indexOf('"');w!==-1&&(v[l]=v[l].slice(0,w),v.length=l+1),v[l]=v[l].replaceAll(/\\(.)/g,"$1")}g=v.join('"')}return g}function c(g){const v=g.indexOf("'");if(v===-1)return g;const l=g.slice(0,v),x=g.slice(v+1).replace(/^[^']*'/,"");return r(l,x)}function e(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,l,w,x){if(w==="q"||w==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,m){return String.fromCharCode(parseInt(m,16))}),r(l,x);try{x=atob(x)}catch{}return r(l,x)})}return""}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var h=I(1),b=I(20);const n=200,M=206;function V(u){const c=u.response;return typeof c!="string"?c:(0,h.stringToBytes)(c).buffer}class q{constructor(c,e={}){this.url=c,this.isHttp=/^https?:/i.test(c),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(c,e,g){const v={begin:c,end:e};for(const l in g)v[l]=g[l];return this.request(v)}requestFull(c){return this.request(c)}request(c){const e=new XMLHttpRequest,g=this.currXhrId++,v=this.pendingRequests[g]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const w=this.httpHeaders[l];w!==void 0&&e.setRequestHeader(l,w)}return this.isHttp&&"begin"in c&&"end"in c?(e.setRequestHeader("Range",`bytes=${c.begin}-${c.end-1}`),v.expectedStatus=M):v.expectedStatus=n,e.responseType="arraybuffer",c.onError&&(e.onerror=function(l){c.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,g),e.onprogress=this.onProgress.bind(this,g),v.onHeadersReceived=c.onHeadersReceived,v.onDone=c.onDone,v.onError=c.onError,v.onProgress=c.onProgress,e.send(null),g}onProgress(c,e){const g=this.pendingRequests[c];g&&g.onProgress?.(e)}onStateChange(c,e){const g=this.pendingRequests[c];if(!g)return;const v=g.xhr;if(v.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),v.readyState!==4||!(c in this.pendingRequests))return;if(delete this.pendingRequests[c],v.status===0&&this.isHttp){g.onError?.(v.status);return}const l=v.status||n;if(!(l===n&&g.expectedStatus===M)&&l!==g.expectedStatus){g.onError?.(v.status);return}const x=V(v);if(l===M){const k=v.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(k);g.onDone({begin:parseInt(m[1],10),chunk:x})}else x?g.onDone({begin:0,chunk:x}):g.onError?.(v.status)}getRequestXhr(c){return this.pendingRequests[c].xhr}isPendingRequest(c){return c in this.pendingRequests}abortRequest(c){const e=this.pendingRequests[c].xhr;delete this.pendingRequests[c],e.abort()}}class r{constructor(c){this._source=c,this._manager=new q(c.url,{httpHeaders:c.httpHeaders,withCredentials:c.withCredentials}),this._rangeChunkSize=c.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(c){const e=this._rangeRequestReaders.indexOf(c);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new t(this._manager,this._source),this._fullRequestReader}getRangeReader(c,e){const g=new i(this._manager,c,e);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(c){this._fullRequestReader?.cancel(c);for(const e of this._rangeRequestReaders.slice(0))e.cancel(c)}}a.PDFNetworkStream=r;class t{constructor(c,e){this._manager=c;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=c.requestFull(g),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const c=this._fullRequestId,e=this._manager.getRequestXhr(c),g=w=>e.getResponseHeader(w),{allowRangeRequests:v,suggestedLength:l}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(c),this._headersReceivedCapability.resolve()}_onDone(c){if(c&&(this._requests.length>0?this._requests.shift().resolve({value:c.chunk,done:!1}):this._cachedChunks.push(c.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(c){this._storedError=(0,b.createResponseStatusError)(c,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(c){this.onProgress?.({loaded:c.loaded,total:c.lengthComputable?c.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const c=new h.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0,this._headersReceivedCapability.reject(c);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class i{constructor(c,e,g){this._manager=c;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=c.url,this._requestId=c.requestRange(e,g,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(c){const e=c.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(c){this._storedError=(0,b.createResponseStatusError)(c,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(c){this.isStreamingSupported||this.onProgress?.({loaded:c.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const c=new h.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var h=I(1),b=I(20);const n=/^file:\/\/\/[a-zA-Z]:\//;function M(g){const v=require$$5,l=v.parse(g);return l.protocol==="file:"||l.host?l:/^[a-z]:[/\\]/i.test(g)?v.parse(`file:///${g}`):(l.host||(l.protocol="file:"),l)}class V{constructor(v){this.source=v,this.url=M(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new c(this):new i(this),this._fullRequestReader}getRangeReader(v,l){if(l<=this._progressiveDataLength)return null;const w=this.isFsUrl?new e(this,v,l):new u(this,v,l);return this._rangeRequestReaders.push(w),w}cancelAllRequests(v){this._fullRequestReader?.cancel(v);for(const l of this._rangeRequestReaders.slice(0))l.cancel(v)}}a.PDFNodeStream=V;class q{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;const l=v.source;this._contentLength=l.length,this._loaded=0,this._filename=null,this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._headersCapability=new h.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",l=>{this._error(l)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class r{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new h.PromiseCapability;const l=v.source;this._isStreamingSupported=!l.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",l=>{this._error(l)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function t(g,v){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:v}}class i extends q{constructor(v){super(v);const l=w=>{if(w.statusCode===404){const C=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(w);const x=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:k,suggestedLength:m}=(0,b.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=m||this._contentLength,this._filename=(0,b.extractFilenameFromHeader)(x)};if(this._request=null,this._url.protocol==="http:"){const w=require$$5;this._request=w.request(t(this._url,v.httpHeaders),l)}else{const w=require$$5;this._request=w.request(t(this._url,v.httpHeaders),l)}this._request.on("error",w=>{this._storedError=w,this._headersCapability.reject(w)}),this._request.end()}}class u extends r{constructor(v,l,w){super(v),this._httpHeaders={};for(const k in v.httpHeaders){const m=v.httpHeaders[k];m!==void 0&&(this._httpHeaders[k]=m)}this._httpHeaders.Range=`bytes=${l}-${w-1}`;const x=k=>{if(k.statusCode===404){const m=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m;return}this._setReadableStream(k)};if(this._request=null,this._url.protocol==="http:"){const k=require$$5;this._request=k.request(t(this._url,this._httpHeaders),x)}else{const k=require$$5;this._request=k.request(t(this._url,this._httpHeaders),x)}this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class c extends q{constructor(v){super(v);let l=decodeURIComponent(this._url.path);n.test(this._url.href)&&(l=l.replace(/^\//,""));const w=require$$5;w.lstat(l,(x,k)=>{if(x){x.code==="ENOENT"&&(x=new h.MissingPDFException(`Missing PDF "${l}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=k.size,this._setReadableStream(w.createReadStream(l)),this._headersCapability.resolve()})}}class e extends r{constructor(v,l,w){super(v);let x=decodeURIComponent(this._url.path);n.test(this._url.href)&&(x=x.replace(/^\//,""));const k=require$$5;this._setReadableStream(k.createReadStream(x,{start:l,end:w-1}))}}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var h=I(6),b=I(1);const n={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",V="http://www.w3.org/1999/xlink",q=["butt","round","square"],r=["miter","round","bevel"],t=function(k,m="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([k],{type:m}));const z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let $=`data:${m};base64,`;for(let H=0,tt=k.length;H<tt;H+=3){const nt=k[H]&255,yt=k[H+1]&255,dt=k[H+2]&255,vt=nt>>2,Et=(nt&3)<<4|yt>>4,ct=H+1<tt?(yt&15)<<2|dt>>6:64,O=H+2<tt?dt&63:64;$+=z[vt]+z[Et]+z[ct]+z[O]}return $},i=(function(){const k=new Uint8Array([137,80,78,71,13,10,26,10]),m=12,C=new Int32Array(256);for(let dt=0;dt<256;dt++){let vt=dt;for(let Et=0;Et<8;Et++)vt=vt&1?3988292384^vt>>1&2147483647:vt>>1&2147483647;C[dt]=vt}function z(dt,vt,Et){let ct=-1;for(let O=vt;O<Et;O++){const A=(ct^dt[O])&255,f=C[A];ct=ct>>>8^f}return ct^-1}function $(dt,vt,Et,ct){let O=ct;const A=vt.length;Et[O]=A>>24&255,Et[O+1]=A>>16&255,Et[O+2]=A>>8&255,Et[O+3]=A&255,O+=4,Et[O]=dt.charCodeAt(0)&255,Et[O+1]=dt.charCodeAt(1)&255,Et[O+2]=dt.charCodeAt(2)&255,Et[O+3]=dt.charCodeAt(3)&255,O+=4,Et.set(vt,O),O+=vt.length;const f=z(Et,ct+4,O);Et[O]=f>>24&255,Et[O+1]=f>>16&255,Et[O+2]=f>>8&255,Et[O+3]=f&255}function H(dt,vt,Et){let ct=1,O=0;for(let A=vt;A<Et;++A)ct=(ct+(dt[A]&255))%65521,O=(O+ct)%65521;return O<<16|ct}function tt(dt){if(!b.isNodeJS)return nt(dt);try{const vt=parseInt(process.versions.node)>=8?dt:Buffer.from(dt),Et=require$$5.deflateSync(vt,{level:9});return Et instanceof Uint8Array?Et:new Uint8Array(Et)}catch(vt){(0,b.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+vt)}return nt(dt)}function nt(dt){let vt=dt.length;const Et=65535,ct=Math.ceil(vt/Et),O=new Uint8Array(2+vt+ct*5+4);let A=0;O[A++]=120,O[A++]=156;let f=0;for(;vt>Et;)O[A++]=0,O[A++]=255,O[A++]=255,O[A++]=0,O[A++]=0,O.set(dt.subarray(f,f+Et),A),A+=Et,f+=Et,vt-=Et;O[A++]=1,O[A++]=vt&255,O[A++]=vt>>8&255,O[A++]=~vt&65535&255,O[A++]=(~vt&65535)>>8&255,O.set(dt.subarray(f),A),A+=dt.length-f;const p=H(dt,0,dt.length);return O[A++]=p>>24&255,O[A++]=p>>16&255,O[A++]=p>>8&255,O[A++]=p&255,O}function yt(dt,vt,Et,ct){const O=dt.width,A=dt.height;let f,p,S;const L=dt.data;switch(vt){case b.ImageKind.GRAYSCALE_1BPP:p=0,f=1,S=O+7>>3;break;case b.ImageKind.RGB_24BPP:p=2,f=8,S=O*3;break;case b.ImageKind.RGBA_32BPP:p=6,f=8,S=O*4;break;default:throw new Error("invalid format")}const F=new Uint8Array((1+S)*A);let U=0,T=0;for(let j=0;j<A;++j)F[U++]=0,F.set(L.subarray(T,T+S),U),T+=S,U+=S;if(vt===b.ImageKind.GRAYSCALE_1BPP&&ct){U=0;for(let j=0;j<A;j++){U++;for(let X=0;X<S;X++)F[U++]^=255}}const s=new Uint8Array([O>>24&255,O>>16&255,O>>8&255,O&255,A>>24&255,A>>16&255,A>>8&255,A&255,f,p,0,0,0]),_=tt(F),E=k.length+m*3+s.length+_.length,P=new Uint8Array(E);let R=0;return P.set(k,R),R+=k.length,$("IHDR",s,P,R),R+=m+s.length,$("IDATA",_,P,R),R+=m+_.length,$("IEND",new Uint8Array(0),P,R),t(P,"image/png",Et)}return function(vt,Et,ct){const O=vt.kind===void 0?b.ImageKind.GRAYSCALE_1BPP:vt.kind;return yt(vt,O,Et,ct)}})();class u{constructor(){this.fontSizeScale=1,this.fontWeight=n.fontWeight,this.fontSize=0,this.textMatrix=b.IDENTITY_MATRIX,this.fontMatrix=b.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=b.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=n.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(m,C){this.x=m,this.y=C}}function c(k){let m=[];const C=[];for(const z of k){if(z.fn==="save"){m.push({fnId:92,fn:"group",items:[]}),C.push(m),m=m.at(-1).items;continue}z.fn==="restore"?m=C.pop():m.push(z)}return m}function e(k){if(Number.isInteger(k))return k.toString();const m=k.toFixed(10);let C=m.length-1;if(m[C]!=="0")return m;do C--;while(m[C]==="0");return m.substring(0,m[C]==="."?C:C+1)}function g(k){if(k[4]===0&&k[5]===0){if(k[1]===0&&k[2]===0)return k[0]===1&&k[3]===1?"":`scale(${e(k[0])} ${e(k[3])})`;if(k[0]===k[3]&&k[1]===-k[2]){const m=Math.acos(k[0])*180/Math.PI;return`rotate(${e(m)})`}}else if(k[0]===1&&k[1]===0&&k[2]===0&&k[3]===1)return`translate(${e(k[4])} ${e(k[5])})`;return`matrix(${e(k[0])} ${e(k[1])} ${e(k[2])} ${e(k[3])} ${e(k[4])} ${e(k[5])})`}let v=0,l=0,w=0;class x{constructor(m,C,z=!1){(0,h.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new h.DOMSVGFactory,this.current=new u,this.transformMatrix=b.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=m,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!z,this._operatorIdMapping=[];for(const $ in b.OPS)this._operatorIdMapping[b.OPS[$]]=$}getObject(m,C=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):C}save(){this.transformStack.push(this.transformMatrix);const m=this.current;this.extraStack.push(m),this.current=m.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(m){this.save(),this.executeOpTree(m),this.restore()}loadDependencies(m){const C=m.fnArray,z=m.argsArray;for(let $=0,H=C.length;$<H;$++)if(C[$]===b.OPS.dependency)for(const tt of z[$]){const nt=tt.startsWith("g_")?this.commonObjs:this.objs,yt=new Promise(dt=>{nt.get(tt,dt)});this.current.dependencies.push(yt)}return Promise.all(this.current.dependencies)}transform(m,C,z,$,H,tt){const nt=[m,C,z,$,H,tt];this.transformMatrix=b.Util.transform(this.transformMatrix,nt),this.tgrp=null}getSVG(m,C){this.viewport=C;const z=this._initialize(C);return this.loadDependencies(m).then(()=>(this.transformMatrix=b.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(m)),z))}convertOpList(m){const C=this._operatorIdMapping,z=m.argsArray,$=m.fnArray,H=[];for(let tt=0,nt=$.length;tt<nt;tt++){const yt=$[tt];H.push({fnId:yt,fn:C[yt],args:z[tt]})}return c(H)}executeOpTree(m){for(const C of m){const z=C.fn,$=C.fnId,H=C.args;switch($|0){case b.OPS.beginText:this.beginText();break;case b.OPS.dependency:break;case b.OPS.setLeading:this.setLeading(H);break;case b.OPS.setLeadingMoveText:this.setLeadingMoveText(H[0],H[1]);break;case b.OPS.setFont:this.setFont(H);break;case b.OPS.showText:this.showText(H[0]);break;case b.OPS.showSpacedText:this.showText(H[0]);break;case b.OPS.endText:this.endText();break;case b.OPS.moveText:this.moveText(H[0],H[1]);break;case b.OPS.setCharSpacing:this.setCharSpacing(H[0]);break;case b.OPS.setWordSpacing:this.setWordSpacing(H[0]);break;case b.OPS.setHScale:this.setHScale(H[0]);break;case b.OPS.setTextMatrix:this.setTextMatrix(H[0],H[1],H[2],H[3],H[4],H[5]);break;case b.OPS.setTextRise:this.setTextRise(H[0]);break;case b.OPS.setTextRenderingMode:this.setTextRenderingMode(H[0]);break;case b.OPS.setLineWidth:this.setLineWidth(H[0]);break;case b.OPS.setLineJoin:this.setLineJoin(H[0]);break;case b.OPS.setLineCap:this.setLineCap(H[0]);break;case b.OPS.setMiterLimit:this.setMiterLimit(H[0]);break;case b.OPS.setFillRGBColor:this.setFillRGBColor(H[0],H[1],H[2]);break;case b.OPS.setStrokeRGBColor:this.setStrokeRGBColor(H[0],H[1],H[2]);break;case b.OPS.setStrokeColorN:this.setStrokeColorN(H);break;case b.OPS.setFillColorN:this.setFillColorN(H);break;case b.OPS.shadingFill:this.shadingFill(H[0]);break;case b.OPS.setDash:this.setDash(H[0],H[1]);break;case b.OPS.setRenderingIntent:this.setRenderingIntent(H[0]);break;case b.OPS.setFlatness:this.setFlatness(H[0]);break;case b.OPS.setGState:this.setGState(H[0]);break;case b.OPS.fill:this.fill();break;case b.OPS.eoFill:this.eoFill();break;case b.OPS.stroke:this.stroke();break;case b.OPS.fillStroke:this.fillStroke();break;case b.OPS.eoFillStroke:this.eoFillStroke();break;case b.OPS.clip:this.clip("nonzero");break;case b.OPS.eoClip:this.clip("evenodd");break;case b.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case b.OPS.paintImageXObject:this.paintImageXObject(H[0]);break;case b.OPS.paintInlineImageXObject:this.paintInlineImageXObject(H[0]);break;case b.OPS.paintImageMaskXObject:this.paintImageMaskXObject(H[0]);break;case b.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(H[0],H[1]);break;case b.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case b.OPS.closePath:this.closePath();break;case b.OPS.closeStroke:this.closeStroke();break;case b.OPS.closeFillStroke:this.closeFillStroke();break;case b.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case b.OPS.nextLine:this.nextLine();break;case b.OPS.transform:this.transform(H[0],H[1],H[2],H[3],H[4],H[5]);break;case b.OPS.constructPath:this.constructPath(H[0],H[1]);break;case b.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,b.warn)(`Unimplemented operator ${z}`);break}}}setWordSpacing(m){this.current.wordSpacing=m}setCharSpacing(m){this.current.charSpacing=m}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(m,C,z,$,H,tt){const nt=this.current;nt.textMatrix=nt.lineMatrix=[m,C,z,$,H,tt],nt.textMatrixScale=Math.hypot(m,C),nt.x=nt.lineX=0,nt.y=nt.lineY=0,nt.xcoords=[],nt.ycoords=[],nt.tspan=this.svgFactory.createElement("svg:tspan"),nt.tspan.setAttributeNS(null,"font-family",nt.fontFamily),nt.tspan.setAttributeNS(null,"font-size",`${e(nt.fontSize)}px`),nt.tspan.setAttributeNS(null,"y",e(-nt.y)),nt.txtElement=this.svgFactory.createElement("svg:text"),nt.txtElement.append(nt.tspan)}beginText(){const m=this.current;m.x=m.lineX=0,m.y=m.lineY=0,m.textMatrix=b.IDENTITY_MATRIX,m.lineMatrix=b.IDENTITY_MATRIX,m.textMatrixScale=1,m.tspan=this.svgFactory.createElement("svg:tspan"),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtgrp=this.svgFactory.createElement("svg:g"),m.xcoords=[],m.ycoords=[]}moveText(m,C){const z=this.current;z.x=z.lineX+=m,z.y=z.lineY+=C,z.xcoords=[],z.ycoords=[],z.tspan=this.svgFactory.createElement("svg:tspan"),z.tspan.setAttributeNS(null,"font-family",z.fontFamily),z.tspan.setAttributeNS(null,"font-size",`${e(z.fontSize)}px`),z.tspan.setAttributeNS(null,"y",e(-z.y))}showText(m){const C=this.current,z=C.font,$=C.fontSize;if($===0)return;const H=C.fontSizeScale,tt=C.charSpacing,nt=C.wordSpacing,yt=C.fontDirection,dt=C.textHScale*yt,vt=z.vertical,Et=vt?1:-1,ct=z.defaultVMetrics,O=$*C.fontMatrix[0];let A=0;for(const S of m){if(S===null){A+=yt*nt;continue}else if(typeof S=="number"){A+=Et*S*$/1e3;continue}const L=(S.isSpace?nt:0)+tt,F=S.fontChar;let U,T,s=S.width;if(vt){let E;const P=S.vmetric||ct;E=S.vmetric?P[1]:s*.5,E=-E*O;const R=P[2]*O;s=P?-P[0]:s,U=E/H,T=(A+R)/H}else U=A/H,T=0;(S.isInFont||z.missingFile)&&(C.xcoords.push(C.x+U),vt&&C.ycoords.push(-C.y+T),C.tspan.textContent+=F);const _=vt?s*O-L*yt:s*O+L*yt;A+=_}C.tspan.setAttributeNS(null,"x",C.xcoords.map(e).join(" ")),vt?C.tspan.setAttributeNS(null,"y",C.ycoords.map(e).join(" ")):C.tspan.setAttributeNS(null,"y",e(-C.y)),vt?C.y-=A:C.x+=A*dt,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${e(C.fontSize)}px`),C.fontStyle!==n.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==n.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);const f=C.textRenderingMode&b.TextRenderingMode.FILL_STROKE_MASK;if(f===b.TextRenderingMode.FILL||f===b.TextRenderingMode.FILL_STROKE?(C.fillColor!==n.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===b.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),f===b.TextRenderingMode.STROKE||f===b.TextRenderingMode.FILL_STROKE){const S=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,S)}let p=C.textMatrix;C.textRise!==0&&(p=p.slice(),p[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${g(p)} scale(${e(dt)}, -1)`),C.txtElement.setAttributeNS(M,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(m,C){this.setLeading(-C),this.moveText(m,C)}addFontStyle(m){if(!m.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const C=t(m.data,m.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${m.loadedName}"; src: url(${C}); }
`}setFont(m){const C=this.current,z=this.commonObjs.get(m[0]);let $=m[1];C.font=z,this.embedFonts&&!z.missingFile&&!this.embeddedFonts[z.loadedName]&&(this.addFontStyle(z),this.embeddedFonts[z.loadedName]=z),C.fontMatrix=z.fontMatrix||b.FONT_IDENTITY_MATRIX;let H="normal";z.black?H="900":z.bold&&(H="bold");const tt=z.italic?"italic":"normal";$<0?($=-$,C.fontDirection=-1):C.fontDirection=1,C.fontSize=$,C.fontFamily=z.loadedName,C.fontWeight=H,C.fontStyle=tt,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",e(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){const m=this.current;m.textRenderingMode&b.TextRenderingMode.ADD_TO_PATH_FLAG&&m.txtElement?.hasChildNodes()&&(m.element=m.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(m){m>0&&(this.current.lineWidth=m)}setLineCap(m){this.current.lineCap=q[m]}setLineJoin(m){this.current.lineJoin=r[m]}setMiterLimit(m){this.current.miterLimit=m}setStrokeAlpha(m){this.current.strokeAlpha=m}setStrokeRGBColor(m,C,z){this.current.strokeColor=b.Util.makeHexColor(m,C,z)}setFillAlpha(m){this.current.fillAlpha=m}setFillRGBColor(m,C,z){this.current.fillColor=b.Util.makeHexColor(m,C,z),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(m){this.current.strokeColor=this._makeColorN_Pattern(m)}setFillColorN(m){this.current.fillColor=this._makeColorN_Pattern(m)}shadingFill(m){const{width:C,height:z}=this.viewport,$=b.Util.inverseTransform(this.transformMatrix),[H,tt,nt,yt]=b.Util.getAxialAlignedBoundingBox([0,0,C,z],$),dt=this.svgFactory.createElement("svg:rect");dt.setAttributeNS(null,"x",H),dt.setAttributeNS(null,"y",tt),dt.setAttributeNS(null,"width",nt-H),dt.setAttributeNS(null,"height",yt-tt),dt.setAttributeNS(null,"fill",this._makeShadingPattern(m)),this.current.fillAlpha<1&&dt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(dt)}_makeColorN_Pattern(m){return m[0]==="TilingPattern"?this._makeTilingPattern(m):this._makeShadingPattern(m)}_makeTilingPattern(m){const C=m[1],z=m[2],$=m[3]||b.IDENTITY_MATRIX,[H,tt,nt,yt]=m[4],dt=m[5],vt=m[6],Et=m[7],ct=`shading${w++}`,[O,A,f,p]=b.Util.normalizeRect([...b.Util.applyTransform([H,tt],$),...b.Util.applyTransform([nt,yt],$)]),[S,L]=b.Util.singularValueDecompose2dScale($),F=dt*S,U=vt*L,T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",ct),T.setAttributeNS(null,"patternUnits","userSpaceOnUse"),T.setAttributeNS(null,"width",F),T.setAttributeNS(null,"height",U),T.setAttributeNS(null,"x",`${O}`),T.setAttributeNS(null,"y",`${A}`);const s=this.svg,_=this.transformMatrix,E=this.current.fillColor,P=this.current.strokeColor,R=this.svgFactory.create(f-O,p-A);if(this.svg=R,this.transformMatrix=$,Et===2){const j=b.Util.makeHexColor(...C);this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(z)),this.svg=s,this.transformMatrix=_,this.current.fillColor=E,this.current.strokeColor=P,T.append(R.childNodes[0]),this.defs.append(T),`url(#${ct})`}_makeShadingPattern(m){switch(typeof m=="string"&&(m=this.objs.get(m)),m[0]){case"RadialAxial":const C=`shading${w++}`,z=m[3];let $;switch(m[1]){case"axial":const H=m[4],tt=m[5];$=this.svgFactory.createElement("svg:linearGradient"),$.setAttributeNS(null,"id",C),$.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),$.setAttributeNS(null,"x1",H[0]),$.setAttributeNS(null,"y1",H[1]),$.setAttributeNS(null,"x2",tt[0]),$.setAttributeNS(null,"y2",tt[1]);break;case"radial":const nt=m[4],yt=m[5],dt=m[6],vt=m[7];$=this.svgFactory.createElement("svg:radialGradient"),$.setAttributeNS(null,"id",C),$.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),$.setAttributeNS(null,"cx",yt[0]),$.setAttributeNS(null,"cy",yt[1]),$.setAttributeNS(null,"r",vt),$.setAttributeNS(null,"fx",nt[0]),$.setAttributeNS(null,"fy",nt[1]),$.setAttributeNS(null,"fr",dt);break;default:throw new Error(`Unknown RadialAxial type: ${m[1]}`)}for(const H of z){const tt=this.svgFactory.createElement("svg:stop");tt.setAttributeNS(null,"offset",H[0]),tt.setAttributeNS(null,"stop-color",H[1]),$.append(tt)}return this.defs.append($),`url(#${C})`;case"Mesh":return(0,b.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${m[0]}`)}}setDash(m,C){this.current.dashArray=m,this.current.dashPhase=C}constructPath(m,C){const z=this.current;let $=z.x,H=z.y,tt=[],nt=0;for(const yt of m)switch(yt|0){case b.OPS.rectangle:$=C[nt++],H=C[nt++];const dt=C[nt++],vt=C[nt++],Et=$+dt,ct=H+vt;tt.push("M",e($),e(H),"L",e(Et),e(H),"L",e(Et),e(ct),"L",e($),e(ct),"Z");break;case b.OPS.moveTo:$=C[nt++],H=C[nt++],tt.push("M",e($),e(H));break;case b.OPS.lineTo:$=C[nt++],H=C[nt++],tt.push("L",e($),e(H));break;case b.OPS.curveTo:$=C[nt+4],H=C[nt+5],tt.push("C",e(C[nt]),e(C[nt+1]),e(C[nt+2]),e(C[nt+3]),e($),e(H)),nt+=6;break;case b.OPS.curveTo2:tt.push("C",e($),e(H),e(C[nt]),e(C[nt+1]),e(C[nt+2]),e(C[nt+3])),$=C[nt+2],H=C[nt+3],nt+=4;break;case b.OPS.curveTo3:$=C[nt+2],H=C[nt+3],tt.push("C",e(C[nt]),e(C[nt+1]),e($),e(H),e($),e(H)),nt+=4;break;case b.OPS.closePath:tt.push("Z");break}tt=tt.join(" "),z.path&&m.length>0&&m[0]!==b.OPS.rectangle&&m[0]!==b.OPS.moveTo?tt=z.path.getAttributeNS(null,"d")+tt:(z.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(z.path)),z.path.setAttributeNS(null,"d",tt),z.path.setAttributeNS(null,"fill","none"),z.element=z.path,z.setCurrentPoint($,H)}endPath(){const m=this.current;if(m.path=null,!this.pendingClip)return;if(!m.element){this.pendingClip=null;return}const C=`clippath${v++}`,z=this.svgFactory.createElement("svg:clipPath");z.setAttributeNS(null,"id",C),z.setAttributeNS(null,"transform",g(this.transformMatrix));const $=m.element.cloneNode(!0);if(this.pendingClip==="evenodd"?$.setAttributeNS(null,"clip-rule","evenodd"):$.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,z.append($),this.defs.append(z),m.activeClipUrl){m.clipGroup=null;for(const H of this.extraStack)H.clipGroup=null;z.setAttributeNS(null,"clip-path",m.activeClipUrl)}m.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(m){this.pendingClip=m}closePath(){const m=this.current;if(m.path){const C=`${m.path.getAttributeNS(null,"d")}Z`;m.path.setAttributeNS(null,"d",C)}}setLeading(m){this.current.leading=-m}setTextRise(m){this.current.textRise=m}setTextRenderingMode(m){this.current.textRenderingMode=m}setHScale(m){this.current.textHScale=m/100}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[C,z]of m)switch(C){case"LW":this.setLineWidth(z);break;case"LC":this.setLineCap(z);break;case"LJ":this.setLineJoin(z);break;case"ML":this.setMiterLimit(z);break;case"D":this.setDash(z[0],z[1]);break;case"RI":this.setRenderingIntent(z);break;case"FL":this.setFlatness(z);break;case"Font":this.setFont(z);break;case"CA":this.setStrokeAlpha(z);break;case"ca":this.setFillAlpha(z);break;default:(0,b.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){const m=this.current;m.element&&(m.element.setAttributeNS(null,"fill",m.fillColor),m.element.setAttributeNS(null,"fill-opacity",m.fillAlpha),this.endPath())}stroke(){const m=this.current;m.element&&(this._setStrokeAttributes(m.element),m.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(m,C=1){const z=this.current;let $=z.dashArray;C!==1&&$.length>0&&($=$.map(function(H){return C*H})),m.setAttributeNS(null,"stroke",z.strokeColor),m.setAttributeNS(null,"stroke-opacity",z.strokeAlpha),m.setAttributeNS(null,"stroke-miterlimit",e(z.miterLimit)),m.setAttributeNS(null,"stroke-linecap",z.lineCap),m.setAttributeNS(null,"stroke-linejoin",z.lineJoin),m.setAttributeNS(null,"stroke-width",e(C*z.lineWidth)+"px"),m.setAttributeNS(null,"stroke-dasharray",$.map(e).join(" ")),m.setAttributeNS(null,"stroke-dashoffset",e(C*z.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width","1px"),m.setAttributeNS(null,"height","1px"),m.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(m)}paintImageXObject(m){const C=this.getObject(m);if(!C){(0,b.warn)(`Dependent image with object ID ${m} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(m,C){const z=m.width,$=m.height,H=i(m,this.forceDataSchema,!!C),tt=this.svgFactory.createElement("svg:rect");tt.setAttributeNS(null,"x","0"),tt.setAttributeNS(null,"y","0"),tt.setAttributeNS(null,"width",e(z)),tt.setAttributeNS(null,"height",e($)),this.current.element=tt,this.clip("nonzero");const nt=this.svgFactory.createElement("svg:image");nt.setAttributeNS(V,"xlink:href",H),nt.setAttributeNS(null,"x","0"),nt.setAttributeNS(null,"y",e(-$)),nt.setAttributeNS(null,"width",e(z)+"px"),nt.setAttributeNS(null,"height",e($)+"px"),nt.setAttributeNS(null,"transform",`scale(${e(1/z)} ${e(-1/$)})`),C?C.append(nt):this._ensureTransformGroup().append(nt)}paintImageMaskXObject(m){const C=this.getObject(m.data,m);if(C.bitmap){(0,b.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const z=this.current,$=C.width,H=C.height,tt=z.fillColor;z.maskId=`mask${l++}`;const nt=this.svgFactory.createElement("svg:mask");nt.setAttributeNS(null,"id",z.maskId);const yt=this.svgFactory.createElement("svg:rect");yt.setAttributeNS(null,"x","0"),yt.setAttributeNS(null,"y","0"),yt.setAttributeNS(null,"width",e($)),yt.setAttributeNS(null,"height",e(H)),yt.setAttributeNS(null,"fill",tt),yt.setAttributeNS(null,"mask",`url(#${z.maskId})`),this.defs.append(nt),this._ensureTransformGroup().append(yt),this.paintInlineImageXObject(C,nt)}paintFormXObjectBegin(m,C){if(Array.isArray(m)&&m.length===6&&this.transform(m[0],m[1],m[2],m[3],m[4],m[5]),C){const z=C[2]-C[0],$=C[3]-C[1],H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x",C[0]),H.setAttributeNS(null,"y",C[1]),H.setAttributeNS(null,"width",e(z)),H.setAttributeNS(null,"height",e($)),this.current.element=H,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(m){const C=this.svgFactory.create(m.width,m.height),z=this.svgFactory.createElement("svg:defs");C.append(z),this.defs=z;const $=this.svgFactory.createElement("svg:g");return $.setAttributeNS(null,"transform",g(m.transform)),C.append($),this.svg=$,C}_ensureClipGroup(){if(!this.current.clipGroup){const m=this.svgFactory.createElement("svg:g");m.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(m),this.current.clipGroup=m}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}a.SVGGraphics=x}),((d,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class I{static textContent(b){const n=[],M={items:n,styles:Object.create(null)};function V(q){if(!q)return;let r=null;const t=q.name;if(t==="#text")r=q.value;else if(I.shouldBuildText(t))q?.attributes?.textContent?r=q.attributes.textContent:q.value&&(r=q.value);else return;if(r!==null&&n.push({str:r}),!!q.children)for(const i of q.children)V(i)}return V(b),M}static shouldBuildText(b){return!(b==="textarea"||b==="input"||b==="option"||b==="select")}}a.XfaText=I}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextLayerRenderTask=void 0,a.renderTextLayer=g,a.updateTextLayer=v;var h=I(1),b=I(6);const n=1e5,M=30,V=.8,q=new Map;function r(l,w){let x;if(w&&h.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(l,l).getContext("2d",{alpha:!1});else{const k=document.createElement("canvas");k.width=k.height=l,x=k.getContext("2d",{alpha:!1})}return x}function t(l,w){const x=q.get(l);if(x)return x;const k=r(M,w);k.font=`${M}px ${l}`;const m=k.measureText("");let C=m.fontBoundingBoxAscent,z=Math.abs(m.fontBoundingBoxDescent);if(C){const H=C/(C+z);return q.set(l,H),k.canvas.width=k.canvas.height=0,H}k.strokeStyle="red",k.clearRect(0,0,M,M),k.strokeText("g",0,0);let $=k.getImageData(0,0,M,M).data;z=0;for(let H=$.length-1-3;H>=0;H-=4)if($[H]>0){z=Math.ceil(H/4/M);break}k.clearRect(0,0,M,M),k.strokeText("A",0,M),$=k.getImageData(0,0,M,M).data,C=0;for(let H=0,tt=$.length;H<tt;H+=4)if($[H]>0){C=M-Math.floor(H/4/M);break}if(k.canvas.width=k.canvas.height=0,C){const H=C/(C+z);return q.set(l,H),H}return q.set(l,V),V}function i(l,w,x){const k=document.createElement("span"),m={angle:0,canvasWidth:0,hasText:w.str!=="",hasEOL:w.hasEOL,fontSize:0};l._textDivs.push(k);const C=h.Util.transform(l._transform,w.transform);let z=Math.atan2(C[1],C[0]);const $=x[w.fontName];$.vertical&&(z+=Math.PI/2);const H=Math.hypot(C[2],C[3]),tt=H*t($.fontFamily,l._isOffscreenCanvasSupported);let nt,yt;z===0?(nt=C[4],yt=C[5]-tt):(nt=C[4]+tt*Math.sin(z),yt=C[5]-tt*Math.cos(z));const dt="calc(var(--scale-factor)*",vt=k.style;l._container===l._rootContainer?(vt.left=`${(100*nt/l._pageWidth).toFixed(2)}%`,vt.top=`${(100*yt/l._pageHeight).toFixed(2)}%`):(vt.left=`${dt}${nt.toFixed(2)}px)`,vt.top=`${dt}${yt.toFixed(2)}px)`),vt.fontSize=`${dt}${H.toFixed(2)}px)`,vt.fontFamily=$.fontFamily,m.fontSize=H,k.setAttribute("role","presentation"),k.textContent=w.str,k.dir=w.dir,l._fontInspectorEnabled&&(k.dataset.fontName=w.fontName),z!==0&&(m.angle=z*(180/Math.PI));let Et=!1;if(w.str.length>1)Et=!0;else if(w.str!==" "&&w.transform[0]!==w.transform[3]){const ct=Math.abs(w.transform[0]),O=Math.abs(w.transform[3]);ct!==O&&Math.max(ct,O)/Math.min(ct,O)>1.5&&(Et=!0)}Et&&(m.canvasWidth=$.vertical?w.height:w.width),l._textDivProperties.set(k,m),l._isReadableStream&&l._layoutText(k)}function u(l){const{div:w,scale:x,properties:k,ctx:m,prevFontSize:C,prevFontFamily:z}=l,{style:$}=w;let H="";if(k.canvasWidth!==0&&k.hasText){const{fontFamily:tt}=$,{canvasWidth:nt,fontSize:yt}=k;(C!==yt||z!==tt)&&(m.font=`${yt*x}px ${tt}`,l.prevFontSize=yt,l.prevFontFamily=tt);const{width:dt}=m.measureText(w.textContent);dt>0&&(H=`scaleX(${nt*x/dt})`)}k.angle!==0&&(H=`rotate(${k.angle}deg) ${H}`),H.length>0&&($.transform=H)}function c(l){if(l._canceled)return;const w=l._textDivs,x=l._capability;if(w.length>n){x.resolve();return}if(!l._isReadableStream)for(const m of w)l._layoutText(m);x.resolve()}class e{constructor({textContentSource:w,container:x,viewport:k,textDivs:m,textDivProperties:C,textContentItemsStr:z,isOffscreenCanvasSupported:$}){this._textContentSource=w,this._isReadableStream=w instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=m||[],this._textContentItemsStr=z||[],this._isOffscreenCanvasSupported=$,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:r(0,$)};const{pageWidth:H,pageHeight:tt,pageX:nt,pageY:yt}=k.rawDims;this._transform=[1,0,0,-1,-nt,yt+tt],this._pageWidth=H,this._pageHeight=tt,(0,b.setLayerDimensions)(x,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(w,x){for(const k of w){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){const m=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),m.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),i(this,k,x)}}_layoutText(w){const x=this._layoutTextParams.properties=this._textDivProperties.get(w);if(this._layoutTextParams.div=w,u(this._layoutTextParams),x.hasText&&this._container.append(w),x.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){const w=new h.PromiseCapability;let x=Object.create(null);if(this._isReadableStream){const k=()=>{this._reader.read().then(({value:m,done:C})=>{if(C){w.resolve();return}Object.assign(x,m.styles),this._processItems(m.items,x),k()},w.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){const{items:k,styles:m}=this._textContentSource;this._processItems(k,m),w.resolve()}else throw new Error('No "textContentSource" parameter specified.');w.promise.then(()=>{x=null,c(this)},this._capability.reject)}}a.TextLayerRenderTask=e;function g(l){!l.textContentSource&&(l.textContent||l.textContentStream)&&((0,b.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),l.textContentSource=l.textContent||l.textContentStream);const{container:w,viewport:x}=l,k=getComputedStyle(w),m=k.getPropertyValue("visibility"),C=parseFloat(k.getPropertyValue("--scale-factor"));m==="visible"&&(!C||Math.abs(C-x.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const z=new e(l);return z._render(),z}function v({container:l,viewport:w,textDivs:x,textDivProperties:k,isOffscreenCanvasSupported:m,mustRotate:C=!0,mustRescale:z=!0}){if(C&&(0,b.setLayerDimensions)(l,{rotation:w.rotation}),z){const $=r(0,m),tt={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:$};for(const nt of x)tt.properties=k.get(nt),tt.div=nt,u(tt)}}}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditorLayer=void 0;var h=I(1),b=I(4),n=I(28),M=I(33),V=I(6),q=I(34);class r{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#a=new Map;#s=!1;#l=!1;#c=!1;#r;static _initialized=!1;constructor({uiManager:i,pageIndex:u,div:c,accessibilityManager:e,annotationLayer:g,viewport:v,l10n:l}){const w=[n.FreeTextEditor,M.InkEditor,q.StampEditor];if(!r._initialized){r._initialized=!0;for(const x of w)x.initialize(l)}i.registerEditorTypes(w),this.#r=i,this.pageIndex=u,this.div=c,this.#t=e,this.#n=g,this.viewport=v,this.#r.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(i){this.#r.updateToolbar(i)}updateMode(i=this.#r.getMode()){this.#p(),i===h.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),i!==h.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",i===h.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",i===h.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",i===h.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(i){if(!i&&this.#r.getMode()!==h.AnnotationEditorType.INK)return;if(!i){for(const c of this.#a.values())if(c.isEmpty()){c.setInBackground();return}}this.#u({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(i){this.#r.setEditingState(i)}addCommands(i){this.#r.addCommands(i)}enable(){this.div.style.pointerEvents="auto";const i=new Set;for(const c of this.#a.values())c.enableEditing(),c.annotationElementId&&i.add(c.annotationElementId);if(!this.#n)return;const u=this.#n.getEditableAnnotations();for(const c of u){if(c.hide(),this.#r.isDeletedAnnotationElement(c.data.id)||i.has(c.data.id))continue;const e=this.deserialize(c);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const i=new Set;for(const u of this.#a.values()){if(u.disableEditing(),!u.annotationElementId||u.serialize()!==null){i.add(u.annotationElementId);continue}this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}if(this.#n){const u=this.#n.getEditableAnnotations();for(const c of u){const{id:e}=c.data;i.has(e)||this.#r.isDeletedAnnotationElement(e)||c.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(i){return this.#n?.getEditableAnnotation(i)||null}setActiveEditor(i){this.#r.getActive()!==i&&this.#r.setActiveEditor(i)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(i){this.#a.set(i.id,i);const{annotationElementId:u}=i;u&&this.#r.isDeletedAnnotationElement(u)&&this.#r.removeDeletedAnnotationElement(i)}detach(i){this.#a.delete(i.id),this.#t?.removePointerInTextLayer(i.contentDiv),!this.#c&&i.annotationElementId&&this.#r.addDeletedAnnotationElement(i)}remove(i){this.detach(i),this.#r.removeEditor(i),i.div.contains(document.activeElement)&&setTimeout(()=>{this.#r.focusMainContainer()},0),i.div.remove(),i.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(i){i.parent!==this&&(i.annotationElementId&&(this.#r.addDeletedAnnotationElement(i.annotationElementId),b.AnnotationEditor.deleteAnnotationElement(i),i.annotationElementId=null),this.attach(i),i.parent?.detach(i),i.setParent(this),i.div&&i.isAttachedToDOM&&(i.div.remove(),this.div.append(i.div)))}add(i){if(this.changeParent(i),this.#r.addEditor(i),this.attach(i),!i.isAttachedToDOM){const u=i.render();this.div.append(u),i.isAttachedToDOM=!0}i.fixAndSetPosition(),i.onceAdded(),this.#r.addToAnnotationStorage(i)}moveEditorInDOM(i){if(!i.isAttachedToDOM)return;const{activeElement:u}=document;i.div.contains(u)&&(i._focusEventsAllowed=!1,setTimeout(()=>{i.div.contains(document.activeElement)?i._focusEventsAllowed=!0:(i.div.addEventListener("focusin",()=>{i._focusEventsAllowed=!0},{once:!0}),u.focus())},0)),i._structTreeParentId=this.#t?.moveElementInDOM(this.div,i.div,i.contentDiv,!0)}addOrRebuild(i){i.needsToBeRebuilt()?i.rebuild():this.add(i)}addUndoableEditor(i){const u=()=>i._uiManager.rebuild(i),c=()=>{i.remove()};this.addCommands({cmd:u,undo:c,mustExec:!1})}getNextId(){return this.#r.getId()}#f(i){switch(this.#r.getMode()){case h.AnnotationEditorType.FREETEXT:return new n.FreeTextEditor(i);case h.AnnotationEditorType.INK:return new M.InkEditor(i);case h.AnnotationEditorType.STAMP:return new q.StampEditor(i)}return null}pasteEditor(i,u){this.#r.updateToolbar(i),this.#r.updateMode(i);const{offsetX:c,offsetY:e}=this.#d(),g=this.getNextId(),v=this.#f({parent:this,id:g,x:c,y:e,uiManager:this.#r,isCentered:!0,...u});v&&this.add(v)}deserialize(i){switch(i.annotationType??i.annotationEditorType){case h.AnnotationEditorType.FREETEXT:return n.FreeTextEditor.deserialize(i,this,this.#r);case h.AnnotationEditorType.INK:return M.InkEditor.deserialize(i,this,this.#r);case h.AnnotationEditorType.STAMP:return q.StampEditor.deserialize(i,this,this.#r)}return null}#u(i,u){const c=this.getNextId(),e=this.#f({parent:this,id:c,x:i.offsetX,y:i.offsetY,uiManager:this.#r,isCentered:u});return e&&this.add(e),e}#d(){const{x:i,y:u,width:c,height:e}=this.div.getBoundingClientRect(),g=Math.max(0,i),v=Math.max(0,u),l=Math.min(window.innerWidth,i+c),w=Math.min(window.innerHeight,u+e),x=(g+l)/2-i,k=(v+w)/2-u,[m,C]=this.viewport.rotation%180===0?[x,k]:[k,x];return{offsetX:m,offsetY:C}}addNewEditor(){this.#u(this.#d(),!0)}setSelected(i){this.#r.setSelected(i)}toggleSelected(i){this.#r.toggleSelected(i)}isSelected(i){return this.#r.isSelected(i)}unselect(i){this.#r.unselect(i)}pointerup(i){const{isMac:u}=h.FeatureTest.platform;if(!(i.button!==0||i.ctrlKey&&u)&&i.target===this.div&&this.#s){if(this.#s=!1,!this.#e){this.#e=!0;return}if(this.#r.getMode()===h.AnnotationEditorType.STAMP){this.#r.unselectAll();return}this.#u(i,!1)}}pointerdown(i){if(this.#s){this.#s=!1;return}const{isMac:u}=h.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&u||i.target!==this.div)return;this.#s=!0;const c=this.#r.getActive();this.#e=!c||c.isEmpty()}findNewParent(i,u,c){const e=this.#r.findParent(u,c);return e===null||e===this?!1:(e.changeParent(i),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null));for(const i of this.#a.values())this.#t?.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,this.#a.clear(),this.#r.removeLayer(this)}#p(){this.#l=!0;for(const i of this.#a.values())i.isEmpty()&&i.remove();this.#l=!1}render({viewport:i}){this.viewport=i,(0,V.setLayerDimensions)(this.div,i);for(const u of this.#r.getEditors(this.pageIndex))this.add(u);this.updateMode()}update({viewport:i}){this.#r.commitOrRemove(),this.viewport=i,(0,V.setLayerDimensions)(this.div,{rotation:i.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:i,pageHeight:u}=this.viewport.rawDims;return[i,u]}}a.AnnotationEditorLayer=r}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FreeTextEditor=void 0;var h=I(1),b=I(5),n=I(4),M=I(29);class V extends n.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#a="";#s=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const r=V.prototype,t=c=>c.isEmpty(),i=b.AnnotationEditorUIManager.TRANSLATE_SMALL,u=b.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new b.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],r.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],r._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r._translateEmpty,{args:[-u,0],checker:t}],[["ArrowRight","mac+ArrowRight"],r._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r._translateEmpty,{args:[u,0],checker:t}],[["ArrowUp","mac+ArrowUp"],r._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r._translateEmpty,{args:[0,-u],checker:t}],[["ArrowDown","mac+ArrowDown"],r._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r._translateEmpty,{args:[0,u],checker:t}]]))}static _type="freetext";constructor(r){super({...r,name:"freeTextEditor"}),this.#o=r.color||V._defaultColor||n.AnnotationEditor._defaultLineColor,this.#l=r.fontSize||V._defaultFontSize}static initialize(r){n.AnnotationEditor.initialize(r,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(r,t){switch(r){case h.AnnotationEditorParamsType.FREETEXT_SIZE:V._defaultFontSize=t;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:V._defaultColor=t;break}}updateParams(r,t){switch(r){case h.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(t);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(t);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,V._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,V._defaultColor||n.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[h.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#r(r){const t=u=>{this.editorDiv.style.fontSize=`calc(${u}px * var(--scale-factor))`,this.translate(0,-(u-this.#l)*this.parentScale),this.#l=u,this.#d()},i=this.#l;this.addCommands({cmd:()=>{t(r)},undo:()=>{t(i)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(r){const t=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=r},undo:()=>{this.#o=this.editorDiv.style.color=t},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(r,t){this._uiManager.translateSelectedEditors(r,t,!0)}getInitialTranslation(){const r=this.parentScale;return[-V._internalPadding*r,-(V._internalPadding+this.#l)*r]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(r){this._focusEventsAllowed&&(super.focusin(r),r.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#u(){const r=this.editorDiv.getElementsByTagName("div");if(r.length===0)return this.editorDiv.innerText;const t=[];for(const i of r)t.push(i.innerText.replace(/\r\n?|\n/,""));return t.join(`
`)}#d(){const[r,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:u,div:c}=this,e=c.style.display;c.style.display="hidden",u.div.append(this.div),i=c.getBoundingClientRect(),c.remove(),c.style.display=e}this.rotation%180===this.parentRotation%180?(this.width=i.width/r,this.height=i.height/t):(this.width=i.height/r,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const r=this.#a,t=this.#a=this.#u().trimEnd();if(r===t)return;const i=u=>{if(this.#a=u,!u){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(r)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(r){this.enterInEditMode()}keydown(r){r.target===this.div&&r.key==="Enter"&&(this.enterInEditMode(),r.preventDefault())}editorDivKeydown(r){V._keyboardManager.exec(this,r)}editorDivFocus(r){this.isEditing=!0}editorDivBlur(r){this.isEditing=!1}editorDivInput(r){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let r,t;this.width&&(r=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),n.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(u=>this.editorDiv?.setAttribute("aria-label",u)),n.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(u=>this.editorDiv?.setAttribute("default-content",u)),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#l}px * var(--scale-factor))`,i.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,b.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[u,c]=this.parentDimensions;if(this.annotationElementId){const{position:e}=this.#c;let[g,v]=this.getInitialTranslation();[g,v]=this.pageTranslationToScreen(g,v);const[l,w]=this.pageDimensions,[x,k]=this.pageTranslation;let m,C;switch(this.rotation){case 0:m=r+(e[0]-x)/l,C=t+this.height-(e[1]-k)/w;break;case 90:m=r+(e[0]-x)/l,C=t-(e[1]-k)/w,[g,v]=[v,-g];break;case 180:m=r-this.width+(e[0]-x)/l,C=t-(e[1]-k)/w,[g,v]=[-g,-v];break;case 270:m=r+(e[0]-x-this.height*w)/l,C=t+(e[1]-k-this.width*l)/w,[g,v]=[-v,g];break}this.setAt(m*u,C*c,g,v)}else this.setAt(r*u,t*c,this.width*u,this.height*c);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#a)for(const r of this.#a.split(`
`)){const t=document.createElement("div");t.append(r?document.createTextNode(r):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(r,t,i){let u=null;if(r instanceof M.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:e,fontColor:g},rect:v,rotation:l,id:w},textContent:x,textPosition:k,parent:{page:{pageNumber:m}}}=r;if(!x||x.length===0)return null;u=r={annotationType:h.AnnotationEditorType.FREETEXT,color:Array.from(g),fontSize:e,value:x.join(`
`),position:k,pageIndex:m-1,rect:v,rotation:l,id:w,deleted:!1}}const c=super.deserialize(r,t,i);return c.#l=r.fontSize,c.#o=h.Util.makeHexColor(...r.color),c.#a=r.value,c.annotationElementId=r.id||null,c.#c=u,c}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=V._internalPadding*this.parentScale,i=this.getRect(t,t),u=n.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),c={annotationType:h.AnnotationEditorType.FREETEXT,color:u,fontSize:this.#l,value:this.#a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return r?c:this.annotationElementId&&!this.#v(c)?null:(c.id=this.annotationElementId,c)}#v(r){const{value:t,fontSize:i,color:u,rect:c,pageIndex:e}=this.#c;return r.value!==t||r.fontSize!==i||r.rect.some((g,v)=>Math.abs(g-c[v])>=1)||r.color.some((g,v)=>g!==u[v])||r.pageIndex!==e}#m(r=!1){if(!this.annotationElementId)return;if(this.#d(),!r&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const t=V._internalPadding*this.parentScale;this.#c.rect=this.getRect(t,t)}}a.FreeTextEditor=V}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StampAnnotationElement=a.InkAnnotationElement=a.FreeTextAnnotationElement=a.AnnotationLayer=void 0;var h=I(1),b=I(6),n=I(3),M=I(30),V=I(31),q=I(32);const r=1e3,t=9,i=new WeakSet;function u(T){return{width:T[2]-T[0],height:T[3]-T[1]}}class c{static create(s){switch(s.data.annotationType){case h.AnnotationType.LINK:return new g(s);case h.AnnotationType.TEXT:return new v(s);case h.AnnotationType.WIDGET:switch(s.data.fieldType){case"Tx":return new w(s);case"Btn":return s.data.radioButton?new m(s):s.data.checkBox?new k(s):new C(s);case"Ch":return new z(s);case"Sig":return new x(s)}return new l(s);case h.AnnotationType.POPUP:return new $(s);case h.AnnotationType.FREETEXT:return new tt(s);case h.AnnotationType.LINE:return new nt(s);case h.AnnotationType.SQUARE:return new yt(s);case h.AnnotationType.CIRCLE:return new dt(s);case h.AnnotationType.POLYLINE:return new vt(s);case h.AnnotationType.CARET:return new ct(s);case h.AnnotationType.INK:return new O(s);case h.AnnotationType.POLYGON:return new Et(s);case h.AnnotationType.HIGHLIGHT:return new A(s);case h.AnnotationType.UNDERLINE:return new f(s);case h.AnnotationType.SQUIGGLY:return new p(s);case h.AnnotationType.STRIKEOUT:return new S(s);case h.AnnotationType.STAMP:return new L(s);case h.AnnotationType.FILEATTACHMENT:return new F(s);default:return new e(s)}}}class e{#t=!1;constructor(s,{isRenderable:_=!1,ignoreBorder:E=!1,createQuadrilaterals:P=!1}={}){this.isRenderable=_,this.data=s.data,this.layer=s.layer,this.linkService=s.linkService,this.downloadManager=s.downloadManager,this.imageResourcesPath=s.imageResourcesPath,this.renderForms=s.renderForms,this.svgFactory=s.svgFactory,this.annotationStorage=s.annotationStorage,this.enableScripting=s.enableScripting,this.hasJSActions=s.hasJSActions,this._fieldObjects=s.fieldObjects,this.parent=s.parent,_&&(this.container=this._createContainer(E)),P&&this._createQuadrilaterals()}static _hasPopupData({titleObj:s,contentsObj:_,richText:E}){return!!(s?.str||_?.str||E?.str)}get hasPopupData(){return e._hasPopupData(this.data)}_createContainer(s){const{data:_,parent:{page:E,viewport:P}}=this,R=document.createElement("section");R.setAttribute("data-annotation-id",_.id),this instanceof l||(R.tabIndex=r),R.style.zIndex=this.parent.zIndex++,this.data.popupRef&&R.setAttribute("aria-haspopup","dialog"),_.noRotate&&R.classList.add("norotate");const{pageWidth:j,pageHeight:X,pageX:it,pageY:At}=P.rawDims;if(!_.rect||this instanceof $){const{rotation:gt}=_;return!_.hasOwnCanvas&&gt!==0&&this.setRotation(gt,R),R}const{width:rt,height:st}=u(_.rect),ht=h.Util.normalizeRect([_.rect[0],E.view[3]-_.rect[1]+E.view[1],_.rect[2],E.view[3]-_.rect[3]+E.view[1]]);if(!s&&_.borderStyle.width>0){R.style.borderWidth=`${_.borderStyle.width}px`;const gt=_.borderStyle.horizontalCornerRadius,Ct=_.borderStyle.verticalCornerRadius;if(gt>0||Ct>0){const Bt=`calc(${gt}px * var(--scale-factor)) / calc(${Ct}px * var(--scale-factor))`;R.style.borderRadius=Bt}else if(this instanceof m){const Bt=`calc(${rt}px * var(--scale-factor)) / calc(${st}px * var(--scale-factor))`;R.style.borderRadius=Bt}switch(_.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:R.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:R.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:R.style.borderBottomStyle="solid";break}const Lt=_.borderColor||null;Lt?(this.#t=!0,R.style.borderColor=h.Util.makeHexColor(Lt[0]|0,Lt[1]|0,Lt[2]|0)):R.style.borderWidth=0}R.style.left=`${100*(ht[0]-it)/j}%`,R.style.top=`${100*(ht[1]-At)/X}%`;const{rotation:ut}=_;return _.hasOwnCanvas||ut===0?(R.style.width=`${100*rt/j}%`,R.style.height=`${100*st/X}%`):this.setRotation(ut,R),R}setRotation(s,_=this.container){if(!this.data.rect)return;const{pageWidth:E,pageHeight:P}=this.parent.viewport.rawDims,{width:R,height:j}=u(this.data.rect);let X,it;s%180===0?(X=100*R/E,it=100*j/P):(X=100*j/E,it=100*R/P),_.style.width=`${X}%`,_.style.height=`${it}%`,_.setAttribute("data-main-rotation",(360-s)%360)}get _commonActions(){const s=(_,E,P)=>{const R=P.detail[_],j=R[0],X=R.slice(1);P.target.style[E]=M.ColorConverters[`${j}_HTML`](X),this.annotationStorage.setValue(this.data.id,{[E]:M.ColorConverters[`${j}_rgb`](X)})};return(0,h.shadow)(this,"_commonActions",{display:_=>{const{display:E}=_.detail,P=E%2===1;this.container.style.visibility=P?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:P,noPrint:E===1||E===2})},print:_=>{this.annotationStorage.setValue(this.data.id,{noPrint:!_.detail.print})},hidden:_=>{const{hidden:E}=_.detail;this.container.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:E,noView:E})},focus:_=>{setTimeout(()=>_.target.focus({preventScroll:!1}),0)},userName:_=>{_.target.title=_.detail.userName},readonly:_=>{_.target.disabled=_.detail.readonly},required:_=>{this._setRequired(_.target,_.detail.required)},bgColor:_=>{s("bgColor","backgroundColor",_)},fillColor:_=>{s("fillColor","backgroundColor",_)},fgColor:_=>{s("fgColor","color",_)},textColor:_=>{s("textColor","color",_)},borderColor:_=>{s("borderColor","borderColor",_)},strokeColor:_=>{s("strokeColor","borderColor",_)},rotation:_=>{const E=_.detail.rotation;this.setRotation(E),this.annotationStorage.setValue(this.data.id,{rotation:E})}})}_dispatchEventFromSandbox(s,_){const E=this._commonActions;for(const P of Object.keys(_.detail))(s[P]||E[P])?.(_)}_setDefaultPropertiesFromJS(s){if(!this.enableScripting)return;const _=this.annotationStorage.getRawValue(this.data.id);if(!_)return;const E=this._commonActions;for(const[P,R]of Object.entries(_)){const j=E[P];if(j){const X={detail:{[P]:R},target:s};j(X),delete _[P]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:s}=this.data;if(!s)return;const[_,E,P,R]=this.data.rect;if(s.length===1){const[,{x:Ct,y:Lt},{x:Bt,y:Xt}]=s[0];if(P===Ct&&R===Lt&&_===Bt&&E===Xt)return}const{style:j}=this.container;let X;if(this.#t){const{borderColor:Ct,borderWidth:Lt}=j;j.borderWidth=0,X=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ct}" stroke-width="${Lt}">`],this.container.classList.add("hasBorder")}const it=P-_,At=R-E,{svgFactory:rt}=this,st=rt.createElement("svg");st.classList.add("quadrilateralsContainer"),st.setAttribute("width",0),st.setAttribute("height",0);const ht=rt.createElement("defs");st.append(ht);const ut=rt.createElement("clipPath"),gt=`clippath_${this.data.id}`;ut.setAttribute("id",gt),ut.setAttribute("clipPathUnits","objectBoundingBox"),ht.append(ut);for(const[,{x:Ct,y:Lt},{x:Bt,y:Xt}]of s){const $t=rt.createElement("rect"),ne=(Bt-_)/it,Me=(R-Lt)/At,Ae=(Ct-Bt)/it,Ue=(Lt-Xt)/At;$t.setAttribute("x",ne),$t.setAttribute("y",Me),$t.setAttribute("width",Ae),$t.setAttribute("height",Ue),ut.append($t),X?.push(`<rect vector-effect="non-scaling-stroke" x="${ne}" y="${Me}" width="${Ae}" height="${Ue}"/>`)}this.#t&&(X.push("</g></svg>')"),j.backgroundImage=X.join("")),this.container.append(st),this.container.style.clipPath=`url(#${gt})`}_createPopup(){const{container:s,data:_}=this;s.setAttribute("aria-haspopup","dialog");const E=new $({data:{color:_.color,titleObj:_.titleObj,modificationDate:_.modificationDate,contentsObj:_.contentsObj,richText:_.richText,parentRect:_.rect,borderStyle:0,id:`popup_${_.id}`,rotation:_.rotation},parent:this.parent,elements:[this]});this.parent.div.append(E.render())}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(s,_=null){const E=[];if(this._fieldObjects){const P=this._fieldObjects[s];if(P)for(const{page:R,id:j,exportValues:X}of P){if(R===-1||j===_)continue;const it=typeof X=="string"?X:null,At=document.querySelector(`[data-element-id="${j}"]`);if(At&&!i.has(At)){(0,h.warn)(`_getElementsByName - element not allowed: ${j}`);continue}E.push({id:j,exportValue:it,domElement:At})}return E}for(const P of document.getElementsByName(s)){const{exportValue:R}=P,j=P.getAttribute("data-element-id");j!==_&&i.has(P)&&E.push({id:j,exportValue:R,domElement:P})}return E}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const s=this.getElementsToTriggerPopup();if(Array.isArray(s))for(const _ of s)_.classList.add("highlightArea");else s.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:s,data:{id:_}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:s,editId:_})})}}class g extends e{constructor(s,_=null){super(s,{isRenderable:!0,ignoreBorder:!!_?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:_}=this,E=document.createElement("a");E.setAttribute("data-element-id",s.id);let P=!1;return s.url?(_.addLinkAttributes(E,s.url,s.newWindow),P=!0):s.action?(this._bindNamedAction(E,s.action),P=!0):s.attachment?(this._bindAttachment(E,s.attachment),P=!0):s.setOCGState?(this.#e(E,s.setOCGState),P=!0):s.dest?(this._bindLink(E,s.dest),P=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(E,s),P=!0),s.resetForm?(this._bindResetFormAction(E,s.resetForm),P=!0):this.isTooltipOnly&&!P&&(this._bindLink(E,""),P=!0)),this.container.classList.add("linkAnnotation"),P&&this.container.append(E),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(s,_){s.href=this.linkService.getDestinationHash(_),s.onclick=()=>(_&&this.linkService.goToDestination(_),!1),(_||_==="")&&this.#t()}_bindNamedAction(s,_){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(_),!1),this.#t()}_bindAttachment(s,_){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,_.content,_.filename),!1),this.#t()}#e(s,_){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(_),!1),this.#t()}_bindJSAction(s,_){s.href=this.linkService.getAnchorUrl("");const E=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const P of Object.keys(_.actions)){const R=E.get(P);R&&(s[R]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_.id,name:P}}),!1))}s.onclick||(s.onclick=()=>!1),this.#t()}_bindResetFormAction(s,_){const E=s.onclick;if(E||(s.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),E||(s.onclick=()=>!1);return}s.onclick=()=>{E?.();const{fields:P,refs:R,include:j}=_,X=[];if(P.length!==0||R.length!==0){const rt=new Set(R);for(const st of P){const ht=this._fieldObjects[st]||[];for(const{id:ut}of ht)rt.add(ut)}for(const st of Object.values(this._fieldObjects))for(const ht of st)rt.has(ht.id)===j&&X.push(ht)}else for(const rt of Object.values(this._fieldObjects))X.push(...rt);const it=this.annotationStorage,At=[];for(const rt of X){const{id:st}=rt;switch(At.push(st),rt.type){case"text":{const ut=rt.defaultValue||"";it.setValue(st,{value:ut});break}case"checkbox":case"radiobutton":{const ut=rt.defaultValue===rt.exportValues;it.setValue(st,{value:ut});break}case"combobox":case"listbox":{const ut=rt.defaultValue||"";it.setValue(st,{value:ut});break}default:continue}const ht=document.querySelector(`[data-element-id="${st}"]`);if(ht){if(!i.has(ht)){(0,h.warn)(`_bindResetFormAction - element not allowed: ${st}`);continue}}else continue;ht.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:At,name:"ResetForm"}}),!1}}}class v extends e{constructor(s){super(s,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const s=document.createElement("img");return s.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",s.alt="[{{type}} Annotation]",s.dataset.l10nId="text_annotation_type",s.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(s),this.container}}class l extends e{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(s){this.data.hasOwnCanvas&&(s.previousSibling?.nodeName==="CANVAS"&&(s.previousSibling.hidden=!0),s.hidden=!1)}_getKeyModifier(s){const{isWin:_,isMac:E}=h.FeatureTest.platform;return _&&s.ctrlKey||E&&s.metaKey}_setEventListener(s,_,E,P,R){E.includes("mouse")?s.addEventListener(E,j=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:P,value:R(j),shift:j.shiftKey,modifier:this._getKeyModifier(j)}})}):s.addEventListener(E,j=>{if(E==="blur"){if(!_.focused||!j.relatedTarget)return;_.focused=!1}else if(E==="focus"){if(_.focused)return;_.focused=!0}R&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:P,value:R(j)}})})}_setEventListeners(s,_,E,P){for(const[R,j]of E)(j==="Action"||this.data.actions?.[j])&&((j==="Focus"||j==="Blur")&&(_||={focused:!1}),this._setEventListener(s,_,R,j,P),j==="Focus"&&!this.data.actions?.Blur?this._setEventListener(s,_,"blur","Blur",null):j==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(s,_,"focus","Focus",null))}_setBackgroundColor(s){const _=this.data.backgroundColor||null;s.style.backgroundColor=_===null?"transparent":h.Util.makeHexColor(_[0],_[1],_[2])}_setTextStyle(s){const _=["left","center","right"],{fontColor:E}=this.data.defaultAppearanceData,P=this.data.defaultAppearanceData.fontSize||t,R=s.style;let j;const X=2,it=At=>Math.round(10*At)/10;if(this.data.multiLine){const At=Math.abs(this.data.rect[3]-this.data.rect[1]-X),rt=Math.round(At/(h.LINE_FACTOR*P))||1,st=At/rt;j=Math.min(P,it(st/h.LINE_FACTOR))}else{const At=Math.abs(this.data.rect[3]-this.data.rect[1]-X);j=Math.min(P,it(At/h.LINE_FACTOR))}R.fontSize=`calc(${j}px * var(--scale-factor))`,R.color=h.Util.makeHexColor(E[0],E[1],E[2]),this.data.textAlignment!==null&&(R.textAlign=_[this.data.textAlignment])}_setRequired(s,_){_?s.setAttribute("required",!0):s.removeAttribute("required"),s.setAttribute("aria-required",_)}}class w extends l{constructor(s){const _=s.renderForms||!s.data.hasAppearance&&!!s.data.fieldValue;super(s,{isRenderable:_})}setPropertyOnSiblings(s,_,E,P){const R=this.annotationStorage;for(const j of this._getElementsByName(s.name,s.id))j.domElement&&(j.domElement[_]=E),R.setValue(j.id,{[P]:E})}render(){const s=this.annotationStorage,_=this.data.id;this.container.classList.add("textWidgetAnnotation");let E=null;if(this.renderForms){const P=s.getValue(_,{value:this.data.fieldValue});let R=P.value||"";const j=s.getValue(_,{charLimit:this.data.maxLen}).charLimit;j&&R.length>j&&(R=R.slice(0,j));let X=P.formattedValue||this.data.textContent?.join(`
`)||null;X&&this.data.comb&&(X=X.replaceAll(/\s+/g,""));const it={userValue:R,formattedValue:X,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(E=document.createElement("textarea"),E.textContent=X??R,this.data.doNotScroll&&(E.style.overflowY="hidden")):(E=document.createElement("input"),E.type="text",E.setAttribute("value",X??R),this.data.doNotScroll&&(E.style.overflowX="hidden")),this.data.hasOwnCanvas&&(E.hidden=!0),i.add(E),E.setAttribute("data-element-id",_),E.disabled=this.data.readOnly,E.name=this.data.fieldName,E.tabIndex=r,this._setRequired(E,this.data.required),j&&(E.maxLength=j),E.addEventListener("input",rt=>{s.setValue(_,{value:rt.target.value}),this.setPropertyOnSiblings(E,"value",rt.target.value,"value"),it.formattedValue=null}),E.addEventListener("resetform",rt=>{const st=this.data.defaultFieldValue??"";E.value=it.userValue=st,it.formattedValue=null});let At=rt=>{const{formattedValue:st}=it;st!=null&&(rt.target.value=st),rt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){E.addEventListener("focus",st=>{if(it.focused)return;const{target:ht}=st;it.userValue&&(ht.value=it.userValue),it.lastCommittedValue=ht.value,it.commitKey=1,it.focused=!0}),E.addEventListener("updatefromsandbox",st=>{this.showElementAndHideCanvas(st.target);const ht={value(ut){it.userValue=ut.detail.value??"",s.setValue(_,{value:it.userValue.toString()}),ut.target.value=it.userValue},formattedValue(ut){const{formattedValue:gt}=ut.detail;it.formattedValue=gt,gt!=null&&ut.target!==document.activeElement&&(ut.target.value=gt),s.setValue(_,{formattedValue:gt})},selRange(ut){ut.target.setSelectionRange(...ut.detail.selRange)},charLimit:ut=>{const{charLimit:gt}=ut.detail,{target:Ct}=ut;if(gt===0){Ct.removeAttribute("maxLength");return}Ct.setAttribute("maxLength",gt);let Lt=it.userValue;!Lt||Lt.length<=gt||(Lt=Lt.slice(0,gt),Ct.value=it.userValue=Lt,s.setValue(_,{value:Lt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:Lt,willCommit:!0,commitKey:1,selStart:Ct.selectionStart,selEnd:Ct.selectionEnd}}))}};this._dispatchEventFromSandbox(ht,st)}),E.addEventListener("keydown",st=>{it.commitKey=1;let ht=-1;if(st.key==="Escape"?ht=0:st.key==="Enter"&&!this.data.multiLine?ht=2:st.key==="Tab"&&(it.commitKey=3),ht===-1)return;const{value:ut}=st.target;it.lastCommittedValue!==ut&&(it.lastCommittedValue=ut,it.userValue=ut,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:ut,willCommit:!0,commitKey:ht,selStart:st.target.selectionStart,selEnd:st.target.selectionEnd}}))});const rt=At;At=null,E.addEventListener("blur",st=>{if(!it.focused||!st.relatedTarget)return;it.focused=!1;const{value:ht}=st.target;it.userValue=ht,it.lastCommittedValue!==ht&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:ht,willCommit:!0,commitKey:it.commitKey,selStart:st.target.selectionStart,selEnd:st.target.selectionEnd}}),rt(st)}),this.data.actions?.Keystroke&&E.addEventListener("beforeinput",st=>{it.lastCommittedValue=null;const{data:ht,target:ut}=st,{value:gt,selectionStart:Ct,selectionEnd:Lt}=ut;let Bt=Ct,Xt=Lt;switch(st.inputType){case"deleteWordBackward":{const $t=gt.substring(0,Ct).match(/\w*[^\w]*$/);$t&&(Bt-=$t[0].length);break}case"deleteWordForward":{const $t=gt.substring(Ct).match(/^[^\w]*\w*/);$t&&(Xt+=$t[0].length);break}case"deleteContentBackward":Ct===Lt&&(Bt-=1);break;case"deleteContentForward":Ct===Lt&&(Xt+=1);break}st.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:gt,change:ht||"",willCommit:!1,selStart:Bt,selEnd:Xt}})}),this._setEventListeners(E,it,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],st=>st.target.value)}if(At&&E.addEventListener("blur",At),this.data.comb){const st=(this.data.rect[2]-this.data.rect[0])/j;E.classList.add("comb"),E.style.letterSpacing=`calc(${st}px * var(--scale-factor) - 1ch)`}}else E=document.createElement("div"),E.textContent=this.data.fieldValue,E.style.verticalAlign="middle",E.style.display="table-cell";return this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class x extends l{constructor(s){super(s,{isRenderable:!!s.data.hasOwnCanvas})}}class k extends l{constructor(s){super(s,{isRenderable:s.renderForms})}render(){const s=this.annotationStorage,_=this.data,E=_.id;let P=s.getValue(E,{value:_.exportValue===_.fieldValue}).value;typeof P=="string"&&(P=P!=="Off",s.setValue(E,{value:P})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const R=document.createElement("input");return i.add(R),R.setAttribute("data-element-id",E),R.disabled=_.readOnly,this._setRequired(R,this.data.required),R.type="checkbox",R.name=_.fieldName,P&&R.setAttribute("checked",!0),R.setAttribute("exportValue",_.exportValue),R.tabIndex=r,R.addEventListener("change",j=>{const{name:X,checked:it}=j.target;for(const At of this._getElementsByName(X,E)){const rt=it&&At.exportValue===_.exportValue;At.domElement&&(At.domElement.checked=rt),s.setValue(At.id,{value:rt})}s.setValue(E,{value:it})}),R.addEventListener("resetform",j=>{const X=_.defaultFieldValue||"Off";j.target.checked=X===_.exportValue}),this.enableScripting&&this.hasJSActions&&(R.addEventListener("updatefromsandbox",j=>{const X={value(it){it.target.checked=it.detail.value!=="Off",s.setValue(E,{value:it.target.checked})}};this._dispatchEventFromSandbox(X,j)}),this._setEventListeners(R,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.checked)),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class m extends l{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const s=this.annotationStorage,_=this.data,E=_.id;let P=s.getValue(E,{value:_.fieldValue===_.buttonValue}).value;typeof P=="string"&&(P=P!==_.buttonValue,s.setValue(E,{value:P}));const R=document.createElement("input");if(i.add(R),R.setAttribute("data-element-id",E),R.disabled=_.readOnly,this._setRequired(R,this.data.required),R.type="radio",R.name=_.fieldName,P&&R.setAttribute("checked",!0),R.tabIndex=r,R.addEventListener("change",j=>{const{name:X,checked:it}=j.target;for(const At of this._getElementsByName(X,E))s.setValue(At.id,{value:!1});s.setValue(E,{value:it})}),R.addEventListener("resetform",j=>{const X=_.defaultFieldValue;j.target.checked=X!=null&&X===_.buttonValue}),this.enableScripting&&this.hasJSActions){const j=_.buttonValue;R.addEventListener("updatefromsandbox",X=>{const it={value:At=>{const rt=j===At.detail.value;for(const st of this._getElementsByName(At.target.name)){const ht=rt&&st.id===E;st.domElement&&(st.domElement.checked=ht),s.setValue(st.id,{value:ht})}}};this._dispatchEventFromSandbox(it,X)}),this._setEventListeners(R,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)}return this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class C extends g{constructor(s){super(s,{ignoreBorder:s.data.hasAppearance})}render(){const s=super.render();s.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(s.title=this.data.alternativeText);const _=s.lastChild;return this.enableScripting&&this.hasJSActions&&_&&(this._setDefaultPropertiesFromJS(_),_.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({},E)})),s}}class z extends l{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const s=this.annotationStorage,_=this.data.id,E=s.getValue(_,{value:this.data.fieldValue}),P=document.createElement("select");i.add(P),P.setAttribute("data-element-id",_),P.disabled=this.data.readOnly,this._setRequired(P,this.data.required),P.name=this.data.fieldName,P.tabIndex=r;let R=this.data.combo&&this.data.options.length>0;this.data.combo||(P.size=this.data.options.length,this.data.multiSelect&&(P.multiple=!0)),P.addEventListener("resetform",rt=>{const st=this.data.defaultFieldValue;for(const ht of P.options)ht.selected=ht.value===st});for(const rt of this.data.options){const st=document.createElement("option");st.textContent=rt.displayValue,st.value=rt.exportValue,E.value.includes(rt.exportValue)&&(st.setAttribute("selected",!0),R=!1),P.append(st)}let j=null;if(R){const rt=document.createElement("option");rt.value=" ",rt.setAttribute("hidden",!0),rt.setAttribute("selected",!0),P.prepend(rt),j=()=>{rt.remove(),P.removeEventListener("input",j),j=null},P.addEventListener("input",j)}const X=rt=>{const st=rt?"value":"textContent",{options:ht,multiple:ut}=P;return ut?Array.prototype.filter.call(ht,gt=>gt.selected).map(gt=>gt[st]):ht.selectedIndex===-1?null:ht[ht.selectedIndex][st]};let it=X(!1);const At=rt=>{const st=rt.target.options;return Array.prototype.map.call(st,ht=>({displayValue:ht.textContent,exportValue:ht.value}))};return this.enableScripting&&this.hasJSActions?(P.addEventListener("updatefromsandbox",rt=>{const st={value(ht){j?.();const ut=ht.detail.value,gt=new Set(Array.isArray(ut)?ut:[ut]);for(const Ct of P.options)Ct.selected=gt.has(Ct.value);s.setValue(_,{value:X(!0)}),it=X(!1)},multipleSelection(ht){P.multiple=!0},remove(ht){const ut=P.options,gt=ht.detail.remove;ut[gt].selected=!1,P.remove(gt),ut.length>0&&Array.prototype.findIndex.call(ut,Lt=>Lt.selected)===-1&&(ut[0].selected=!0),s.setValue(_,{value:X(!0),items:At(ht)}),it=X(!1)},clear(ht){for(;P.length!==0;)P.remove(0);s.setValue(_,{value:null,items:[]}),it=X(!1)},insert(ht){const{index:ut,displayValue:gt,exportValue:Ct}=ht.detail.insert,Lt=P.children[ut],Bt=document.createElement("option");Bt.textContent=gt,Bt.value=Ct,Lt?Lt.before(Bt):P.append(Bt),s.setValue(_,{value:X(!0),items:At(ht)}),it=X(!1)},items(ht){const{items:ut}=ht.detail;for(;P.length!==0;)P.remove(0);for(const gt of ut){const{displayValue:Ct,exportValue:Lt}=gt,Bt=document.createElement("option");Bt.textContent=Ct,Bt.value=Lt,P.append(Bt)}P.options.length>0&&(P.options[0].selected=!0),s.setValue(_,{value:X(!0),items:At(ht)}),it=X(!1)},indices(ht){const ut=new Set(ht.detail.indices);for(const gt of ht.target.options)gt.selected=ut.has(gt.index);s.setValue(_,{value:X(!0)}),it=X(!1)},editable(ht){ht.target.disabled=!ht.detail.editable}};this._dispatchEventFromSandbox(st,rt)}),P.addEventListener("input",rt=>{const st=X(!0);s.setValue(_,{value:st}),rt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:it,changeEx:st,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(P,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],rt=>rt.target.value)):P.addEventListener("input",function(rt){s.setValue(_,{value:X(!0)})}),this.data.combo&&this._setTextStyle(P),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class $ extends e{constructor(s){const{data:_,elements:E}=s;super(s,{isRenderable:e._hasPopupData(_)}),this.elements=E}render(){this.container.classList.add("popupAnnotation");const s=new H({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),_=[];for(const E of this.elements)E.popup=s,_.push(E.data.id),E.addHighlightArea();return this.container.setAttribute("aria-controls",_.map(E=>`${h.AnnotationPrefix}${E}`).join(",")),this.container}}class H{#t=null;#e=this.#h.bind(this);#n=this.#S.bind(this);#i=this.#E.bind(this);#o=this.#b.bind(this);#a=null;#s=null;#l=null;#c=null;#r=null;#f=null;#u=!1;#d=null;#p=null;#v=null;#m=null;#g=!1;constructor({container:s,color:_,elements:E,titleObj:P,modificationDate:R,contentsObj:j,richText:X,parent:it,rect:At,parentRect:rt,open:st}){this.#s=s,this.#m=P,this.#l=j,this.#v=X,this.#r=it,this.#a=_,this.#p=At,this.#f=rt,this.#c=E;const ht=b.PDFDateString.toDateObject(R);ht&&(this.#t=it.l10n.get("annotation_date_string",{date:ht.toLocaleDateString(),time:ht.toLocaleTimeString()})),this.trigger=E.flatMap(ut=>ut.getElementsToTriggerPopup());for(const ut of this.trigger)ut.addEventListener("click",this.#o),ut.addEventListener("mouseenter",this.#i),ut.addEventListener("mouseleave",this.#n),ut.classList.add("popupTriggerArea");for(const ut of E)ut.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,st&&this.#b()}render(){if(this.#d)return;const{page:{view:s},viewport:{rawDims:{pageWidth:_,pageHeight:E,pageX:P,pageY:R}}}=this.#r,j=this.#d=document.createElement("div");if(j.className="popup",this.#a){const $t=j.style.outlineColor=h.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?j.style.backgroundColor=`color-mix(in srgb, ${$t} 30%, white)`:j.style.backgroundColor=h.Util.makeHexColor(...this.#a.map(Me=>Math.floor(.7*(255-Me)+Me)))}const X=document.createElement("span");X.className="header";const it=document.createElement("h1");if(X.append(it),{dir:it.dir,str:it.textContent}=this.#m,j.append(X),this.#t){const $t=document.createElement("span");$t.classList.add("popupDate"),this.#t.then(ne=>{$t.textContent=ne}),X.append($t)}const At=this.#l,rt=this.#v;if(rt?.str&&(!At?.str||At.str===rt.str))q.XfaLayer.render({xfaHtml:rt.html,intent:"richText",div:j}),j.lastChild.classList.add("richText","popupContent");else{const $t=this._formatContents(At);j.append($t)}let st=!!this.#f,ht=st?this.#f:this.#p;for(const $t of this.#c)if(!ht||h.Util.intersect($t.data.rect,ht)!==null){ht=$t.data.rect,st=!0;break}const ut=h.Util.normalizeRect([ht[0],s[3]-ht[1]+s[1],ht[2],s[3]-ht[3]+s[1]]),Ct=st?ht[2]-ht[0]+5:0,Lt=ut[0]+Ct,Bt=ut[1],{style:Xt}=this.#s;Xt.left=`${100*(Lt-P)/_}%`,Xt.top=`${100*(Bt-R)/E}%`,this.#s.append(j)}_formatContents({str:s,dir:_}){const E=document.createElement("p");E.classList.add("popupContent"),E.dir=_;const P=s.split(/(?:\r\n?|\n)/);for(let R=0,j=P.length;R<j;++R){const X=P[R];E.append(document.createTextNode(X)),R<j-1&&E.append(document.createElement("br"))}return E}#h(s){s.altKey||s.shiftKey||s.ctrlKey||s.metaKey||(s.key==="Enter"||s.key==="Escape"&&this.#u)&&this.#b()}#b(){this.#u=!this.#u,this.#u?(this.#E(),this.#s.addEventListener("click",this.#o),this.#s.addEventListener("keydown",this.#e)):(this.#S(),this.#s.removeEventListener("click",this.#o),this.#s.removeEventListener("keydown",this.#e))}#E(){this.#d||this.render(),this.isVisible?this.#u&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class tt extends e{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0}),this.textContent=s.data.textContent,this.textPosition=s.data.textPosition,this.annotationEditorType=h.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const s=document.createElement("div");s.classList.add("annotationTextContent"),s.setAttribute("role","comment");for(const _ of this.textContent){const E=document.createElement("span");E.textContent=_,s.append(E)}this.container.append(s)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}a.FreeTextAnnotationElement=tt;class nt extends e{#t=null;constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:_,height:E}=u(s.rect),P=this.svgFactory.create(_,E,!0),R=this.#t=this.svgFactory.createElement("svg:line");return R.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),R.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),R.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),R.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),R.setAttribute("stroke-width",s.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),P.append(R),this.container.append(P),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class yt extends e{#t=null;constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:_,height:E}=u(s.rect),P=this.svgFactory.create(_,E,!0),R=s.borderStyle.width,j=this.#t=this.svgFactory.createElement("svg:rect");return j.setAttribute("x",R/2),j.setAttribute("y",R/2),j.setAttribute("width",_-R),j.setAttribute("height",E-R),j.setAttribute("stroke-width",R||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),P.append(j),this.container.append(P),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dt extends e{#t=null;constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:_,height:E}=u(s.rect),P=this.svgFactory.create(_,E,!0),R=s.borderStyle.width,j=this.#t=this.svgFactory.createElement("svg:ellipse");return j.setAttribute("cx",_/2),j.setAttribute("cy",E/2),j.setAttribute("rx",_/2-R/2),j.setAttribute("ry",E/2-R/2),j.setAttribute("stroke-width",R||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),P.append(j),this.container.append(P),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vt extends e{#t=null;constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:_,height:E}=u(s.rect),P=this.svgFactory.create(_,E,!0);let R=[];for(const X of s.vertices){const it=X.x-s.rect[0],At=s.rect[3]-X.y;R.push(it+","+At)}R=R.join(" ");const j=this.#t=this.svgFactory.createElement(this.svgElementName);return j.setAttribute("points",R),j.setAttribute("stroke-width",s.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),P.append(j),this.container.append(P),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Et extends vt{constructor(s){super(s),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ct extends e{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class O extends e{#t=[];constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=h.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:_,height:E}=u(s.rect),P=this.svgFactory.create(_,E,!0);for(const R of s.inkLists){let j=[];for(const it of R){const At=it.x-s.rect[0],rt=s.rect[3]-it.y;j.push(`${At},${rt}`)}j=j.join(" ");const X=this.svgFactory.createElement(this.svgElementName);this.#t.push(X),X.setAttribute("points",j),X.setAttribute("stroke-width",s.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),!s.popupRef&&this.hasPopupData&&this._createPopup(),P.append(X)}return this.container.append(P),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}a.InkAnnotationElement=O;class A extends e{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class f extends e{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class p extends e{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class S extends e{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class L extends e{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}a.StampAnnotationElement=L;class F extends e{#t=null;constructor(s){super(s,{isRenderable:!0});const{filename:_,content:E}=this.data.file;this.filename=(0,b.getFilenameFromUrl)(_,!0),this.content=E,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:_,content:E})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:_}=this;let E;_.hasAppearance||_.fillAlpha===0?E=document.createElement("div"):(E=document.createElement("img"),E.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_.name)?"paperclip":"pushpin"}.svg`,_.fillAlpha&&_.fillAlpha<1&&(E.style=`filter: opacity(${Math.round(_.fillAlpha*100)}%);`)),E.addEventListener("dblclick",this.#e.bind(this)),this.#t=E;const{isMac:P}=h.FeatureTest.platform;return s.addEventListener("keydown",R=>{R.key==="Enter"&&(P?R.metaKey:R.ctrlKey)&&this.#e()}),!_.popupRef&&this.hasPopupData?this._createPopup():E.classList.add("popupTriggerArea"),s.append(E),s}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class U{#t=null;#e=null;#n=new Map;constructor({div:s,accessibilityManager:_,annotationCanvasMap:E,l10n:P,page:R,viewport:j}){this.div=s,this.#t=_,this.#e=E,this.l10n=P,this.page=R,this.viewport=j,this.zIndex=0,this.l10n||=V.NullL10n}#i(s,_){const E=s.firstChild||s;E.id=`${h.AnnotationPrefix}${_}`,this.div.append(s),this.#t?.moveElementInDOM(this.div,s,E,!1)}async render(s){const{annotations:_}=s,E=this.div;(0,b.setLayerDimensions)(E,this.viewport);const P=new Map,R={data:null,layer:E,linkService:s.linkService,downloadManager:s.downloadManager,imageResourcesPath:s.imageResourcesPath||"",renderForms:s.renderForms!==!1,svgFactory:new b.DOMSVGFactory,annotationStorage:s.annotationStorage||new n.AnnotationStorage,enableScripting:s.enableScripting===!0,hasJSActions:s.hasJSActions,fieldObjects:s.fieldObjects,parent:this,elements:null};for(const j of _){if(j.noHTML)continue;const X=j.annotationType===h.AnnotationType.POPUP;if(X){const rt=P.get(j.id);if(!rt)continue;R.elements=rt}else{const{width:rt,height:st}=u(j.rect);if(rt<=0||st<=0)continue}R.data=j;const it=c.create(R);if(!it.isRenderable)continue;if(!X&&j.popupRef){const rt=P.get(j.popupRef);rt?rt.push(it):P.set(j.popupRef,[it])}it.annotationEditorType>0&&this.#n.set(it.data.id,it);const At=it.render();j.hidden&&(At.style.visibility="hidden"),this.#i(At,j.id)}this.#o(),await this.l10n.translate(E)}update({viewport:s}){const _=this.div;this.viewport=s,(0,b.setLayerDimensions)(_,{rotation:s.rotation}),this.#o(),_.hidden=!1}#o(){if(!this.#e)return;const s=this.div;for(const[_,E]of this.#e){const P=s.querySelector(`[data-annotation-id="${_}"]`);if(!P)continue;const{firstChild:R}=P;R?R.nodeName==="CANVAS"?R.replaceWith(E):R.before(E):P.append(E)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(s){return this.#n.get(s)}}a.AnnotationLayer=U}),((d,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0;function I(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function h(n){return Math.max(0,Math.min(255,255*n))}class b{static CMYK_G([M,V,q,r]){return["G",1-Math.min(1,.3*M+.59*q+.11*V+r)]}static G_CMYK([M]){return["CMYK",0,0,0,1-M]}static G_RGB([M]){return["RGB",M,M,M]}static G_rgb([M]){return M=h(M),[M,M,M]}static G_HTML([M]){const V=I(M);return`#${V}${V}${V}`}static RGB_G([M,V,q]){return["G",.3*M+.59*V+.11*q]}static RGB_rgb(M){return M.map(h)}static RGB_HTML(M){return`#${M.map(I).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([M,V,q,r]){return["RGB",1-Math.min(1,M+r),1-Math.min(1,q+r),1-Math.min(1,V+r)]}static CMYK_rgb([M,V,q,r]){return[h(1-Math.min(1,M+r)),h(1-Math.min(1,q+r)),h(1-Math.min(1,V+r))]}static CMYK_HTML(M){const V=this.CMYK_RGB(M).slice(1);return this.RGB_HTML(V)}static RGB_CMYK([M,V,q]){const r=1-M,t=1-V,i=1-q,u=Math.min(r,t,i);return["CMYK",r,t,i,u]}}a.ColorConverters=b}),((d,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NullL10n=void 0,a.getL10nFallback=h;const I={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};I.print_progress_percent="{{progress}}%";function h(M,V){switch(M){case"find_match_count":M=`find_match_count[${V.total===1?"one":"other"}]`;break;case"find_match_count_limit":M=`find_match_count_limit[${V.limit===1?"one":"other"}]`;break}return I[M]||""}function b(M,V){return V?M.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(q,r)=>r in V?V[r]:"{{"+r+"}}"):M}const n={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(M,V=null,q=h(M,V)){return b(q,V)},async translate(M){}};a.NullL10n=n}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var h=I(25);class b{static setupStorage(M,V,q,r,t){const i=r.getValue(V,{value:null});switch(q.name){case"textarea":if(i.value!==null&&(M.textContent=i.value),t==="print")break;M.addEventListener("input",u=>{r.setValue(V,{value:u.target.value})});break;case"input":if(q.attributes.type==="radio"||q.attributes.type==="checkbox"){if(i.value===q.attributes.xfaOn?M.setAttribute("checked",!0):i.value===q.attributes.xfaOff&&M.removeAttribute("checked"),t==="print")break;M.addEventListener("change",u=>{r.setValue(V,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(i.value!==null&&M.setAttribute("value",i.value),t==="print")break;M.addEventListener("input",u=>{r.setValue(V,{value:u.target.value})})}break;case"select":if(i.value!==null){M.setAttribute("value",i.value);for(const u of q.children)u.attributes.value===i.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}M.addEventListener("input",u=>{const c=u.target.options,e=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(V,{value:e})});break}}static setAttributes({html:M,element:V,storage:q=null,intent:r,linkService:t}){const{attributes:i}=V,u=M instanceof HTMLAnchorElement;i.type==="radio"&&(i.name=`${i.name}-${r}`);for(const[c,e]of Object.entries(i))if(e!=null)switch(c){case"class":e.length&&M.setAttribute(c,e.join(" "));break;case"dataId":break;case"id":M.setAttribute("data-element-id",e);break;case"style":Object.assign(M.style,e);break;case"textContent":M.textContent=e;break;default:(!u||c!=="href"&&c!=="newWindow")&&M.setAttribute(c,e)}u&&t.addLinkAttributes(M,i.href,i.newWindow),q&&i.dataId&&this.setupStorage(M,i.dataId,V,q)}static render(M){const V=M.annotationStorage,q=M.linkService,r=M.xfaHtml,t=M.intent||"display",i=document.createElement(r.name);r.attributes&&this.setAttributes({html:i,element:r,intent:t,linkService:q});const u=[[r,-1,i]],c=M.div;if(c.append(i),M.viewport){const g=`matrix(${M.viewport.transform.join(",")})`;c.style.transform=g}t!=="richText"&&c.setAttribute("class","xfaLayer xfaFont");const e=[];for(;u.length>0;){const[g,v,l]=u.at(-1);if(v+1===g.children.length){u.pop();continue}const w=g.children[++u.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const m=document.createTextNode(w.value);e.push(m),l.append(m);continue}const k=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(l.append(k),w.attributes&&this.setAttributes({html:k,element:w,storage:V,intent:t,linkService:q}),w.children&&w.children.length>0)u.push([w,-1,k]);else if(w.value){const m=document.createTextNode(w.value);h.XfaText.shouldBuildText(x)&&e.push(m),k.append(m)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:e}}static update(M){const V=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=V,M.div.hidden=!1}}a.XfaLayer=b}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InkEditor=void 0;var h=I(1),b=I(4),n=I(29),M=I(6),V=I(5);class q extends b.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#s=new Path2D;#l=!1;#c=!1;#r=!1;#f=null;#u=0;#d=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){b.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,i){switch(t){case h.AnnotationEditorParamsType.INK_THICKNESS:q._defaultThickness=i;break;case h.AnnotationEditorParamsType.INK_COLOR:q._defaultColor=i;break;case h.AnnotationEditorParamsType.INK_OPACITY:q._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case h.AnnotationEditorParamsType.INK_THICKNESS:this.#v(i);break;case h.AnnotationEditorParamsType.INK_COLOR:this.#m(i);break;case h.AnnotationEditorParamsType.INK_OPACITY:this.#g(i);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,q._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,q._defaultColor||b.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(q._defaultOpacity*100)]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||q._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||q._defaultColor||b.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??q._defaultOpacity))]]}#v(t){const i=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#C()},undo:()=>{this.thickness=i,this.#C()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){const i=this.color;this.addCommands({cmd:()=>{this.color=t,this.#_()},undo:()=>{this.color=i,this.#_()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(t){t/=100;const i=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#_()},undo:()=>{this.opacity=i,this.#_()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#R(),this.#M()),this.isAttachedToDOM||(this.parent.add(this),this.#y()),this.#C()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,u=this.width*t,c=this.height*i;this.setDimensions(u,c)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#h(){const{parentRotation:t,parentDimensions:[i,u]}=this;switch(t){case 90:return[0,u,u,i];case 180:return[i,u,i,u];case 270:return[i,0,u,i];default:return[0,0,i,u]}}#b(){const{ctx:t,color:i,opacity:u,thickness:c,parentScale:e,scaleFactor:g}=this;t.lineWidth=c*e/g,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${(0,V.opacityToHex)(u)}`}#E(t,i){this.canvas.addEventListener("contextmenu",M.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#a),this.isEditing=!0,this.#r||(this.#r=!0,this.#y(),this.thickness||=q._defaultThickness,this.color||=q._defaultColor||b.AnnotationEditor._defaultLineColor,this.opacity??=q._defaultOpacity),this.currentPath.push([t,i]),this.#c=!1,this.#b(),this.#p=()=>{this.#D(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#S(t,i){const[u,c]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===u&&i===c)return;const e=this.currentPath;let g=this.#s;if(e.push([t,i]),this.#c=!0,e.length<=2){g.moveTo(...e[0]),g.lineTo(t,i);return}e.length===3&&(this.#s=g=new Path2D,g.moveTo(...e[0])),this.#I(g,...e.at(-3),...e.at(-2),t,i)}#P(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#s.lineTo(...t)}#k(t,i){this.#p=null,t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),this.#S(t,i),this.#P();let u;if(this.currentPath.length!==1)u=this.#O();else{const l=[t,i];u=[[l,l.slice(),l.slice(),l]]}const c=this.#s,e=this.currentPath;this.currentPath=[],this.#s=new Path2D;const g=()=>{this.allRawPaths.push(e),this.paths.push(u),this.bezierPath2D.push(c),this.rebuild()},v=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#R(),this.#M()),this.#C())};this.addCommands({cmd:g,undo:v,mustExec:!0})}#D(){if(!this.#c)return;this.#c=!1;const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),u=i.map(g=>g[0]),c=i.map(g=>g[1]);Math.min(...u)-t,Math.max(...u)+t,Math.min(...c)-t,Math.max(...c)+t;const{ctx:e}=this;e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height);for(const g of this.bezierPath2D)e.stroke(g);e.stroke(this.#s),e.restore()}#I(t,i,u,c,e,g,v){const l=(i+c)/2,w=(u+e)/2,x=(c+g)/2,k=(e+v)/2;t.bezierCurveTo(l+2*(c-l)/3,w+2*(e-w)/3,x+2*(c-x)/3,k+2*(e-k)/3,x,k)}#O(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let u,[c,e]=t[0];for(u=1;u<t.length-2;u++){const[m,C]=t[u],[z,$]=t[u+1],H=(m+z)/2,tt=(C+$)/2,nt=[c+2*(m-c)/3,e+2*(C-e)/3],yt=[H+2*(m-H)/3,tt+2*(C-tt)/3];i.push([[c,e],nt,yt,[H,tt]]),[c,e]=[H,tt]}const[g,v]=t[u],[l,w]=t[u+1],x=[c+2*(g-c)/3,e+2*(v-e)/3],k=[l+2*(g-l)/3,w+2*(v-w)/3];return i.push([[c,e],x,k,[l,w]]),i}#_(){if(this.isEmpty()){this.#w();return}this.#b();const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),this.#w();for(const u of this.bezierPath2D)i.stroke(u)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#C(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),t.preventDefault(),t.type!=="mouse"&&this.div.focus(),this.#E(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#S(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#L(t)}canvasPointerleave(t){this.#L(t)}#L(t){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#a),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",M.noContextMenu)},10),this.#k(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",b.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#M(){this.#f=new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),b.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(v=>this.div?.setAttribute("aria-label",v));const[u,c,e,g]=this.#h();if(this.setAt(u,c,0,0),this.setDims(e,g),this.#R(),this.width){const[v,l]=this.parentDimensions;this.setAspectRatio(this.width*v,this.height*l),this.setAt(t*v,i*l,this.width*v,this.height*l),this.#r=!0,this.#y(),this.setDims(this.width*v,this.height*l),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#M(),this.div}#y(){if(!this.#r)return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),this.#w()}setDimensions(t,i){const u=Math.round(t),c=Math.round(i);if(this.#u===u&&this.#d===c)return;this.#u=u,this.#d=c,this.canvas.style.visibility="hidden";const[e,g]=this.parentDimensions;this.width=t/e,this.height=i/g,this.fixAndSetPosition(),this.#l&&this.#T(t,i),this.#y(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#T(t,i){const u=this.#F(),c=(t-u)/this.#e,e=(i-u)/this.#t;this.scaleFactor=Math.min(c,e)}#w(){const t=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#N(t){const i=new Path2D;for(let u=0,c=t.length;u<c;u++){const[e,g,v,l]=t[u];u===0&&i.moveTo(...e),i.bezierCurveTo(g[0],g[1],v[0],v[1],l[0],l[1])}return i}static#B(t,i,u){const[c,e,g,v]=i;switch(u){case 0:for(let l=0,w=t.length;l<w;l+=2)t[l]+=c,t[l+1]=v-t[l+1];break;case 90:for(let l=0,w=t.length;l<w;l+=2){const x=t[l];t[l]=t[l+1]+c,t[l+1]=x+e}break;case 180:for(let l=0,w=t.length;l<w;l+=2)t[l]=g-t[l],t[l+1]+=e;break;case 270:for(let l=0,w=t.length;l<w;l+=2){const x=t[l];t[l]=g-t[l+1],t[l+1]=v-x}break;default:throw new Error("Invalid rotation")}return t}static#H(t,i,u){const[c,e,g,v]=i;switch(u){case 0:for(let l=0,w=t.length;l<w;l+=2)t[l]-=c,t[l+1]=v-t[l+1];break;case 90:for(let l=0,w=t.length;l<w;l+=2){const x=t[l];t[l]=t[l+1]-e,t[l+1]=x-c}break;case 180:for(let l=0,w=t.length;l<w;l+=2)t[l]=g-t[l],t[l+1]-=e;break;case 270:for(let l=0,w=t.length;l<w;l+=2){const x=t[l];t[l]=v-t[l+1],t[l+1]=g-x}break;default:throw new Error("Invalid rotation")}return t}#U(t,i,u,c){const e=[],g=this.thickness/2,v=t*i+g,l=t*u+g;for(const w of this.paths){const x=[],k=[];for(let m=0,C=w.length;m<C;m++){const[z,$,H,tt]=w[m],nt=t*z[0]+v,yt=t*z[1]+l,dt=t*$[0]+v,vt=t*$[1]+l,Et=t*H[0]+v,ct=t*H[1]+l,O=t*tt[0]+v,A=t*tt[1]+l;m===0&&(x.push(nt,yt),k.push(nt,yt)),x.push(dt,vt,Et,ct,O,A),k.push(dt,vt),m===C-1&&k.push(O,A)}e.push({bezier:q.#B(x,c,this.rotation),points:q.#B(k,c,this.rotation)})}return e}#x(){let t=1/0,i=-1/0,u=1/0,c=-1/0;for(const e of this.paths)for(const[g,v,l,w]of e){const x=h.Util.bezierBoundingBox(...g,...v,...l,...w);t=Math.min(t,x[0]),u=Math.min(u,x[1]),i=Math.max(i,x[2]),c=Math.max(c,x[3])}return[t,u,i,c]}#F(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#C(t=!1){if(this.isEmpty())return;if(!this.#l){this.#_();return}const i=this.#x(),u=this.#F();this.#e=Math.max(b.AnnotationEditor.MIN_SIZE,i[2]-i[0]),this.#t=Math.max(b.AnnotationEditor.MIN_SIZE,i[3]-i[1]);const c=Math.ceil(u+this.#e*this.scaleFactor),e=Math.ceil(u+this.#t*this.scaleFactor),[g,v]=this.parentDimensions;this.width=c/g,this.height=e/v,this.setAspectRatio(c,e);const l=this.translationX,w=this.translationY;this.translationX=-i[0],this.translationY=-i[1],this.#y(),this.#_(),this.#u=c,this.#d=e,this.setDims(c,e);const x=t?u/this.scaleFactor/2:0;this.translate(l-this.translationX-x,w-this.translationY-x)}static deserialize(t,i,u){if(t instanceof n.InkAnnotationElement)return null;const c=super.deserialize(t,i,u);c.thickness=t.thickness,c.color=h.Util.makeHexColor(...t.color),c.opacity=t.opacity;const[e,g]=c.pageDimensions,v=c.width*e,l=c.height*g,w=c.parentScale,x=t.thickness/2;c.#l=!0,c.#u=Math.round(v),c.#d=Math.round(l);const{paths:k,rect:m,rotation:C}=t;for(let{bezier:$}of k){$=q.#H($,m,C);const H=[];c.paths.push(H);let tt=w*($[0]-x),nt=w*($[1]-x);for(let dt=2,vt=$.length;dt<vt;dt+=6){const Et=w*($[dt]-x),ct=w*($[dt+1]-x),O=w*($[dt+2]-x),A=w*($[dt+3]-x),f=w*($[dt+4]-x),p=w*($[dt+5]-x);H.push([[tt,nt],[Et,ct],[O,A],[f,p]]),tt=f,nt=p}const yt=this.#N(H);c.bezierPath2D.push(yt)}const z=c.#x();return c.#e=Math.max(b.AnnotationEditor.MIN_SIZE,z[2]-z[0]),c.#t=Math.max(b.AnnotationEditor.MIN_SIZE,z[3]-z[1]),c.#T(v,l),c}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=b.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}a.InkEditor=q}),((d,a,I)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StampEditor=void 0;var h=I(1),b=I(4),n=I(6),M=I(29);class V extends b.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#o=null;#a=null;#s=null;#l=null;#c=!1;#r=!1;static _type="stamp";constructor(r){super({...r,name:"stampEditor"}),this.#i=r.bitmapUrl,this.#o=r.bitmapFile}static initialize(r){b.AnnotationEditor.initialize(r)}static get supportedTypes(){const r=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,h.shadow)(this,"supportedTypes",r.map(t=>`image/${t}`))}static get supportedTypesStr(){return(0,h.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(r){return this.supportedTypes.includes(r)}static paste(r,t){t.pasteEditor(h.AnnotationEditorType.STAMP,{bitmapFile:r.getAsFile()})}#f(r,t=!1){if(!r){this.remove();return}this.#t=r.bitmap,t||(this.#e=r.id,this.#c=r.isSvg),this.#p()}#u(){this.#n=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#d(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(t=>this.#f(t,!0)).finally(()=>this.#u());return}if(this.#i){const t=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(t).then(i=>this.#f(i)).finally(()=>this.#u());return}if(this.#o){const t=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(t).then(i=>this.#f(i)).finally(()=>this.#u());return}const r=document.createElement("input");r.type="file",r.accept=V.supportedTypesStr,this.#n=new Promise(t=>{r.addEventListener("change",async()=>{if(!r.files||r.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(r.files[0]);this.#f(i)}t()}),r.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#u()),r.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#d();return}super.rebuild(),this.div!==null&&(this.#e&&this.#d(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let r,t;if(this.width&&(r=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#d(),this.width){const[i,u]=this.parentDimensions;this.setAt(r*i,t*u,this.width*i,this.height*u)}return this.div}#p(){const{div:r}=this;let{width:t,height:i}=this.#t;const[u,c]=this.pageDimensions,e=.75;if(this.width)t=this.width*u,i=this.height*c;else if(t>e*u||i>e*c){const w=Math.min(e*u/t,e*c/i);t*=w,i*=w}const[g,v]=this.parentDimensions;this.setDims(t*g/u,i*v/c),this._uiManager.enableWaiting(!1);const l=this.#a=document.createElement("canvas");r.append(l),r.hidden=!1,this.#g(t,i),this.#b(),this.#r||(this.parent.addUndoableEditor(this),this.#r=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(r,t){const[i,u]=this.parentDimensions;this.width=r/i,this.height=t/u,this.setDims(r,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const c=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(r,t)},c)}#m(r,t){const{width:i,height:u}=this.#t;let c=i,e=u,g=this.#t;for(;c>2*r||e>2*t;){const v=c,l=e;c>2*r&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),e>2*t&&(e=e>=16384?Math.floor(e/2)-1:Math.ceil(e/2));const w=new OffscreenCanvas(c,e);w.getContext("2d").drawImage(g,0,0,v,l,0,0,c,e),g=w.transferToImageBitmap()}return g}#g(r,t){r=Math.ceil(r),t=Math.ceil(t);const i=this.#a;if(!i||i.width===r&&i.height===t)return;i.width=r,i.height=t;const u=this.#c?this.#t:this.#m(r,t),c=i.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(u,0,0,u.width,u.height,0,0,r,t)}#h(r){if(r){if(this.#c){const u=this._uiManager.imageManager.getSvgUrl(this.#e);if(u)return u}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#c){const[t,i]=this.pageDimensions,u=Math.round(this.width*t*n.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*i*n.PixelsPerInch.PDF_TO_CSS_UNITS),e=new OffscreenCanvas(u,c);return e.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,u,c),e.transferToImageBitmap()}return structuredClone(this.#t)}#b(){this.#s=new ResizeObserver(r=>{const t=r[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#s.observe(this.div)}static deserialize(r,t,i){if(r instanceof M.StampAnnotationElement)return null;const u=super.deserialize(r,t,i),{rect:c,bitmapUrl:e,bitmapId:g,isSvg:v,accessibilityData:l}=r;g&&i.imageManager.isValidId(g)?u.#e=g:u.#i=e,u.#c=v;const[w,x]=u.pageDimensions;return u.width=(c[2]-c[0])/w,u.height=(c[3]-c[1])/x,l&&(u.altTextData=l),u}serialize(r=!1,t=null){if(this.isEmpty())return null;const i={annotationType:h.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(r)return i.bitmapUrl=this.#h(!0),i.accessibilityData=this.altTextData,i;const{decorative:u,altText:c}=this.altTextData;if(!u&&c&&(i.accessibilityData={type:"Figure",alt:c}),t===null)return i;t.stamps||=new Map;const e=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:e,serialized:i}),i.bitmap=this.#h(!1);else if(this.#c){const g=t.stamps.get(this.#e);e>g.area&&(g.area=e,g.serialized.bitmap.close(),g.serialized.bitmap=this.#h(!1))}return i}}a.StampEditor=V})],__webpack_module_cache__={};function __w_pdfjs_require__(d){var a=__webpack_module_cache__[d];if(a!==void 0)return a.exports;var I=__webpack_module_cache__[d]={exports:{}};return __webpack_modules__[d](I,I.exports,__w_pdfjs_require__),I.exports}var __webpack_exports__={};return(()=>{var d=__webpack_exports__;Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"AbortException",{enumerable:!0,get:function(){return a.AbortException}}),Object.defineProperty(d,"AnnotationEditorLayer",{enumerable:!0,get:function(){return n.AnnotationEditorLayer}}),Object.defineProperty(d,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return a.AnnotationEditorParamsType}}),Object.defineProperty(d,"AnnotationEditorType",{enumerable:!0,get:function(){return a.AnnotationEditorType}}),Object.defineProperty(d,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return M.AnnotationEditorUIManager}}),Object.defineProperty(d,"AnnotationLayer",{enumerable:!0,get:function(){return V.AnnotationLayer}}),Object.defineProperty(d,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(d,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(d,"DOMSVGFactory",{enumerable:!0,get:function(){return h.DOMSVGFactory}}),Object.defineProperty(d,"FeatureTest",{enumerable:!0,get:function(){return a.FeatureTest}}),Object.defineProperty(d,"GlobalWorkerOptions",{enumerable:!0,get:function(){return q.GlobalWorkerOptions}}),Object.defineProperty(d,"ImageKind",{enumerable:!0,get:function(){return a.ImageKind}}),Object.defineProperty(d,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(d,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(d,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(d,"PDFDataRangeTransport",{enumerable:!0,get:function(){return I.PDFDataRangeTransport}}),Object.defineProperty(d,"PDFDateString",{enumerable:!0,get:function(){return h.PDFDateString}}),Object.defineProperty(d,"PDFWorker",{enumerable:!0,get:function(){return I.PDFWorker}}),Object.defineProperty(d,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(d,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(d,"PixelsPerInch",{enumerable:!0,get:function(){return h.PixelsPerInch}}),Object.defineProperty(d,"PromiseCapability",{enumerable:!0,get:function(){return a.PromiseCapability}}),Object.defineProperty(d,"RenderingCancelledException",{enumerable:!0,get:function(){return h.RenderingCancelledException}}),Object.defineProperty(d,"SVGGraphics",{enumerable:!0,get:function(){return I.SVGGraphics}}),Object.defineProperty(d,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(d,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(d,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(d,"XfaLayer",{enumerable:!0,get:function(){return r.XfaLayer}}),Object.defineProperty(d,"build",{enumerable:!0,get:function(){return I.build}}),Object.defineProperty(d,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(d,"getDocument",{enumerable:!0,get:function(){return I.getDocument}}),Object.defineProperty(d,"getFilenameFromUrl",{enumerable:!0,get:function(){return h.getFilenameFromUrl}}),Object.defineProperty(d,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(d,"getXfaPageViewport",{enumerable:!0,get:function(){return h.getXfaPageViewport}}),Object.defineProperty(d,"isDataScheme",{enumerable:!0,get:function(){return h.isDataScheme}}),Object.defineProperty(d,"isPdfFile",{enumerable:!0,get:function(){return h.isPdfFile}}),Object.defineProperty(d,"loadScript",{enumerable:!0,get:function(){return h.loadScript}}),Object.defineProperty(d,"noContextMenu",{enumerable:!0,get:function(){return h.noContextMenu}}),Object.defineProperty(d,"normalizeUnicode",{enumerable:!0,get:function(){return a.normalizeUnicode}}),Object.defineProperty(d,"renderTextLayer",{enumerable:!0,get:function(){return b.renderTextLayer}}),Object.defineProperty(d,"setLayerDimensions",{enumerable:!0,get:function(){return h.setLayerDimensions}}),Object.defineProperty(d,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(d,"updateTextLayer",{enumerable:!0,get:function(){return b.updateTextLayer}}),Object.defineProperty(d,"version",{enumerable:!0,get:function(){return I.version}});var a=__w_pdfjs_require__(1),I=__w_pdfjs_require__(2),h=__w_pdfjs_require__(6),b=__w_pdfjs_require__(26),n=__w_pdfjs_require__(27),M=__w_pdfjs_require__(5),V=__w_pdfjs_require__(29),q=__w_pdfjs_require__(14),r=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,(function(d){var a=requireReact(),I=requirePdf();function h(o){var y=Object.create(null);return o&&Object.keys(o).forEach((function(D){if(D!=="default"){var N=Object.getOwnPropertyDescriptor(o,D);Object.defineProperty(y,D,N.get?N:{enumerable:!0,get:function(){return o[D]}})}})),y.default=o,Object.freeze(y)}var b,n=h(a),M=h(I);d.AnnotationType=void 0,(b=d.AnnotationType||(d.AnnotationType={}))[b.Text=1]="Text",b[b.Link=2]="Link",b[b.FreeText=3]="FreeText",b[b.Line=4]="Line",b[b.Square=5]="Square",b[b.Circle=6]="Circle",b[b.Polygon=7]="Polygon",b[b.Polyline=8]="Polyline",b[b.Highlight=9]="Highlight",b[b.Underline=10]="Underline",b[b.Squiggly=11]="Squiggly",b[b.StrikeOut=12]="StrikeOut",b[b.Stamp=13]="Stamp",b[b.Caret=14]="Caret",b[b.Ink=15]="Ink",b[b.Popup=16]="Popup",b[b.FileAttachment=17]="FileAttachment";var V=function(o,y){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,N){D.__proto__=N}||function(D,N){for(var W in N)Object.prototype.hasOwnProperty.call(N,W)&&(D[W]=N[W])},V(o,y)};function q(o,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function D(){this.constructor=o}V(o,y),o.prototype=y===null?Object.create(y):(D.prototype=y.prototype,new D)}var r,t=function(){return t=Object.assign||function(o){for(var y,D=1,N=arguments.length;D<N;D++)for(var W in y=arguments[D])Object.prototype.hasOwnProperty.call(y,W)&&(o[W]=y[W]);return o},t.apply(this,arguments)};d.TextDirection=void 0,(r=d.TextDirection||(d.TextDirection={})).RightToLeft="RTL",r.LeftToRight="LTR";var i,u=n.createContext({currentTheme:"light",direction:d.TextDirection.LeftToRight,setCurrentTheme:function(){}}),c=function(o){var y=[];return Object.keys(o).forEach((function(D){D&&o[D]&&y.push(D)})),y.join(" ")},e=typeof window<"u"?n.useLayoutEffect:n.useEffect,g=function(o){var y=n.useRef(null),D=o.once,N=o.threshold,W=o.onVisibilityChanged;return e((function(){var G=y.current;if(G){var Z=new IntersectionObserver((function(Y){Y.forEach((function(B){var J=B.isIntersecting,K=B.intersectionRatio;W({isVisible:J,ratio:K}),J&&D&&(Z.unobserve(G),Z.disconnect())}))}),{threshold:N||0});return Z.observe(G),function(){Z.unobserve(G),Z.disconnect()}}}),[]),y},v=function(o){var y=o.children,D=o.ignoreDirection,N=D!==void 0&&D,W=o.size,G=W===void 0?24:W,Z=n.useContext(u).direction,Y=!N&&Z===d.TextDirection.RightToLeft,B="".concat(G||24,"px");return n.createElement("svg",{"aria-hidden":"true",className:c({"rpv-core__icon":!0,"rpv-core__icon--rtl":Y}),focusable:"false",height:B,viewBox:"0 0 24 24",width:B},y)},l=function(){return n.createElement(v,{size:16},n.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},w=function(o){var y=o.children,D=o.testId,N=o.onClick,W=n.useContext(u).direction===d.TextDirection.RightToLeft,G=D?{"data-testid":D}:{};return n.createElement("button",t({className:c({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":W}),type:"button",onClick:N},G),y)},x=function(o){var y=o.size,D=y===void 0?"4rem":y,N=o.testId,W=n.useState(!1),G=W[0],Z=W[1],Y=N?{"data-testid":N}:{},B=g({onVisibilityChanged:function(J){Z(J.isVisible)}});return n.createElement("div",t({},Y,{className:c({"rpv-core__spinner":!0,"rpv-core__spinner--animating":G}),ref:B,style:{height:D,width:D}}))},k=function(o){var y=o.ariaLabel,D=y===void 0?"":y,N=o.autoFocus,W=N!==void 0&&N,G=o.placeholder,Z=G===void 0?"":G,Y=o.testId,B=o.type,J=B===void 0?"text":B,K=o.value,lt=K===void 0?"":K,ot=o.onChange,at=o.onKeyDown,_t=at===void 0?function(){}:at,mt=n.useContext(u).direction,pt=n.useRef(),Gt=mt===d.TextDirection.RightToLeft,xt={ref:pt,"data-testid":"","aria-label":D,className:c({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Gt}),placeholder:Z,value:lt,onChange:function(Ft){return ot(Ft.target.value)},onKeyDown:_t};return Y&&(xt["data-testid"]=Y),e((function(){if(W){var Ft=pt.current;if(Ft){var Nt=window.scrollX,Pt=window.scrollY;Ft.focus(),window.scrollTo(Nt,Pt)}}}),[]),J==="text"?n.createElement("input",t({type:"text"},xt)):n.createElement("input",t({type:"password"},xt))};(function(o){o[o.ExitFullScreen=0]="ExitFullScreen",o[o.FullScreenChange=1]="FullScreenChange",o[o.FullScreenElement=2]="FullScreenElement",o[o.FullScreenEnabled=3]="FullScreenEnabled",o[o.RequestFullScreen=4]="RequestFullScreen"})(i||(i={}));var m,C={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},z={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},$={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},H=typeof window<"u",tt=H&&(i.FullScreenEnabled in document&&C||z.FullScreenEnabled in document&&z||$.FullScreenEnabled in document&&$)||C,nt=function(){return H&&tt.FullScreenEnabled in document&&document[tt.FullScreenEnabled]===!0},yt=function(o){return H?o[tt.ExitFullScreen]():Promise.resolve({})},dt=function(){return H?document[tt.FullScreenElement]:null},vt=function(o,y){var D=n.useRef(),N=function(){D.current&&clearTimeout(D.current)};return n.useEffect((function(){return function(){return N()}}),[]),n.useCallback((function(){for(var W=[],G=0;G<arguments.length;G++)W[G]=arguments[G];N(),D.current=setTimeout((function(){o.apply(void 0,W)}),y)}),[o,y])},Et=function(){var o=n.useRef(!1);return n.useEffect((function(){return o.current=!0,function(){o.current=!1}}),[]),o},ct=function(o){var y=n.useRef(o);return n.useEffect((function(){y.current=o}),[o]),y.current};(function(o){o.NotRenderedYet="NotRenderedYet",o.Rendering="Rendering",o.Rendered="Rendered"})(m||(m={}));var O,A=-9999,f=function(o){var y=o.doc,D=y.numPages,N=y.loadingTask.docId,W=n.useMemo((function(){return Array(D).fill(null).map((function(Y,B){return{pageIndex:B,renderStatus:m.NotRenderedYet,visibility:A}}))}),[N]),G=n.useRef({currentRenderingPage:-1,startRange:0,endRange:D-1,visibilities:W}),Z=function(Y,B){G.current.visibilities[Y].visibility=B};return{getHighestPriorityPage:function(){var Y=G.current.visibilities.slice(G.current.startRange,G.current.endRange+1).filter((function(ot){return ot.visibility>A}));if(!Y.length)return-1;for(var B=Y[0].pageIndex,J=Y[Y.length-1].pageIndex,K=Y.length,lt=0;lt<K;lt++){if(Y[lt].renderStatus===m.Rendering)return-1;if(Y[lt].renderStatus===m.NotRenderedYet)return Y[lt].pageIndex}return J+1<D&&G.current.visibilities[J+1].renderStatus!==m.Rendered?J+1:B-1>=0&&G.current.visibilities[B-1].renderStatus!==m.Rendered?B-1:-1},isInRange:function(Y){return Y>=G.current.startRange&&Y<=G.current.endRange},markNotRendered:function(){for(var Y=0;Y<D;Y++)G.current.visibilities[Y].renderStatus=m.NotRenderedYet},markRendered:function(Y){G.current.visibilities[Y].renderStatus=m.Rendered},markRendering:function(Y){G.current.currentRenderingPage!==-1&&G.current.currentRenderingPage!==Y&&G.current.visibilities[G.current.currentRenderingPage].renderStatus===m.Rendering&&(G.current.visibilities[G.current.currentRenderingPage].renderStatus=m.NotRenderedYet),G.current.visibilities[Y].renderStatus=m.Rendering,G.current.currentRenderingPage=Y},setOutOfRange:function(Y){Z(Y,A)},setRange:function(Y,B){G.current.startRange=Y,G.current.endRange=B;for(var J=0;J<D;J++)(J<Y||J>B)&&(G.current.visibilities[J].visibility=A,G.current.visibilities[J].renderStatus=m.NotRenderedYet)},setVisibility:Z}},p={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},S=n.createContext({l10n:p,setL10n:function(){}}),L=0,F=function(){return L++},U=function(o,y,D){var N=function(W){var G=y.current;if(G){var Z=W.target;if(Z instanceof Element&&Z.shadowRoot){var Y=W.composedPath();Y.length>0&&!G.contains(Y[0])&&D()}else G.contains(Z)||D()}};n.useEffect((function(){if(o){var W={capture:!0};return document.addEventListener("click",N,W),function(){document.removeEventListener("click",N,W)}}}),[])},T=function(o){var y=function(D){D.key==="Escape"&&o()};n.useEffect((function(){return document.addEventListener("keyup",y),function(){document.removeEventListener("keyup",y)}}),[])},s=function(o){var y=o.ariaControlsSuffix,D=o.children,N=o.closeOnClickOutside,W=o.closeOnEscape,G=o.onToggle,Z=n.useRef(),Y=n.useContext(u).direction===d.TextDirection.RightToLeft;return n.useEffect((function(){var B=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=B}}),[]),T((function(){Z.current&&W&&G()})),U(N,Z,G),e((function(){var B=Z.current;if(B){var J=.75*document.body.clientHeight;B.getBoundingClientRect().height>=J&&(B.style.overflow="auto",B.style.maxHeight="".concat(J,"px"))}}),[]),n.createElement("div",{"aria-modal":"true",className:c({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Y}),id:"rpv-core__modal-body-".concat(y),ref:Z,role:"dialog",tabIndex:-1},D)},_=function(o){var y=o.children;return n.createElement("div",{className:"rpv-core__modal-overlay"},y)};d.ToggleStatus=void 0,(O=d.ToggleStatus||(d.ToggleStatus={})).Close="Close",O.Open="Open",O.Toggle="Toggle";var E,P=function(o){var y=n.useState(o),D=y[0],N=y[1];return{opened:D,toggle:function(W){switch(W){case d.ToggleStatus.Close:N(!1);break;case d.ToggleStatus.Open:N(!0);break;case d.ToggleStatus.Toggle:default:N((function(G){return!G}))}}}},R=function(o){var y=o.content,D=o.isOpened,N=D!==void 0&&D,W=o.target,G=P(N),Z=G.opened,Y=G.toggle;return n.createElement(n.Fragment,null,W&&W(Y,Z),Z&&y(Y))};d.Position=void 0,(E=d.Position||(d.Position={})).TopLeft="TOP_LEFT",E.TopCenter="TOP_CENTER",E.TopRight="TOP_RIGHT",E.RightTop="RIGHT_TOP",E.RightCenter="RIGHT_CENTER",E.RightBottom="RIGHT_BOTTOM",E.BottomLeft="BOTTOM_LEFT",E.BottomCenter="BOTTOM_CENTER",E.BottomRight="BOTTOM_RIGHT",E.LeftTop="LEFT_TOP",E.LeftCenter="LEFT_CENTER",E.LeftBottom="LEFT_BOTTOM";var j,X,it,At,rt,st,ht,ut,gt=function(o,y,D,N,W){e((function(){var G=y.current,Z=o.current,Y=D.current;if(Z&&G&&Y){var B=Y.getBoundingClientRect(),J=(function(ot,at,_t,mt){var pt=at.getBoundingClientRect(),Gt=ot.getBoundingClientRect(),xt=Gt.height,Ft=Gt.width,Nt=0,Pt=0;switch(_t){case d.Position.TopLeft:Nt=pt.top-xt,Pt=pt.left;break;case d.Position.TopCenter:Nt=pt.top-xt,Pt=pt.left+pt.width/2-Ft/2;break;case d.Position.TopRight:Nt=pt.top-xt,Pt=pt.left+pt.width-Ft;break;case d.Position.RightTop:Nt=pt.top,Pt=pt.left+pt.width;break;case d.Position.RightCenter:Nt=pt.top+pt.height/2-xt/2,Pt=pt.left+pt.width;break;case d.Position.RightBottom:Nt=pt.top+pt.height-xt,Pt=pt.left+pt.width;break;case d.Position.BottomLeft:Nt=pt.top+pt.height,Pt=pt.left;break;case d.Position.BottomCenter:Nt=pt.top+pt.height,Pt=pt.left+pt.width/2-Ft/2;break;case d.Position.BottomRight:Nt=pt.top+pt.height,Pt=pt.left+pt.width-Ft;break;case d.Position.LeftTop:Nt=pt.top,Pt=pt.left-Ft;break;case d.Position.LeftCenter:Nt=pt.top+pt.height/2-xt/2,Pt=pt.left-Ft;break;case d.Position.LeftBottom:Nt=pt.top+pt.height-xt,Pt=pt.left-Ft}return{left:Pt+(mt.left||0),top:Nt+(mt.top||0)}})(Z,G,N,W),K=J.top,lt=J.left;Z.style.top="".concat(K-B.top,"px"),Z.style.left="".concat(lt-B.left,"px")}}),[])},Ct=function(o){var y,D=o.customClassName,N=o.position;return n.createElement("div",{className:c((y={"rpv-core__arrow":!0,"rpv-core__arrow--tl":N===d.Position.TopLeft,"rpv-core__arrow--tc":N===d.Position.TopCenter,"rpv-core__arrow--tr":N===d.Position.TopRight,"rpv-core__arrow--rt":N===d.Position.RightTop,"rpv-core__arrow--rc":N===d.Position.RightCenter,"rpv-core__arrow--rb":N===d.Position.RightBottom,"rpv-core__arrow--bl":N===d.Position.BottomLeft,"rpv-core__arrow--bc":N===d.Position.BottomCenter,"rpv-core__arrow--br":N===d.Position.BottomRight,"rpv-core__arrow--lt":N===d.Position.LeftTop,"rpv-core__arrow--lc":N===d.Position.LeftCenter,"rpv-core__arrow--lb":N===d.Position.LeftBottom},y["".concat(D)]=D!=="",y))})},Lt=function(o){var y=o.ariaControlsSuffix,D=o.children,N=o.closeOnClickOutside,W=o.offset,G=o.position,Z=o.targetRef,Y=o.onClose,B=n.useRef(),J=n.useRef(),K=n.useRef(),lt=n.useContext(u).direction===d.TextDirection.RightToLeft;U(N,B,Y),gt(B,Z,K,G,W),e((function(){var at=J.current;if(at){var _t=.75*document.body.clientHeight;at.getBoundingClientRect().height>=_t&&(at.style.overflow="auto",at.style.maxHeight="".concat(_t,"px"))}}),[]);var ot="rpv-core__popover-body-inner-".concat(y);return n.createElement(n.Fragment,null,n.createElement("div",{ref:K,style:{left:0,position:"absolute",top:0}}),n.createElement("div",{"aria-describedby":ot,className:c({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":lt}),id:"rpv-core__popover-body-".concat(y),ref:B,role:"dialog",tabIndex:-1},n.createElement(Ct,{customClassName:"rpv-core__popover-body-arrow",position:G}),n.createElement("div",{id:ot,ref:J},D)))},Bt=function(o){var y=o.closeOnEscape,D=o.onClose,N=n.useRef();return T((function(){N.current&&y&&D()})),n.createElement("div",{className:"rpv-core__popover-overlay",ref:N})},Xt=function(o){var y=o.ariaControlsSuffix,D=o.children,N=o.contentRef,W=o.offset,G=o.position,Z=o.targetRef,Y=n.useRef(),B=n.useContext(u).direction===d.TextDirection.RightToLeft;return gt(N,Z,Y,G,W),n.createElement(n.Fragment,null,n.createElement("div",{ref:Y,style:{left:0,position:"absolute",top:0}}),n.createElement("div",{className:c({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":B}),id:"rpv-core__tooltip-body-".concat(y),ref:N,role:"tooltip"},n.createElement(Ct,{customClassName:"rpv-core__tooltip-body-arrow",position:G}),n.createElement("div",{className:"rpv-core__tooltip-body-content"},D)))};d.FullScreenMode=void 0,(j=d.FullScreenMode||(d.FullScreenMode={})).Normal="Normal",j.Entering="Entering",j.Entered="Entered",j.EnteredCompletely="EnteredCompletely",j.Exitting="Exitting",j.Exited="Exited",d.LayerRenderStatus=void 0,(X=d.LayerRenderStatus||(d.LayerRenderStatus={}))[X.PreRender=0]="PreRender",X[X.DidRender=1]="DidRender",d.PageMode=void 0,(it=d.PageMode||(d.PageMode={})).Attachments="UseAttachments",it.Bookmarks="UseOutlines",it.ContentGroup="UseOC",it.Default="UserNone",it.FullScreen="FullScreen",it.Thumbnails="UseThumbs",d.PasswordStatus=void 0,(At=d.PasswordStatus||(d.PasswordStatus={})).RequiredPassword="RequiredPassword",At.WrongPassword="WrongPassword",d.RotateDirection=void 0,(rt=d.RotateDirection||(d.RotateDirection={})).Backward="Backward",rt.Forward="Forward",d.ScrollMode=void 0,(st=d.ScrollMode||(d.ScrollMode={})).Page="Page",st.Horizontal="Horizontal",st.Vertical="Vertical",st.Wrapped="Wrapped",d.SpecialZoomLevel=void 0,(ht=d.SpecialZoomLevel||(d.SpecialZoomLevel={})).ActualSize="ActualSize",ht.PageFit="PageFit",ht.PageWidth="PageWidth",d.ViewMode=void 0,(ut=d.ViewMode||(d.ViewMode={})).DualPage="DualPage",ut.DualPageWithCover="DualPageWithCover",ut.SinglePage="SinglePage";var $t,ne=function(o,y){return o.reduce((function(D,N,W){return W%y?D[D.length-1].push(N):D.push([N]),D}),[])},Me=function(o,y){switch(y[1].name){case"XYZ":return{bottomOffset:function(D,N){return y[3]===null?N:y[3]},leftOffset:function(D,N){return y[2]===null?0:y[2]},pageIndex:o,scaleTo:y[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:o,scaleTo:d.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:y[2],leftOffset:0,pageIndex:o,scaleTo:d.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:o,scaleTo:1}}},Ae=new Map,Ue=new Map,Pe=function(o,y){return"".concat(o.loadingTask.docId,"___").concat(y.num,"R").concat(y.gen===0?"":y.gen)},Oe=function(o,y,D){Ae.set(Pe(o,y),D)},qe=function(o,y){if(!o)return Promise.reject("The document is not loaded yet");var D="".concat(o.loadingTask.docId,"___").concat(y),N=Ue.get(D);return N?Promise.resolve(N):new Promise((function(W,G){o.getPage(y+1).then((function(Z){Ue.set(D,Z),Z.ref&&Oe(o,Z.ref,y),W(Z)}))}))},hn=function(o,y){return new Promise((function(D){new Promise((function(N){typeof y=="string"?o.getDestination(y).then((function(W){N(W)})):N(y)})).then((function(N){if(typeof N[0]=="object"&&N[0]!==null){var W=N[0],G=(function(Y,B){var J=Pe(Y,B);return Ae.has(J)?Ae.get(J):null})(o,W);G===null?o.getPageIndex(W).then((function(Y){Oe(o,W,Y),hn(o,y).then((function(B){return D(B)}))})):D(Me(G,N))}else{var Z=Me(N[0],N);D(Z)}}))}))};(function(o){o[o.Solid=1]="Solid",o[o.Dashed=2]="Dashed",o[o.Beveled=3]="Beveled",o[o.Inset=4]="Inset",o[o.Underline=5]="Underline"})($t||($t={}));var Ne,bt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),et=function(o,y,D,N){var W=parseInt(o,10);return W>=y&&W<=D?W:N},Q=function(o){return o.contentsObj?o.contentsObj.str:o.contents||""},St=function(o){return o.titleObj?o.titleObj.str:o.title||""},oe=function(o){var y=o.annotation,D=n.useContext(u).direction,N=St(y),W=Q(y),G=D===d.TextDirection.RightToLeft,Z=n.useRef(),Y="";if(y.modificationDate){var B=(function(J){var K=bt.exec(J);if(!K)return null;var lt=parseInt(K[1],10),ot=et(K[2],1,12,1)-1,at=et(K[3],1,31,1),_t=et(K[4],0,23,0),mt=et(K[5],0,59,0),pt=et(K[6],0,59,0),Gt=K[7]||"Z",xt=et(K[8],0,23,0),Ft=et(K[9],0,59,0);switch(Gt){case"-":_t+=xt,mt+=Ft;break;case"+":_t-=xt,mt-=Ft}return new Date(Date.UTC(lt,ot,at,_t,mt,pt))})(y.modificationDate);Y=B?"".concat(B.toLocaleDateString(),", ").concat(B.toLocaleTimeString()):""}return n.useLayoutEffect((function(){if(Z.current){var J=document.querySelector('[data-annotation-id="'.concat(y.id,'"]'));if(J){var K=J;return K.style.zIndex+=1,function(){K.style.zIndex="".concat(parseInt(K.style.zIndex,10)-1)}}}}),[]),n.createElement("div",{ref:Z,className:c({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":G}),style:{top:y.annotationType===d.AnnotationType.Popup?"":"100%"}},N&&n.createElement(n.Fragment,null,n.createElement("div",{className:c({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!G,"rpv-core__annotation-popup-title--rtl":G})},N),n.createElement("div",{className:"rpv-core__annotation-popup-date"},Y)),W&&n.createElement("div",{className:"rpv-core__annotation-popup-content"},W.split(`
`).map((function(J,K){return n.createElement(n.Fragment,{key:K},J,n.createElement("br",null))}))))};(function(o){o.Click="Click",o.Hover="Hover"})(Ne||(Ne={}));var Wt,Qt=function(o){var y,D=o.annotation,N=o.children,W=o.ignoreBorder,G=o.hasPopup,Z=o.isRenderable,Y=o.page,B=o.viewport,J=D.rect,K=(function(){var It=P(!1),te=It.opened,Zt=It.toggle,ee=n.useState(Ne.Hover),ie=ee[0],se=ee[1];return{opened:te,closeOnHover:function(){ie===Ne.Hover&&Zt(d.ToggleStatus.Close)},openOnHover:function(){ie===Ne.Hover&&Zt(d.ToggleStatus.Open)},toggleOnClick:function(){switch(ie){case Ne.Click:te&&se(Ne.Hover),Zt(d.ToggleStatus.Toggle);break;case Ne.Hover:se(Ne.Click),Zt(d.ToggleStatus.Open)}}}})(),lt=K.closeOnHover,ot=K.opened,at=K.openOnHover,_t=K.toggleOnClick,mt=(y=[J[0],Y.view[3]+Y.view[1]-J[1],J[2],Y.view[3]+Y.view[1]-J[3]],[Math.min(y[0],y[2]),Math.min(y[1],y[3]),Math.max(y[0],y[2]),Math.max(y[1],y[3])]),pt=J[2]-J[0],Gt=J[3]-J[1],xt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!W&&D.borderStyle.width>0){switch(D.borderStyle.style){case $t.Dashed:xt.borderStyle="dashed";break;case $t.Solid:xt.borderStyle="solid";break;case $t.Underline:xt=Object.assign({borderBottomStyle:"solid"},xt);case $t.Beveled:case $t.Inset:}var Ft=D.borderStyle.width;xt.borderWidth="".concat(Ft,"px"),D.borderStyle.style!==$t.Underline&&(pt-=2*Ft,Gt-=2*Ft);var Nt=D.borderStyle,Pt=Nt.horizontalCornerRadius,Ht=Nt.verticalCornerRadius;(Pt>0||Ht>0)&&(xt.borderRadius="".concat(Pt,"px / ").concat(Ht,"px")),D.color?xt.borderColor="rgb(".concat(0|D.color[0],", ").concat(0|D.color[1],", ").concat(0|D.color[2],")"):xt.borderWidth="0"}return n.createElement(n.Fragment,null,Z&&N({popup:{opened:ot,closeOnHover:lt,openOnHover:at,toggleOnClick:_t},slot:{attrs:{style:Object.assign({height:"".concat(Gt,"px"),left:"".concat(mt[0],"px"),top:"".concat(mt[1],"px"),transform:"matrix(".concat(B.transform.join(","),")"),transformOrigin:"-".concat(mt[0],"px -").concat(mt[1],"px"),width:"".concat(pt,"px")},xt)},children:n.createElement(n.Fragment,null,G&&ot&&n.createElement(oe,{annotation:D}))}}))},Ge=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z);return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":y.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},Xe=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z),B=y.rect,J=B[2]-B[0],K=B[3]-B[1],lt=y.borderStyle.width;return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(ot){return n.createElement("div",t({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":y.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),n.createElement("svg",{height:"".concat(K,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(K),width:"".concat(J,"px")},n.createElement("circle",{cy:K/2,fill:"none",rx:J/2-lt/2,ry:K/2-lt/2,stroke:"transparent",strokeWidth:lt||1})),ot.slot.children)}))},ze=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=St(y),G=Q(y),Z=!(y.hasPopup!==!1||!W&&!G),Y=function(){var B,J,K,lt,ot=y.file;ot&&(B=ot.filename,J=ot.content,K=typeof J=="string"?"":URL.createObjectURL(new Blob([J],{type:""})),(lt=document.createElement("a")).style.display="none",lt.href=K||B,lt.setAttribute("download",(function(at){var _t=at.split("/").pop();return _t?_t.split("#")[0].split("?")[0]:at})(B)),document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),K&&URL.revokeObjectURL(K))};return n.createElement(Qt,{annotation:y,hasPopup:Z,ignoreBorder:!0,isRenderable:!0,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":y.id,onClick:B.popup.toggleOnClick,onDoubleClick:Y,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},xe=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z);return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":y.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},je=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=St(y),G=Q(y),Z=!(!W&&!G),Y=!y.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(y.parentType)!==-1;return e((function(){if(y.parentId){var B=document.querySelector('[data-annotation-id="'.concat(y.parentId,'"]')),J=document.querySelector('[data-annotation-id="'.concat(y.id,'"]'));if(B&&J){var K=parseFloat(B.style.left),lt=parseFloat(B.style.top)+parseFloat(B.style.height);J.style.left="".concat(K,"px"),J.style.top="".concat(lt,"px"),J.style.transformOrigin="-".concat(K,"px -").concat(lt,"px")}}}),[]),n.createElement(Qt,{annotation:y,hasPopup:Y,ignoreBorder:!1,isRenderable:Z,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":y.id}),n.createElement(oe,{annotation:y}))}))},Be=function(o){var y=o.annotation,D=o.childAnnotation,N=o.page,W=o.viewport,G=y.hasPopup===!1,Z=St(y),Y=Q(y),B=!!(y.hasPopup||Z||Y);if(y.quadPoints&&y.quadPoints.length>0){var J=y.quadPoints.map((function(K){return Object.assign({},y,{rect:[K[2].x,K[2].y,K[1].x,K[1].y],quadPoints:[]})}));return n.createElement(n.Fragment,null,J.map((function(K,lt){return n.createElement(Be,{key:lt,annotation:K,childAnnotation:D,page:N,viewport:W})})))}return n.createElement(Qt,{annotation:y,hasPopup:G,ignoreBorder:!0,isRenderable:B,page:N,viewport:W},(function(K){return n.createElement(n.Fragment,null,n.createElement("div",t({},K.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":y.id,onClick:K.popup.toggleOnClick,onMouseEnter:K.popup.openOnHover,onMouseLeave:K.popup.closeOnHover}),K.slot.children),D&&D.annotationType===d.AnnotationType.Popup&&K.popup.opened&&n.createElement(je,{annotation:D,page:N,viewport:W}))}))},rn=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z),B=y.rect,J=B[2]-B[0],K=B[3]-B[1],lt=y.borderStyle.width;return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(ot){return n.createElement("div",t({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":y.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),y.inkLists&&y.inkLists.length&&n.createElement("svg",{height:"".concat(K,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(K),width:"".concat(J,"px")},y.inkLists.map((function(at,_t){return n.createElement("polyline",{key:_t,fill:"none",stroke:"transparent",strokeWidth:lt||1,points:at.map((function(mt){return"".concat(mt.x-B[0],",").concat(B[3]-mt.y)})).join(" ")})}))),ot.slot.children)}))},Se=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z),B=y.rect,J=B[2]-B[0],K=B[3]-B[1],lt=y.borderStyle.width;return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(ot){return n.createElement("div",t({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":y.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),n.createElement("svg",{height:"".concat(K,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(K),width:"".concat(J,"px")},n.createElement("line",{stroke:"transparent",strokeWidth:lt||1,x1:B[2]-y.lineCoordinates[0],x2:B[2]-y.lineCoordinates[2],y1:B[3]-y.lineCoordinates[1],y2:B[3]-y.lineCoordinates[3]})),ot.slot.children)}))},sn=/^([^\w]*)(javascript|data|vbscript)/im,an=/&#(\w+)(^\w|;)?/g,un=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,dn=/^([^:]+):/gm,Qe=function(o,y){var D,N=(D=o||"",D.replace(an,(function(Y,B){return String.fromCharCode(B)}))).replace(un,"").trim();if(!N)return y;var W=N[0];if(W==="."||W==="/")return N;var G=N.match(dn);if(!G)return N;var Z=G[0];return sn.test(Z)?y:N},Fe=function(o){var y,D=o.annotation,N=o.annotationContainerRef,W=o.doc,G=o.outlines,Z=o.page,Y=o.pageIndex,B=o.scale,J=o.viewport,K=o.onExecuteNamedAction,lt=o.onJumpFromLinkAnnotation,ot=o.onJumpToDest,at=n.useRef(),_t=G&&G.length&&D.dest&&typeof D.dest=="string"?(y=G.find((function(xt){return xt.dest===D.dest})))===null||y===void 0?void 0:y.title:"",mt=!!(D.url||D.dest||D.action||D.unsafeUrl),pt={};if(D.url||D.unsafeUrl){var Gt=Qe(D.url||D.unsafeUrl,"");Gt?pt={"data-target":"external",href:Gt,rel:"noopener noreferrer nofollow",target:D.newWindow?"_blank":"",title:Gt}:mt=!1}else pt={href:"","data-annotation-link":D.id,onClick:function(xt){xt.preventDefault(),D.action?K(D.action):hn(W,D.dest).then((function(Ft){var Nt=at.current,Pt=N.current;if(Nt&&Pt){var Ht=Nt.getBoundingClientRect();Pt.style.setProperty("height","100%"),Pt.style.setProperty("width","100%");var It=Pt.getBoundingClientRect();Pt.style.removeProperty("height"),Pt.style.removeProperty("width");var te=(Ht.left-It.left)/B,Zt=(It.bottom-Ht.bottom+Ht.height)/B;lt({bottomOffset:Zt,label:_t,leftOffset:te,pageIndex:Y})}ot(Ft)}))}};return _t&&(pt=Object.assign({},pt,{title:_t,"aria-label":_t})),n.createElement(Qt,{annotation:D,hasPopup:!1,ignoreBorder:!1,isRenderable:mt,page:Z,viewport:J},(function(xt){return n.createElement("div",t({},xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":D.id,"data-testid":"core__annotation--link-".concat(D.id)}),n.createElement("a",t({ref:at},pt)))}))},tn=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z),B=y.rect,J=B[2]-B[0],K=B[3]-B[1],lt=y.borderStyle.width;return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(ot){return n.createElement("div",t({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":y.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),y.vertices&&y.vertices.length&&n.createElement("svg",{height:"".concat(K,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(K),width:"".concat(J,"px")},n.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:lt||1,points:y.vertices.map((function(at){return"".concat(at.x-B[0],",").concat(B[3]-at.y)})).join(" ")})),ot.slot.children)}))},fn=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z),B=y.rect,J=B[2]-B[0],K=B[3]-B[1],lt=y.borderStyle.width;return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(ot){return n.createElement("div",t({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":y.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),y.vertices&&y.vertices.length&&n.createElement("svg",{height:"".concat(K,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(K),width:"".concat(J,"px")},n.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:lt||1,points:y.vertices.map((function(at){return"".concat(at.x-B[0],",").concat(B[3]-at.y)})).join(" ")})),ot.slot.children)}))},Qn=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z),B=y.rect,J=B[2]-B[0],K=B[3]-B[1],lt=y.borderStyle.width;return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(ot){return n.createElement("div",t({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":y.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),n.createElement("svg",{height:"".concat(K,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(K),width:"".concat(J,"px")},n.createElement("rect",{height:K-lt,fill:"none",stroke:"transparent",strokeWidth:lt||1,x:lt/2,y:lt/2,width:J-lt})),ot.slot.children)}))},ti=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z);return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":y.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},ei=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z);return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":y.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},ni=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z);return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":y.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},ii=function(){return n.createElement(v,{size:16},n.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),n.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),n.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),n.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ri=function(){return n.createElement(v,{size:16},n.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),n.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),n.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),n.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),n.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),n.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),n.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),n.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),n.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),n.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},si=function(){return n.createElement(v,{size:16},n.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),n.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},ai=function(){return n.createElement(v,{size:16},n.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),n.createElement("path",{d:"M6 4.5L6 0.5"}),n.createElement("path",{d:"M18 4.5L18 0.5"}),n.createElement("path",{d:"M10 4.5L10 0.5"}),n.createElement("path",{d:"M14 4.5L14 0.5"}))},oi=function(){return n.createElement(v,{size:16},n.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),n.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),n.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},li=function(){return n.createElement(v,{size:16},n.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},ci=function(o){var y=o.annotation,D=o.childAnnotation,N=o.page,W=o.viewport,G=y.hasPopup===!1,Z=St(y),Y=Q(y),B=!!(y.hasPopup||Z||Y),J=y.name?y.name.toLowerCase():"";return n.createElement(Qt,{annotation:y,hasPopup:G,ignoreBorder:!1,isRenderable:B,page:N,viewport:W},(function(K){return n.createElement(n.Fragment,null,n.createElement("div",t({},K.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":y.id,onClick:K.popup.toggleOnClick,onMouseEnter:K.popup.openOnHover,onMouseLeave:K.popup.closeOnHover}),J&&n.createElement("div",{className:"rpv-core__annotation-text-icon"},J==="check"&&n.createElement(l,null),J==="comment"&&n.createElement(ii,null),J==="help"&&n.createElement(ri,null),J==="insert"&&n.createElement(li,null),J==="key"&&n.createElement(si,null),J==="note"&&n.createElement(ai,null),(J==="newparagraph"||J==="paragraph")&&n.createElement(oi,null)),K.slot.children),D&&D.annotationType===d.AnnotationType.Popup&&K.popup.opened&&n.createElement(je,{annotation:D,page:N,viewport:W}))}))},hi=function(o){var y=o.annotation,D=o.page,N=o.viewport,W=y.hasPopup===!1,G=St(y),Z=Q(y),Y=!!(y.hasPopup||G||Z);return n.createElement(Qt,{annotation:y,hasPopup:W,ignoreBorder:!0,isRenderable:Y,page:D,viewport:N},(function(B){return n.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":y.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},ui=function(o){var y=o.annotations,D=o.doc,N=o.outlines,W=o.page,G=o.pageIndex,Z=o.plugins,Y=o.rotation,B=o.scale,J=o.onExecuteNamedAction,K=o.onJumpFromLinkAnnotation,lt=o.onJumpToDest,ot=n.useRef(),at=W.getViewport({rotation:Y,scale:B}).clone({dontFlip:!0}),_t=y.filter((function(mt){return!mt.parentId}));return e((function(){var mt=ot.current;mt&&Z.forEach((function(pt){pt.onAnnotationLayerRender&&pt.onAnnotationLayerRender({annotations:_t,container:mt,pageIndex:G,rotation:Y,scale:B})}))}),[]),n.createElement("div",{ref:ot,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(G)},_t.map((function(mt){var pt=y.find((function(Gt){return Gt.parentId===mt.id}));switch(mt.annotationType){case d.AnnotationType.Caret:return n.createElement(Ge,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Circle:return n.createElement(Xe,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.FileAttachment:return n.createElement(ze,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.FreeText:return n.createElement(xe,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Highlight:return n.createElement(Be,{key:mt.id,annotation:mt,childAnnotation:pt,page:W,viewport:at});case d.AnnotationType.Ink:return n.createElement(rn,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Line:return n.createElement(Se,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Link:return n.createElement(Fe,{key:mt.id,annotation:mt,annotationContainerRef:ot,doc:D,outlines:N,page:W,pageIndex:G,scale:B,viewport:at,onExecuteNamedAction:J,onJumpFromLinkAnnotation:K,onJumpToDest:lt});case d.AnnotationType.Polygon:return n.createElement(tn,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Polyline:return n.createElement(fn,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Popup:return n.createElement(je,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Square:return n.createElement(Qn,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Squiggly:return n.createElement(ti,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Stamp:return n.createElement(ei,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.StrikeOut:return n.createElement(ni,{key:mt.id,annotation:mt,page:W,viewport:at});case d.AnnotationType.Text:return n.createElement(ci,{key:mt.id,annotation:mt,childAnnotation:pt,page:W,viewport:at});case d.AnnotationType.Underline:return n.createElement(hi,{key:mt.id,annotation:mt,page:W,viewport:at});default:return n.createElement(n.Fragment,{key:mt.id})}})))},di=function(o){var y=o.page,D=o.renderAnnotations,N=Et(),W=n.useState({loading:!0,annotations:[]}),G=W[0],Z=W[1];return n.useEffect((function(){y.getAnnotations({intent:"display"}).then((function(Y){N.current&&Z({loading:!1,annotations:Y})}))}),[]),G.loading?n.createElement(n.Fragment,null):D(G.annotations)},fi=function(o){var y=o.doc,D=o.outlines,N=o.page,W=o.pageIndex,G=o.plugins,Z=o.rotation,Y=o.scale,B=o.onExecuteNamedAction,J=o.onJumpFromLinkAnnotation,K=o.onJumpToDest;return n.createElement(di,{page:N,renderAnnotations:function(lt){return n.createElement(ui,{annotations:lt,doc:y,outlines:D,page:N,pageIndex:W,plugins:G,rotation:Z,scale:Y,onExecuteNamedAction:B,onJumpFromLinkAnnotation:J,onJumpToDest:K})}})},mn=function(o,y){var D=o%y;return D===0?o:Math.floor(o-D)},pi=function(o){var y=o.canvasLayerRef,D=o.height,N=o.page,W=o.pageIndex,G=o.plugins,Z=o.rotation,Y=o.scale,B=o.width,J=o.onRenderCanvasCompleted,K=n.useRef();return e((function(){var lt=K.current;lt&&lt.cancel();var ot=y.current;ot.removeAttribute("data-testid"),G.forEach((function(It){It.onCanvasLayerRender&&It.onCanvasLayerRender({ele:ot,pageIndex:W,rotation:Z,scale:Y,status:d.LayerRenderStatus.PreRender})}));var at=N.getViewport({rotation:Z,scale:Y}),_t=window.devicePixelRatio||1,mt=Math.sqrt(16777216/(at.width*at.height)),pt=_t>mt;pt?ot.style.transform="scale(1, 1)":ot.style.removeProperty("transform");var Gt=Math.min(mt,_t),xt=(function(It,te){var Zt,ee;if(Math.floor(It)===It)return[It,1];var ie=1/It;if(ie>te)return[1,te];if(Math.floor(ie)===ie)return[1,ie];for(var se=It>1?ie:It,_e=0,fe=1,ye=1,ge=1;;){var ve=_e+ye,be=fe+ge;if(be>te)break;se<=ve/be?(ye=(Zt=[ve,be])[0],ge=Zt[1]):(_e=(ee=[ve,be])[0],fe=ee[1])}return se<(_e/fe+ye/ge)/2?se===It?[_e,fe]:[fe,_e]:se===It?[ye,ge]:[ge,ye]})(Gt,8),Ft=xt[0],Nt=xt[1];ot.width=mn(at.width*Gt,Ft),ot.height=mn(at.height*Gt,Ft),ot.style.width="".concat(mn(at.width,Nt),"px"),ot.style.height="".concat(mn(at.height,Nt),"px"),ot.hidden=!0;var Pt=ot.getContext("2d",{alpha:!1}),Ht=pt||_t!==1?[Gt,0,0,Gt,0,0]:null;return K.current=N.render({canvasContext:Pt,transform:Ht,viewport:at}),K.current.promise.then((function(){ot.hidden=!1,ot.setAttribute("data-testid","core__canvas-layer-".concat(W)),G.forEach((function(It){It.onCanvasLayerRender&&It.onCanvasLayerRender({ele:ot,pageIndex:W,rotation:Z,scale:Y,status:d.LayerRenderStatus.DidRender})})),J()}),(function(){J()})),function(){ot&&(ot.width=0,ot.height=0)}}),[]),n.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(D,"px"),width:"".concat(B,"px")}},n.createElement("canvas",{ref:y}))},gi=function(o){var y=o.height,D=o.page,N=o.rotation,W=o.scale,G=o.width,Z=n.useRef();return e((function(){var Y=Z.current,B=D.getViewport({rotation:N,scale:W});D.getOperatorList().then((function(J){(function(){var K=Z.current;K&&(K.innerHTML="")})(),new M.SVGGraphics(D.commonObjs,D.objs).getSVG(J,B).then((function(K){K.style.height="".concat(y,"px"),K.style.width="".concat(G,"px"),Y.appendChild(K)}))}))}),[]),n.createElement("div",{className:"rpv-core__svg-layer",ref:Z})},mi=function(o){var y=o.containerRef,D=o.page,N=o.pageIndex,W=o.plugins,G=o.rotation,Z=o.scale,Y=o.onRenderTextCompleted,B=n.useRef(),J=function(){var K=y.current;K&&([].slice.call(K.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(lt){return K.removeChild(lt)})),[].slice.call(K.querySelectorAll('br[role="presentation"]')).forEach((function(lt){return K.removeChild(lt)})))};return e((function(){var K=B.current;K&&K.cancel();var lt=y.current;if(lt){lt.removeAttribute("data-testid");var ot=D.getViewport({rotation:G,scale:Z});return W.forEach((function(at){at.onTextLayerRender&&at.onTextLayerRender({ele:lt,pageIndex:N,scale:Z,status:d.LayerRenderStatus.PreRender})})),D.getTextContent().then((function(at){J(),B.current=M.renderTextLayer({container:lt,textContent:at,textContentSource:at,viewport:ot}),B.current.promise.then((function(){lt.setAttribute("data-testid","core__text-layer-".concat(N)),[].slice.call(lt.children).forEach((function(_t){_t.classList.contains("rpv-core__text-layer-text--not")||_t.classList.add("rpv-core__text-layer-text")})),W.forEach((function(_t){_t.onTextLayerRender&&_t.onTextLayerRender({ele:lt,pageIndex:N,scale:Z,status:d.LayerRenderStatus.DidRender})})),Y()}),(function(){lt.removeAttribute("data-testid"),Y()}))})),function(){var at;J(),(at=B.current)===null||at===void 0||at.cancel()}}}),[]),n.createElement("div",{className:"rpv-core__text-layer",ref:y})},vi=function(o){var y=o.doc,D=o.measureRef,N=o.outlines,W=o.pageIndex,G=o.pageRotation,Z=o.pageSize,Y=o.plugins,B=o.renderPage,J=o.renderQueueKey,K=o.rotation,lt=o.scale,ot=o.shouldRender,at=o.viewMode,_t=o.onExecuteNamedAction,mt=o.onJumpFromLinkAnnotation,pt=o.onJumpToDest,Gt=o.onRenderCompleted,xt=o.onRotatePage,Ft=Et(),Nt=n.useState(null),Pt=Nt[0],Ht=Nt[1],It=n.useState(!1),te=It[0],Zt=It[1],ee=n.useState(!1),ie=ee[0],se=ee[1],_e=n.useRef(),fe=n.useRef(),ye=Math.abs(K+G)%180==0,ge=Z.pageWidth*lt,ve=Z.pageHeight*lt,be=ye?ge:ve,me=ye?ve:ge,Re=(Z.rotation+K+G)%360,We=n.useRef(0),He=B||function(Ce){return n.createElement(n.Fragment,null,Ce.canvasLayer.children,Ce.textLayer.children,Ce.annotationLayer.children)};return n.useEffect((function(){Ht(null),Zt(!1),se(!1)}),[G,K,lt]),n.useEffect((function(){ot&&Ft.current&&!Pt&&qe(y,W).then((function(Ce){Ft.current&&(We.current=J,Ht(Ce))}))}),[ot,Pt]),n.useEffect((function(){te&&ie&&(J!==We.current?(Ht(null),Zt(!1),se(!1)):Gt(W))}),[te,ie]),n.createElement("div",{className:c({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":at===d.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":at===d.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":at===d.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(W),ref:D,style:{height:"".concat(me,"px"),width:"".concat(be,"px")}},Pt?n.createElement(n.Fragment,null,He({annotationLayer:{attrs:{},children:n.createElement(fi,{doc:y,outlines:N,page:Pt,pageIndex:W,plugins:Y,rotation:Re,scale:lt,onExecuteNamedAction:_t,onJumpFromLinkAnnotation:mt,onJumpToDest:pt})},canvasLayer:{attrs:{},children:n.createElement(pi,{canvasLayerRef:_e,height:me,page:Pt,pageIndex:W,plugins:Y,rotation:Re,scale:lt,width:be,onRenderCanvasCompleted:function(){Ft.current&&Zt(!0)}})},canvasLayerRendered:te,doc:y,height:me,pageIndex:W,rotation:Re,scale:lt,svgLayer:{attrs:{},children:n.createElement(gi,{height:me,page:Pt,rotation:Re,scale:lt,width:be})},textLayer:{attrs:{},children:n.createElement(mi,{containerRef:fe,page:Pt,pageIndex:W,plugins:Y,rotation:Re,scale:lt,onRenderTextCompleted:function(){Ft.current&&se(!0)}})},textLayerRendered:ie,width:be,markRendered:Gt,onRotatePage:function(Ce){return xt(W,Ce)}}),Y.map((function(Ce,Le){return Ce.renderPageLayer?n.createElement(n.Fragment,{key:Le},Ce.renderPageLayer({canvasLayerRef:_e,canvasLayerRendered:te,doc:y,height:me,pageIndex:W,rotation:Re,scale:lt,textLayerRef:fe,textLayerRendered:ie,width:be})):n.createElement(n.Fragment,{key:Le})}))):n.createElement(x,{testId:"core__page-layer-loading-".concat(W)}))},bi=function(o,y){var D=y.rect;return o.height!==D.height||o.width!==D.width?D:o};(function(o){o.Horizontal="Horizontal",o.Vertical="Vertical",o.Both="Both"})(Wt||(Wt={}));var _i=function(o){return 1-Math.pow(1-o,4)},vn=1e-4,In={left:0,top:0},On={capture:!1,passive:!0},yi=function(o){var y=o.elementRef,D=o.enableSmoothScroll,N=o.isRtl,W=o.scrollDirection,G=o.onSmoothScroll,Z=n.useState(In),Y=Z[0],B=Z[1],J=n.useState(y.current),K=J[0],lt=J[1],ot=N?-1:1,at=n.useRef(W);at.current=W;var _t=n.useRef(In),mt=n.useRef(!0),pt=n.useCallback((function(){mt.current=!0,D&&B(_t.current),G(!1)}),[]),Gt=n.useCallback((function(){if(K){switch(at.current){case Wt.Horizontal:_t.current={left:ot*K.scrollLeft,top:0};break;case Wt.Both:_t.current={left:ot*K.scrollLeft,top:K.scrollTop};break;case Wt.Vertical:default:_t.current={left:0,top:K.scrollTop}}D&&!mt.current||B(_t.current)}}),[K]);e((function(){lt(y.current)})),e((function(){if(K)return K.addEventListener("scroll",Gt,On),function(){K.removeEventListener("scroll",Gt,On)}}),[K]);var xt=n.useCallback((function(Ft,Nt){var Pt=y.current;if(!Pt)return Promise.resolve();var Ht={left:0,top:0};switch(at.current){case Wt.Horizontal:Ht.left=ot*Ft.left;break;case Wt.Both:Ht.left=ot*Ft.left,Ht.top=Ft.top;break;case Wt.Vertical:default:Ht.top=Ft.top}return Nt?(mt.current=!1,G(!0),new Promise((function(It,te){(function(Zt,ee,ie,se,_e,fe){_e===void 0&&(_e=function(Le){return Le}),fe===void 0&&(fe=function(){});var ye=0,ge=0,ve=!1;switch(ee){case Wt.Horizontal:ge=Zt.scrollLeft,ye=0;case Wt.Both:ge=Zt.scrollLeft,ye=Zt.scrollTop;break;case Wt.Vertical:default:ge=0,ye=Zt.scrollTop}var be=function(){ve||(ve=!0,Zt.scrollLeft=ie.left,Zt.scrollTop=ie.top,fe())};if(Math.abs(ye-ie.top)<=vn&&ee===Wt.Vertical)be();else if(Math.abs(ge-ie.left)<=vn&&ee===Wt.Horizontal)be();else{var me,Re=-1,We=ge-ie.left,He=ye-ie.top,Ce=function(Le){Re===-1&&(Re=Le);var Ve=Le-Re,Ot=Math.min(Ve/se,1),Dt=_e(Ot),Tt={left:ge-We*Dt,top:ye-He*Dt};switch(ee){case Wt.Horizontal:Zt.scrollLeft=Tt.left;break;case Wt.Both:Zt.scrollLeft=Tt.left,Zt.scrollTop=Tt.top;break;case Wt.Vertical:default:Zt.scrollTop=Tt.top}Math.abs(Tt.top-ie.top)<=vn&&Math.abs(Tt.left-ie.left)<=vn&&!ve&&(window.cancelAnimationFrame(me),be()),Ve<se?me=window.requestAnimationFrame(Ce):window.cancelAnimationFrame(me)};me=window.requestAnimationFrame(Ce)}})(Pt,at.current,Ht,400,_i,(function(){pt(),It()}))}))):new Promise((function(It,te){switch(at.current){case Wt.Horizontal:Pt.scrollLeft=Ht.left;break;case Wt.Both:Pt.scrollLeft=Ht.left,Pt.scrollTop=Ht.top;break;case Wt.Vertical:default:Pt.scrollTop=Ht.top}It()}))}),[y]);return{scrollOffset:Y,scrollTo:xt}},pn=function(o,y,D){return Math.max(o,Math.min(D,y))},Ai=function(o,y){if(y!==d.ViewMode.DualPageWithCover)return 0;if(!(function(W){var G=W.length;if(G===1)return!1;for(var Z=1;Z<G;Z++)if(W[Z].height!==W[0].height||W[Z].width!==W[0].width)return!0;return!1})(o))return 2*o[0].width;var D=ne(o.slice(1),2).map((function(W){return W.length===2?W[0].width+W[1].width:W[0].width})),N=[o[0].width].concat(D);return Math.max.apply(Math,N)},Si={left:0,top:0},Ei={left:0,top:0},En={left:0,top:0},wi={left:0,top:0},Ci={height:0,width:0},Nn={left:0,top:0},Bn="data-virtual-index",Pi=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Ti=function(o){var y=o.enableSmoothScroll,D=o.isRtl,N=o.numberOfItems,W=o.parentRef,G=o.setRenderRange,Z=o.sizes,Y=o.scrollMode,B=o.viewMode,J=n.useState(!1),K=J[0],lt=J[1],ot=n.useCallback((function(Ot){return lt(Ot)}),[]),at=n.useRef(Y);at.current=Y;var _t=n.useRef(B);_t.current=B;var mt=Y===d.ScrollMode.Wrapped||B===d.ViewMode.DualPageWithCover||B===d.ViewMode.DualPage?Wt.Both:Y===d.ScrollMode.Horizontal?Wt.Horizontal:Wt.Vertical,pt=yi({elementRef:W,enableSmoothScroll:y,isRtl:D,scrollDirection:mt,onSmoothScroll:ot}),Gt=pt.scrollOffset,xt=pt.scrollTo,Ft=(function(Ot){var Dt=Ot.elementRef,Tt=n.useState(Dt.current),Rt=Tt[0],kt=Tt[1],Ut=n.useRef(!1),jt=n.useReducer(bi,{height:0,width:0}),Mt=jt[0],wt=jt[1];return e((function(){Dt.current!==Rt&&kt(Dt.current)})),e((function(){if(Rt&&!Ut.current){Ut.current=!0;var Vt=Rt.getBoundingClientRect(),Yt=Vt.height,ue=Vt.width;wt({rect:{height:Yt,width:ue}})}}),[Rt]),n.useEffect((function(){if(Rt){var Vt=new ResizeObserver((function(Yt,ue){Yt.forEach((function(ce){if(ce.target===Rt){var Te=ce.contentRect,De=Te.height,qt=Te.width;wt({rect:{height:De,width:qt}})}}))}));return Vt.observe(Rt),function(){Vt.unobserve(Rt)}}}),[Rt]),Mt})({elementRef:W}),Nt=n.useRef({scrollOffset:Nn,measurements:[]});Nt.current.scrollOffset=Gt;var Pt=n.useMemo((function(){return Array(N).fill(-1)}),[]),Ht=n.useState(Pt),It=Ht[0],te=Ht[1],Zt=n.useMemo((function(){var Ot=new IntersectionObserver((function(Dt){Dt.forEach((function(Tt){var Rt=Tt.isIntersecting?Tt.intersectionRatio:-1,kt=Tt.target.getAttribute(Bn);if(kt){var Ut=parseInt(kt,10);0<=Ut&&Ut<N&&te((function(jt){return jt[Ut]=Rt,(function(Mt,wt,Vt){for(var Yt,ue=0,ce=wt.length;ue<ce;ue++)!Yt&&ue in wt||(Yt||(Yt=Array.prototype.slice.call(wt,0,ue)),Yt[ue]=wt[ue]);return Mt.concat(Yt||Array.prototype.slice.call(wt))})([],jt)}))}}))}),{threshold:Pi});return Ot}),[]),ee=n.useMemo((function(){return Y===d.ScrollMode.Page&&B===d.ViewMode.SinglePage?(function(Ot,Dt,Tt){for(var Rt=[],kt=0;kt<Ot;kt++){var Ut={height:Math.max(Dt.height,Tt[kt].height),width:Math.max(Dt.width,Tt[kt].width)},jt=kt===0?wi:Rt[kt-1].end,Mt={left:jt.left+Ut.width,top:jt.top+Ut.height};Rt[kt]={index:kt,start:jt,size:Ut,end:Mt,visibility:-1}}return Rt})(N,Ft,Z):B===d.ViewMode.DualPageWithCover?(function(Ot,Dt,Tt,Rt){for(var kt=[],Ut=0,jt=0,Mt=En,wt=0;wt<Ot;wt++){var Vt=wt===0?{height:Rt===d.ScrollMode.Page?Math.max(Dt.height,Tt[wt].height):Tt[wt].height,width:Rt===d.ScrollMode.Page?Math.max(Dt.width,Tt[wt].width):Tt[wt].width}:{height:Rt===d.ScrollMode.Page?Math.max(Dt.height,Tt[wt].height):Tt[wt].height,width:Math.max(Dt.width/2,Tt[wt].width)};Rt===d.ScrollMode.Page?Mt=wt===0?En:{left:wt%2==0?Vt.width:0,top:Math.floor((wt-1)/2)*Vt.height+kt[0].end.top}:wt===0?(Mt=En,Ut=Tt[0].height,jt=0):wt%2==1?(Mt={left:0,top:Ut+=jt},jt=wt===Ot-1?Tt[wt].height:Math.max(Tt[wt].height,Tt[wt+1].height)):Mt={left:kt[wt-1].end.left,top:Ut};var Yt={left:Mt.left+Vt.width,top:Mt.top+Vt.height};kt[wt]={index:wt,start:Mt,size:Vt,end:Yt,visibility:-1}}return kt})(N,Ft,Z,Y):B===d.ViewMode.DualPage?(function(Ot,Dt,Tt,Rt){for(var kt=[],Ut=0,jt=0,Mt=Ei,wt=0;wt<Ot;wt++){var Vt={height:Rt===d.ScrollMode.Page?Math.max(Dt.height,Tt[wt].height):Tt[wt].height,width:Math.max(Dt.width/2,Tt[wt].width)};Rt===d.ScrollMode.Page?Mt={left:wt%2==0?0:Vt.width,top:Math.floor(wt/2)*Vt.height}:wt%2==0?(Mt={left:0,top:Ut+=jt},jt=wt===Ot-1?Tt[wt].height:Math.max(Tt[wt].height,Tt[wt+1].height)):Mt={left:kt[wt-1].end.left,top:Ut};var Yt={left:Mt.left+Vt.width,top:Mt.top+Vt.height};kt[wt]={index:wt,start:Mt,size:Vt,end:Yt,visibility:-1}}return kt})(N,Ft,Z,Y):(function(Ot,Dt,Tt,Rt){for(var kt=[],Ut=0,jt={left:0,top:0},Mt=0,wt=Si,Vt=0;Vt<Ot;Vt++){var Yt=Tt[Vt];if(Vt===0)Ut=Yt.width,jt={left:0,top:0},Mt=Yt.height;else switch(Rt){case d.ScrollMode.Wrapped:(Ut+=Yt.width)<Dt.width?(wt={left:kt[Vt-1].end.left,top:jt.top},Mt=Math.max(Mt,Yt.height)):(Ut=Yt.width,jt={left:(wt={left:jt.left,top:jt.top+Mt}).left,top:wt.top},Mt=Yt.height);break;case d.ScrollMode.Horizontal:case d.ScrollMode.Vertical:default:wt=kt[Vt-1].end}var ue={left:wt.left+Yt.width,top:wt.top+Yt.height};kt[Vt]={index:Vt,start:wt,size:Yt,end:ue,visibility:-1}}return kt})(N,Ft,Z,Y)}),[Y,Z,B,Ft]),ie=ee[N-1]?{height:ee[N-1].end.top,width:ee[N-1].end.left}:Ci;Nt.current.measurements=ee;var se=n.useMemo((function(){var Ot=(function(Vt,Yt,ue,ce){var Te=0;switch(Vt){case Wt.Horizontal:Te=ce.left;break;case Wt.Vertical:default:Te=ce.top}var De=Yt.length-1,qt=(function(le,$e,ln,_n){for(;le<=$e;){var en=(le+$e)/2|0,gn=_n(en);if(gn<ln)le=en+1;else{if(!(gn>ln))return en;$e=en-1}}return le>0?le-1:0})(0,De,Te,(function(le){switch(Vt){case Wt.Horizontal:return Yt[le].start.left;case Wt.Both:case Wt.Vertical:default:return Yt[le].start.top}}));if(Vt===Wt.Both)for(var ke=Yt[qt].start.top;qt-1>=0&&Yt[qt-1].start.top===ke&&Yt[qt-1].start.left>=ce.left;)qt--;for(var de=qt;de<=De;){var pe={top:Yt[de].start.top-ce.top,left:Yt[de].start.left-ce.left},Ee={height:ue.height-pe.top,width:ue.width-pe.left};if(Vt===Wt.Horizontal&&Ee.width<0||Vt===Wt.Vertical&&Ee.height<0||Vt===Wt.Both&&(Ee.width<0||Ee.height<0))break;de++}return{start:qt,end:de}})(mt,ee,Ft,Gt),Dt=Ot.start,Tt=Ot.end,Rt=It.slice(pn(0,N,Dt),pn(0,N,Tt)),kt=Dt+Rt.reduce((function(Vt,Yt,ue,ce){return Yt>ce[Vt]?ue:Vt}),0),Ut=kt=pn(0,N-1,kt),jt=G({endPage:Tt,numPages:N,startPage:Dt}),Mt=jt.startPage,wt=jt.endPage;switch(Mt=Math.max(Mt,0),wt=Math.min(wt,N-1),B){case d.ViewMode.DualPageWithCover:kt>0&&(Ut=kt%2==1?kt:kt-1),Mt=Mt===0?0:Mt%2==1?Mt:Mt-1,N-(wt=wt%2==1?wt-1:wt)<=2&&(wt=N-1);break;case d.ViewMode.DualPage:Ut=kt%2==0?kt:kt-1,Mt=Mt%2==0?Mt:Mt-1,wt=wt%2==1?wt:wt-1;break;case d.ViewMode.SinglePage:default:Ut=kt}return{startPage:Mt,endPage:wt,maxVisbilityIndex:Ut}}),[ee,Ft,Gt,B,It]),_e=se.startPage,fe=se.endPage,ye=se.maxVisbilityIndex,ge=n.useMemo((function(){for(var Ot=[],Dt=function(Rt){var kt=ee[Rt],Ut=t(t({},kt),{visibility:It[Rt]!==void 0?It[Rt]:-1,measureRef:function(jt){jt&&(jt.setAttribute(Bn,"".concat(Rt)),Zt.observe(jt))}});Ot.push(Ut)},Tt=_e;Tt<=fe;Tt++)Dt(Tt);return Ot}),[_e,fe,It,ee]),ve=n.useCallback((function(Ot,Dt){var Tt=Nt.current.measurements[pn(0,N-1,Ot)],Rt=at.current===d.ScrollMode.Page?Nn:Dt;return Tt?xt({left:Rt.left+Tt.start.left,top:Rt.top+Tt.start.top},y):Promise.resolve()}),[xt,y]),be=n.useCallback((function(Ot,Dt){var Tt=Nt.current.measurements,Rt=Tt[Ot].start,kt=Tt.find((function(jt){return jt.start.top-Rt.top>1e-12}));if(!kt)return Promise.resolve();var Ut=kt.index;switch(_t.current){case d.ViewMode.DualPage:Ut=Ut%2==0?Ut:Ut+1;break;case d.ViewMode.DualPageWithCover:Ut=Ut%2==1?Ut:Ut+1}return ve(Ut,Dt)}),[]),me=n.useCallback((function(Ot,Dt){for(var Tt=Nt.current.measurements,Rt=Tt[Ot].start,kt=Ot,Ut=!1,jt=N-1;jt>=0;jt--)if(Rt.top-Tt[jt].start.top>1e-12){Ut=!0,kt=Tt[jt].index;break}if(!Ut)return Promise.resolve();switch(_t.current){case d.ViewMode.DualPage:kt=kt%2==0?kt:kt-1;break;case d.ViewMode.DualPageWithCover:kt=kt%2==0?kt-1:kt}return kt===Ot&&(kt=Ot-1),ve(kt,Dt)}),[]),Re=n.useCallback((function(Ot,Dt){if(_t.current===d.ViewMode.DualPageWithCover||_t.current===d.ViewMode.DualPage)return be(Ot,Dt);switch(at.current){case d.ScrollMode.Wrapped:return be(Ot,Dt);case d.ScrollMode.Horizontal:case d.ScrollMode.Vertical:default:return ve(Ot+1,Dt)}}),[]),We=n.useCallback((function(Ot,Dt){if(_t.current===d.ViewMode.DualPageWithCover||_t.current===d.ViewMode.DualPage)return me(Ot,Dt);switch(at.current){case d.ScrollMode.Wrapped:return me(Ot,Dt);case d.ScrollMode.Horizontal:case d.ScrollMode.Vertical:default:return ve(Ot-1,Dt)}}),[]),He=n.useCallback((function(){return(function(Ot,Dt){switch(Dt){case d.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Ot.width,"px")};case d.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Ot.height,"px"),width:"100%"}}})(ie,at.current)}),[ie]),Ce=n.useCallback((function(Ot){return(function(Dt,Tt,Rt){return Rt!==d.ScrollMode.Page?{}:{height:"".concat(Tt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Dt.start.top,"px)")}})(Ot,Ft,at.current)}),[Ft]),Le=n.useCallback((function(Ot){return(function(Dt,Tt,Rt,kt,Ut){var jt,Mt,wt,Vt,Yt,ue,ce,Te=Tt?"right":"left",De=Tt?-1:1,qt=Rt.length,ke=Dt.start.left*De,de=Dt.size,pe=de.height,Ee=de.width;if(kt===d.ViewMode.DualPageWithCover){var le=Ut===d.ScrollMode.Page?0:Dt.start.top;return Dt.index===0||qt%2==0&&Dt.index===qt-1?((jt={height:"".concat(pe,"px"),minWidth:"".concat(Ai(Rt,kt),"px"),width:"100%"})[Te]=0,jt.position="absolute",jt.top=0,jt.transform="translate(".concat(ke,"px, ").concat(le,"px)"),jt):((Mt={height:"".concat(pe,"px"),width:"".concat(Ee,"px")})[Te]=0,Mt.position="absolute",Mt.top=0,Mt.transform="translate(".concat(ke,"px, ").concat(le,"px)"),Mt)}if(kt===d.ViewMode.DualPage)return(wt={height:"".concat(pe,"px"),width:"".concat(Ee,"px")})[Te]=0,wt.position="absolute",wt.top=0,wt.transform="translate(".concat(ke,"px, ").concat(Ut===d.ScrollMode.Page?0:Dt.start.top,"px)"),wt;switch(Ut){case d.ScrollMode.Horizontal:return(Vt={height:"100%",width:"".concat(Ee,"px")})[Te]=0,Vt.position="absolute",Vt.top=0,Vt.transform="translateX(".concat(ke,"px)"),Vt;case d.ScrollMode.Page:return(Yt={height:"".concat(pe,"px"),width:"".concat(Ee,"px")})[Te]=0,Yt.position="absolute",Yt.top=0,Yt;case d.ScrollMode.Wrapped:return(ue={height:"".concat(pe,"px"),width:"".concat(Ee,"px")})[Te]=0,ue.position="absolute",ue.top=0,ue.transform="translate(".concat(ke,"px, ").concat(Dt.start.top,"px)"),ue;case d.ScrollMode.Vertical:default:return(ce={height:"".concat(pe,"px"),width:"100%"})[Te]=0,ce.position="absolute",ce.top=0,ce.transform="translateY(".concat(Dt.start.top,"px)"),ce}})(Ot,D,Z,_t.current,at.current)}),[D,Z]),Ve=n.useCallback((function(Ot,Dt){var Tt=Nt.current,Rt=Tt.measurements,kt=Tt.scrollOffset,Ut=Rt[pn(0,N-1,Dt)];if(Ut){var jt=at.current===d.ScrollMode.Page?{left:Ut.start.left,top:Ut.start.top}:{left:kt.left*Ot,top:kt.top*Ot};return xt(jt,!1)}return Promise.resolve()}),[]);return n.useEffect((function(){return function(){Zt.disconnect()}}),[]),{boundingClientRect:Ft,isSmoothScrolling:K,startPage:_e,endPage:fe,maxVisbilityIndex:ye,virtualItems:ge,getContainerStyles:He,getItemContainerStyles:Ce,getItemStyles:Le,scrollToItem:ve,scrollToNextItem:Re,scrollToPreviousItem:We,zoom:Ve}},wn=function(o,y,D,N,W,G){var Z=D;switch(!0){case(W===d.ViewMode.DualPageWithCover&&G>=3):case(W===d.ViewMode.DualPage&&G>=3):Z=2*D;break;default:Z=D}switch(N){case d.SpecialZoomLevel.ActualSize:return 1;case d.SpecialZoomLevel.PageFit:return Math.min((o.clientWidth-17)/Z,(o.clientHeight-16)/y);case d.SpecialZoomLevel.PageWidth:return(o.clientWidth-17)/Z}},ki=function(o){var y,D,N=o.getCurrentPage,W=(y=50,D=n.useRef([]),n.useEffect((function(){return function(){D.current=[]}}),[]),{push:function(J){var K=D.current;K.length+1>y&&K.shift(),K.push(J),D.current=K},map:function(J){return D.current.map((function(K){return J(K)}))},pop:function(){var J=D.current;if(J.length===0)return null;var K=J.pop();return D.current=J,K}}),G=(function(J){var K=n.useRef([]);return n.useEffect((function(){return function(){K.current=[]}}),[]),{dequeue:function(){var lt=K.current;if(lt.length===0)return null;var ot=lt.shift();return K.current=lt,ot||null},enqueue:function(lt){var ot=K.current;ot.length+1>J&&ot.pop(),K.current=[lt].concat(ot)},map:function(lt){return K.current.map((function(ot){return lt(ot)}))}}})(50),Z=function(){var J=G.dequeue();return J&&W.push(J),J&&J.pageIndex===N()?Z():J},Y=function(){var J=W.pop();return J&&G.enqueue(J),J&&J.pageIndex===N()?Y():J},B=n.useCallback((function(J){W.push(J)}),[]);return{getNextDestination:Z,getPreviousDestination:Y,markVisitedDestination:B}},Hn=function(o){var y=[];return o.map((function(D){y=y.concat(D).concat((function(N){var W=[];return N.items&&N.items.length>0&&(W=W.concat(Hn(N.items))),W})(D))})),y},Un={capture:!1,passive:!0},Ri={height:0,width:0},Cn={height:0,width:0},Mi=function(o){var y=o.getCurrentPage,D=o.getCurrentScrollMode,N=o.jumpToPage,W=o.targetRef,G=n.useState(d.FullScreenMode.Normal),Z=G[0],Y=G[1],B=(function(){var It=n.useState(Ri),te=It[0],Zt=It[1],ee=vt((function(){Zt({height:window.innerHeight,width:window.innerWidth})}),100);return e((function(){return window.addEventListener("resize",ee,Un),function(){window.removeEventListener("resize",ee,Un)}}),[]),te})(),J=n.useState(Cn),K=J[0],lt=J[1],ot=n.useRef(Cn),at=n.useRef(y()),_t=n.useRef(Cn),mt=n.useState(W.current),pt=mt[0],Gt=mt[1],xt=n.useRef();e((function(){W.current!==pt&&Gt(W.current)}),[]),e((function(){if(pt){var It=new ResizeObserver((function(te){te.forEach((function(Zt){var ee=Zt.target.getBoundingClientRect(),ie=ee.height,se=ee.width;lt({height:ie,width:se})}))}));return It.observe(pt),function(){It.unobserve(pt),It.disconnect()}}}),[pt]);var Ft=n.useCallback((function(It){var te=dt();return te&&te!==It?(Y(d.FullScreenMode.Normal),yt(te)):Promise.resolve()}),[]),Nt=n.useCallback((function(It){It&&nt()&&(Gt(It),Ft(It).then((function(){xt.current=It,Y(d.FullScreenMode.Entering),(function(te){H&&te[tt.RequestFullScreen]()})(It)})))}),[]),Pt=n.useCallback((function(){dt()&&(Y(d.FullScreenMode.Exitting),yt(document))}),[]),Ht=n.useCallback((function(){pt&&dt()!==pt&&Y(d.FullScreenMode.Exitting)}),[pt]);return n.useEffect((function(){switch(Z){case d.FullScreenMode.Entering:xt.current&&(xt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),at.current=y(),ot.current={height:window.innerHeight,width:window.innerWidth};break;case d.FullScreenMode.Entered:D()===d.ScrollMode.Page?N(at.current).then((function(){Y(d.FullScreenMode.EnteredCompletely)})):Y(d.FullScreenMode.EnteredCompletely);break;case d.FullScreenMode.Exitting:xt.current&&(xt.current.style.backgroundColor="",xt.current=null),at.current=y();break;case d.FullScreenMode.Exited:Y(d.FullScreenMode.Normal),D()===d.ScrollMode.Page&&N(at.current)}}),[Z]),n.useEffect((function(){if(Z!==d.FullScreenMode.Normal)return Z===d.FullScreenMode.Entering&&B.height===K.height&&B.width===K.width&&B.height>0&&B.width>0&&(_t.current.height===0||B.height==_t.current.height)?(_t.current={height:window.innerHeight,width:window.innerWidth},void Y(d.FullScreenMode.Entered)):void(Z===d.FullScreenMode.Exitting&&ot.current.height===B.height&&ot.current.width===B.width&&B.height>0&&B.width>0&&Y(d.FullScreenMode.Exited))}),[Z,B,K]),n.useEffect((function(){var It;return It=Ht,H&&document.addEventListener(tt.FullScreenChange,It),function(){(function(te){H&&document.removeEventListener(tt.FullScreenChange,te)})(Ht)}}),[pt]),{enterFullScreenMode:Nt,exitFullScreenMode:Pt,fullScreenMode:Z}},xi={buildPageStyles:function(){return{}},transformSize:function(o){return o.size}},on={left:0,top:0},Fi=function(o){var y=o.currentFile,D=o.defaultScale,N=o.doc,W=o.enableSmoothScroll,G=o.initialPage,Z=o.initialRotation,Y=o.initialScale,B=o.pageLayout,J=o.pageSizes,K=o.plugins,lt=o.renderPage,ot=o.scrollMode,at=o.setRenderRange,_t=o.viewMode,mt=o.viewerState,pt=o.onDocumentLoad,Gt=o.onOpenFile,xt=o.onPageChange,Ft=o.onRotate,Nt=o.onRotatePage,Pt=o.onZoom,Ht=N.numPages,It=N.loadingTask.docId,te=n.useContext(S).l10n,Zt=n.useContext(u),ee=Zt.direction===d.TextDirection.RightToLeft,ie=n.useRef(),se=n.useRef(),_e=n.useState(G),fe=_e[0],ye=_e[1],ge=n.useRef(null),ve=ki({getCurrentPage:function(){return qt.current.pageIndex}}),be=n.useState(Z),me=be[0],Re=be[1],We=ct(me),He=n.useState(!1),Ce=He[0],Le=He[1],Ve=n.useState(new Map),Ot=Ve[0],Dt=Ve[1],Tt=n.useState(ot),Rt=Tt[0],kt=Tt[1],Ut=ct(Rt),jt=n.useState(_t),Mt=jt[0],wt=jt[1],Vt=ct(Mt),Yt=(function(ft){var zt=Et(),Kt=n.useState([]),ae=Kt[0],re=Kt[1];return n.useEffect((function(){ft.getOutline().then((function(Jt){if(zt.current&&Jt!==null){var we=Hn(Jt);re(we)}}))}),[]),ae})(N),ue=n.useState(Y),ce=ue[0],Te=ue[1],De=ct(ce),qt=n.useRef(mt),ke=n.useRef(typeof D=="string"?D:null),de=n.useRef(-1),pe=n.useRef(-1),Ee=n.useRef(G),le=Mi({getCurrentPage:function(){return qt.current.pageIndex},getCurrentScrollMode:function(){return qt.current.scrollMode},jumpToPage:function(ft){return Ke(ft)},targetRef:se}),$e=n.useState(-1),ln=$e[0],_n=$e[1],en=n.useState(0),gn=en[0],Bi=en[1],Ie=f({doc:N});n.useEffect((function(){return function(){Ae.clear(),Ue.clear()}}),[It]);var Vn=n.useMemo((function(){return Object.assign({},xi,B)}),[]),Hi=n.useMemo((function(){return Array(Ht).fill(0).map((function(ft,zt){var Kt=[J[zt].pageHeight,J[zt].pageWidth],ae=Math.abs(me)%180==0?{height:Kt[0],width:Kt[1]}:{height:Kt[1],width:Kt[0]},re={height:ae.height*ce,width:ae.width*ce};return Vn.transformSize({numPages:Ht,pageIndex:zt,size:re})}))}),[me,ce]),he=Ti({enableSmoothScroll:W,isRtl:ee,numberOfItems:Ht,parentRef:se,scrollMode:Rt,setRenderRange:at,sizes:Hi,viewMode:Mt}),Ui=vt((function(){!ke.current||qt.current.fullScreenMode!==d.FullScreenMode.Normal||G>0&&Ee.current===G||nn(ke.current)}),200);(function(ft){var zt=ft.targetRef,Kt=ft.onResize;e((function(){var ae=new ResizeObserver((function(Jt){Jt.forEach((function(we){Kt(we.target)}))})),re=zt.current;if(re)return ae.observe(re),function(){ae.unobserve(re)}}),[])})({targetRef:se,onResize:Ui});var Ye=function(ft){var zt=ft;K.forEach((function(Kt){Kt.onViewerStateChange&&(zt=Kt.onViewerStateChange(zt))})),qt.current=zt},ji=function(){return se.current},Wi=function(){return qt.current},zi=n.useCallback((function(ft){ve.markVisitedDestination(ft)}),[]),kn=n.useCallback((function(ft){var zt=ft.pageIndex,Kt=ft.bottomOffset,ae=ft.leftOffset,re=ft.scaleTo,Jt=se.current,we=qt.current;return Jt&&we?new Promise((function(Je,Dn){qe(N,zt).then((function(yn){var Ze=yn.getViewport({scale:1}),An=0,Zn=(typeof Kt=="function"?Kt(Ze.width,Ze.height):Kt)||0,Sn=(typeof ae=="function"?ae(Ze.width,Ze.height):ae)||0,cn=we.scale;switch(re){case d.SpecialZoomLevel.PageFit:An=0,Sn=0,nn(d.SpecialZoomLevel.PageFit);break;case d.SpecialZoomLevel.PageWidth:cn=wn(Jt,J[zt].pageHeight,J[zt].pageWidth,d.SpecialZoomLevel.PageWidth,_t,Ht),An=(Ze.height-Zn)*cn,Sn*=cn,nn(cn);break;default:An=(Ze.height-Zn)*cn,Sn*=cn}switch(we.scrollMode){case d.ScrollMode.Horizontal:he.scrollToItem(zt,{left:Sn,top:0}).then((function(){Je()}));break;case d.ScrollMode.Vertical:default:he.scrollToItem(zt,{left:0,top:An}).then((function(){Je()}))}}))})):Promise.resolve()}),[]),qn=n.useCallback((function(ft){return ve.markVisitedDestination(ft),kn(ft)}),[]),Vi=n.useCallback((function(){var ft=ve.getNextDestination();return ft?kn(ft):Promise.resolve()}),[]),qi=n.useCallback((function(){var ft=ve.getPreviousDestination();return ft?kn(ft):Promise.resolve()}),[]),Gi=n.useCallback((function(){return he.scrollToNextItem(qt.current.pageIndex,on)}),[]),Ke=n.useCallback((function(ft){return 0<=ft&&ft<Ht?he.scrollToItem(ft,on):Promise.resolve()}),[]),Xi=n.useCallback((function(){return he.scrollToPreviousItem(qt.current.pageIndex,on)}),[]),Gn=n.useCallback((function(ft){var zt,Kt;(zt=ft.name,Kt=zt.split(/\./).pop(),Kt?Kt.toLowerCase():"").toLowerCase()==="pdf"&&new Promise((function(ae){var re=new FileReader;re.readAsArrayBuffer(ft),re.onload=function(){var Jt=new Uint8Array(re.result);ae(Jt)}})).then((function(ae){Gt(ft.name,ae)}))}),[Gt]),Xn=n.useCallback((function(ft){var zt=ft===d.RotateDirection.Backward?-90:90,Kt=qt.current.rotation,ae=Kt===360||Kt===-360?zt:Kt+zt;Ie.markNotRendered(),Re(ae),Ye(t(t({},qt.current),{rotation:ae})),Ft({direction:ft,doc:N,rotation:ae})}),[]),Rn=n.useCallback((function(ft,zt){var Kt=zt===d.RotateDirection.Backward?-90:90,ae=qt.current.pagesRotation,re=(ae.has(ft)?ae.get(ft):Z)+Kt,Jt=ae.set(ft,re);Dt(Jt),Le((function(we){return!we})),Ye(t(t({},qt.current),{pagesRotation:Jt,rotatedPage:ft})),Nt({direction:zt,doc:N,pageIndex:ft,rotation:re}),Ie.markRendering(ft),_n(ft)}),[]),$n=n.useCallback((function(ft){Ye(t(t({},qt.current),{scrollMode:ft})),kt(ft)}),[]),Yn=n.useCallback((function(ft){Ye(t(t({},qt.current),{viewMode:ft})),wt(ft)}),[]),nn=n.useCallback((function(ft){var zt=se.current,Kt=qt.current.pageIndex;if(!(Kt<0||Kt>=Ht)){var ae=J[Kt].pageHeight,re=J[Kt].pageWidth,Jt=zt?typeof ft=="string"?wn(zt,ae,re,ft,qt.current.viewMode,Ht):ft:1;ke.current=typeof ft=="string"?ft:null,Jt!==qt.current.scale&&(Bi((function(we){return we+1})),Ie.markNotRendered(),Te(Jt),Pt({doc:N,scale:Jt}),Ye(t(t({},qt.current),{scale:Jt})))}}),[]),$i=n.useCallback((function(ft){le.enterFullScreenMode(ft)}),[]),Yi=n.useCallback((function(){le.exitFullScreenMode()}),[]);n.useEffect((function(){Ye(t(t({},qt.current),{fullScreenMode:le.fullScreenMode}))}),[le.fullScreenMode]),n.useEffect((function(){var ft={enterFullScreenMode:$i,exitFullScreenMode:Yi,getPagesContainer:ji,getViewerState:Wi,jumpToDestination:qn,jumpToNextDestination:Vi,jumpToPreviousDestination:qi,jumpToNextPage:Gi,jumpToPreviousPage:Xi,jumpToPage:Ke,openFile:Gn,rotate:Xn,rotatePage:Rn,setViewerState:Ye,switchScrollMode:$n,switchViewMode:Yn,zoom:nn};return K.forEach((function(zt){zt.install&&zt.install(ft)})),function(){K.forEach((function(zt){zt.uninstall&&zt.uninstall(ft)}))}}),[It]),n.useEffect((function(){pt({doc:N,file:y}),K.forEach((function(ft){ft.onDocumentLoad&&ft.onDocumentLoad({doc:N,file:y})}))}),[It]);var Mn,xn,Fn,Kn=he.boundingClientRect;Mn=function(){G&&Ke(G)},xn=Kn.height>0&&Kn.width>0,Fn=n.useRef(!1),e((function(){xn&&!Fn.current&&(Fn.current=!0,Mn())}),[Mn,xn]),e((function(){var ft=qt.current.pageIndex;ft>-1&&Ut!==Rt&&he.scrollToItem(ft,on).then((function(){le.fullScreenMode===d.FullScreenMode.EnteredCompletely&&(W||Ie.markNotRendered(),de.current=-1)}))}),[Rt]),e((function(){var ft=qt.current.pageIndex;ft>-1&&We!==me&&he.scrollToItem(ft,on)}),[me]),e((function(){De!=0&&De!=qt.current.scale&&he.zoom(qt.current.scale/De,qt.current.pageIndex).then((function(){le.fullScreenMode===d.FullScreenMode.EnteredCompletely&&(pe.current=-1)}))}),[ce]),e((function(){if(Vt!==qt.current.viewMode){var ft=he.startPage,zt=he.endPage,Kt=he.virtualItems;Ie.markNotRendered(),Ie.setRange(ft,zt);for(var ae=function(Jt){var we=Kt.find((function(Je){return Je.index===Jt}));we&&Ie.setVisibility(Jt,we.visibility)},re=ft;re<=zt;re++)ae(re);Ln()}}),[Mt]),e((function(){var ft=qt.current.pageIndex;ft>-1&&Vt!==Mt&&he.scrollToItem(ft,on)}),[Mt]),e((function(){var ft=qt.current.pageIndex;ft>0&&ft===G&&Ee.current===G&&ke.current&&(Ee.current=-1,nn(ke.current))}),[fe]),n.useEffect((function(){he.isSmoothScrolling||ge.current!==null&&ge.current===fe||(ge.current=fe,xt({currentPage:fe,doc:N}))}),[fe,he.isSmoothScrolling]),n.useEffect((function(){le.fullScreenMode===d.FullScreenMode.Entering&&qt.current.scrollMode===d.ScrollMode.Page&&(de.current=qt.current.pageIndex),le.fullScreenMode===d.FullScreenMode.EnteredCompletely&&qt.current.scrollMode===d.ScrollMode.Page&&W&&(de.current=-1),le.fullScreenMode===d.FullScreenMode.EnteredCompletely&&ke.current&&(pe.current=qt.current.pageIndex,nn(ke.current))}),[le.fullScreenMode]),n.useEffect((function(){if(le.fullScreenMode!==d.FullScreenMode.Entering&&le.fullScreenMode!==d.FullScreenMode.Exitting&&!he.isSmoothScrolling){var ft=he.startPage,zt=he.endPage,Kt=he.maxVisbilityIndex,ae=he.virtualItems,re=Kt,Jt=le.fullScreenMode===d.FullScreenMode.Entered||le.fullScreenMode===d.FullScreenMode.EnteredCompletely;if(!(Jt&&re!==de.current&&de.current>-1||Jt&&re!==pe.current&&pe.current>-1)){ye(re),Ye(t(t({},qt.current),{pageIndex:re})),Ie.setRange(ft,zt);for(var we=function(Dn){var yn=ae.find((function(Ze){return Ze.index===Dn}));yn&&Ie.setVisibility(Dn,yn.visibility)},Je=ft;Je<=zt;Je++)we(Je);Ln()}}}),[he.startPage,he.endPage,he.isSmoothScrolling,he.maxVisbilityIndex,le.fullScreenMode,Ce,me,ce]);var Ki=n.useCallback((function(ft){Ie.markRendered(ft),Ln()}),[gn]),Ln=function(){var ft=Ie.getHighestPriorityPage();ft>-1&&Ie.isInRange(ft)&&(Ie.markRendering(ft),_n(ft))},Ji=function(ft){var zt=fe-1,Kt=fe+1;switch(ft){case"FirstPage":Ke(0);break;case"LastPage":Ke(Ht-1);break;case"NextPage":Kt<Ht&&Ke(Kt);break;case"PrevPage":zt>=0&&Ke(zt)}},Zi=n.useCallback((function(){var ft=he.virtualItems,zt=[];switch(Mt){case d.ViewMode.DualPage:zt=ne(ft,2);break;case d.ViewMode.DualPageWithCover:ft.length&&(zt=ft[0].index===0?[[ft[0]]].concat(ne(ft.slice(1),2)):ne(ft,2));break;case d.ViewMode.SinglePage:default:zt=ne(ft,1)}var Kt=te&&te.core?te.core.pageLabel:"Page {{pageIndex}}",ae={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:ie,style:{height:"100%"}},children:n.createElement(n.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:c({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Rt===d.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":ee,"rpv-core__inner-pages--single":Rt===d.ScrollMode.Page,"rpv-core__inner-pages--vertical":Rt===d.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Rt===d.ScrollMode.Wrapped}),ref:se,style:{height:"100%",position:"relative"}},children:n.createElement("div",{"data-testid":"core__inner-current-page-".concat(fe),style:Object.assign({"--scale-factor":ce},he.getContainerStyles())},zt.map((function(re){return n.createElement("div",{className:c({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Rt===d.ScrollMode.Page}),style:he.getItemContainerStyles(re[0]),key:"".concat(re[0].index,"-").concat(Mt)},re.map((function(Jt){var we=Mt===d.ViewMode.DualPageWithCover&&(Jt.index===0||Ht%2==0&&Jt.index===Ht-1);return n.createElement("div",{"aria-label":Kt.replace("{{pageIndex}}","".concat(Jt.index+1)),className:c({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Mt===d.ViewMode.DualPage&&Jt.index%2==0,"rpv-core__inner-page--dual-odd":Mt===d.ViewMode.DualPage&&Jt.index%2==1,"rpv-core__inner-page--dual-cover":we,"rpv-core__inner-page--dual-cover-even":Mt===d.ViewMode.DualPageWithCover&&!we&&Jt.index%2==0,"rpv-core__inner-page--dual-cover-odd":Mt===d.ViewMode.DualPageWithCover&&!we&&Jt.index%2==1,"rpv-core__inner-page--single":Mt===d.ViewMode.SinglePage&&Rt===d.ScrollMode.Page}),role:"region",key:"".concat(Jt.index,"-").concat(Mt),style:Object.assign({},he.getItemStyles(Jt),Vn.buildPageStyles({numPages:Ht,pageIndex:Jt.index,scrollMode:Rt,viewMode:Mt}))},n.createElement(vi,{doc:N,measureRef:Jt.measureRef,outlines:Yt,pageIndex:Jt.index,pageRotation:Ot.has(Jt.index)?Ot.get(Jt.index):0,pageSize:J[Jt.index],plugins:K,renderPage:lt,renderQueueKey:gn,rotation:me,scale:ce,shouldRender:ln===Jt.index,viewMode:Mt,onExecuteNamedAction:Ji,onJumpFromLinkAnnotation:zi,onJumpToDest:qn,onRenderCompleted:Ki,onRotatePage:Rn}))})))})))}};return K.forEach((function(re){re.renderViewer&&(ae=re.renderViewer({containerRef:ie,doc:N,pagesContainerRef:se,pagesRotation:Ot,pageSizes:J,rotation:me,slot:ae,themeContext:Zt,jumpToPage:Ke,openFile:Gn,rotate:Xn,rotatePage:Rn,switchScrollMode:$n,switchViewMode:Yn,zoom:nn}))})),ae}),[K,he]),Jn=n.useCallback((function(ft){return n.createElement("div",t({},ft.attrs,{style:ft.attrs&&ft.attrs.style?ft.attrs.style:{}}),ft.children,ft.subSlot&&Jn(ft.subSlot))}),[]);return Jn(Zi())},jn=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Li=function(o){var y=o.defaultScale,D=o.doc,N=o.render,W=o.scrollMode,G=o.viewMode,Z=n.useRef(),Y=n.useState({pageSizes:[],scale:0}),B=Y[0],J=Y[1];return n.useLayoutEffect((function(){var K=Array(D.numPages).fill(0).map((function(lt,ot){return new Promise((function(at,_t){qe(D,ot).then((function(mt){var pt=mt.getViewport({scale:1});at({pageHeight:pt.height,pageWidth:pt.width,rotation:pt.rotation})}))}))}));Promise.all(K).then((function(lt){var ot=Z.current;if(ot&&lt.length!==0){var at=lt[0].pageWidth,_t=lt[0].pageHeight,mt=ot.parentElement,pt=(mt.clientWidth-45)/at,Gt=(mt.clientHeight-45)/_t,xt=pt;switch(W){case d.ScrollMode.Horizontal:xt=Math.min(pt,Gt);break;case d.ScrollMode.Vertical:default:xt=pt}var Ft,Nt,Pt=y?typeof y=="string"?wn(mt,_t,at,y,G,D.numPages):y:(Ft=xt,(Nt=jn.findIndex((function(Ht){return Ht>=Ft})))===-1||Nt===0?Ft:jn[Nt-1]);J({pageSizes:lt,scale:Pt})}}))}),[D.loadingTask.docId]),B.pageSizes.length===0||B.scale===0?n.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Z},n.createElement(x,null)):N(B.pageSizes,B.scale)},bn=function(){},Pn=(function(o){function y(D,N){var W=o.call(this)||this;return W.verifyPassword=D,W.passwordStatus=N,W}return q(y,o),y})(bn),Di=function(o){var y=o.passwordStatus,D=o.renderProtectedView,N=o.verifyPassword,W=o.onDocumentAskPassword,G=n.useContext(S).l10n,Z=n.useState(""),Y=Z[0],B=Z[1],J=n.useContext(u).direction===d.TextDirection.RightToLeft,K=function(){return N(Y)};return n.useEffect((function(){W&&W({verifyPassword:N})}),[]),D?D({passwordStatus:y,verifyPassword:N}):n.createElement("div",{className:"rpv-core__asking-password-wrapper"},n.createElement("div",{className:c({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":J})},n.createElement("div",{className:"rpv-core__asking-password-message"},y===d.PasswordStatus.RequiredPassword&&G.core.askingPassword.requirePasswordToOpen,y===d.PasswordStatus.WrongPassword&&G.core.wrongPassword.tryAgain),n.createElement("div",{className:"rpv-core__asking-password-body"},n.createElement("div",{className:c({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!J,"rpv-core__asking-password-input--rtl":J})},n.createElement(k,{testId:"core__asking-password-input",type:"password",value:Y,onChange:B,onKeyDown:function(lt){lt.key==="Enter"&&K()}})),n.createElement(w,{onClick:K},G.core.askingPassword.submit))))},Wn=(function(o){function y(D){var N=o.call(this)||this;return N.doc=D,N}return q(y,o),y})(bn),zn=(function(o){function y(D){var N=o.call(this)||this;return N.error=D,N}return q(y,o),y})(bn),Tn=(function(o){function y(D){var N=o.call(this)||this;return N.percentages=D,N}return q(y,o),y})(bn),Ii=function(o){var y=o.characterMap,D=o.file,N=o.httpHeaders,W=o.render,G=o.renderError,Z=o.renderLoader,Y=o.renderProtectedView,B=o.transformGetDocumentParams,J=o.withCredentials,K=o.onDocumentAskPassword,lt=n.useContext(u).direction===d.TextDirection.RightToLeft,ot=n.useState(new Tn(0)),at=ot[0],_t=ot[1],mt=n.useRef(""),pt=Et();return n.useEffect((function(){mt.current="",_t(new Tn(0));var Gt=new M.PDFWorker({name:"PDFWorker_".concat(Date.now())}),xt=Object.assign({httpHeaders:N,withCredentials:J,worker:Gt},typeof D=="string"?{url:D}:{data:D},y?{cMapUrl:y.url,cMapPacked:y.isCompressed}:{}),Ft=B?B(xt):xt,Nt=M.getDocument(Ft);return Nt.onPassword=function(Pt,Ht){switch(Ht){case M.PasswordResponses.NEED_PASSWORD:pt.current&&_t(new Pn(Pt,d.PasswordStatus.RequiredPassword));break;case M.PasswordResponses.INCORRECT_PASSWORD:pt.current&&_t(new Pn(Pt,d.PasswordStatus.WrongPassword))}},Nt.onProgress=function(Pt){var Ht=Pt.total>0?Math.min(100,100*Pt.loaded/Pt.total):100;pt.current&&mt.current===""&&_t(new Tn(Ht))},Nt.promise.then((function(Pt){mt.current=Pt.loadingTask.docId,pt.current&&_t(new Wn(Pt))}),(function(Pt){return pt.current&&!Gt.destroyed&&_t(new zn({message:Pt.message||"Cannot load document",name:Pt.name}))})),function(){Nt.destroy(),Gt.destroy()}}),[D]),at instanceof Pn?n.createElement(Di,{passwordStatus:at.passwordStatus,renderProtectedView:Y,verifyPassword:at.verifyPassword,onDocumentAskPassword:K}):at instanceof Wn?W(at.doc):at instanceof zn?G?G(at.error):n.createElement("div",{className:c({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":lt})},n.createElement("div",{className:"rpv-core__doc-error-text"},at.error.message)):n.createElement("div",{"data-testid":"core__doc-loading",className:c({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":lt})},Z?Z(at.percentages):n.createElement(x,null))},Oi=function(o,y){var D=n.useMemo((function(){return o==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o}),[]),N=n.useState(D),W=N[0],G=N[1],Z=ct(W);return n.useEffect((function(){if(o==="auto"){var Y=window.matchMedia("(prefers-color-scheme: dark)"),B=function(J){G(J.matches?"dark":"light")};return Y.addEventListener("change",B),function(){return Y.removeEventListener("change",B)}}}),[]),n.useEffect((function(){W!==Z&&y&&y(W)}),[W]),n.useEffect((function(){o!==W&&G(o)}),[o]),{currentTheme:W,setCurrentTheme:G}},Ni=function(o){return{startPage:o.startPage-3,endPage:o.endPage+3}};d.Button=function(o){var y=o.children,D=o.testId,N=o.onClick,W=n.useContext(u).direction===d.TextDirection.RightToLeft,G=D?{"data-testid":D}:{};return n.createElement("button",t({className:c({"rpv-core__button":!0,"rpv-core__button--rtl":W}),type:"button",onClick:N},G),y)},d.Icon=v,d.LazyRender=function(o){var y=o.attrs,D=o.children,N=o.testId,W=n.useState(!1),G=W[0],Z=W[1],Y=N?t(t({},y),{"data-testid":N}):y,B=g({once:!0,onVisibilityChanged:function(J){J.isVisible&&Z(!0)}});return n.createElement("div",t({ref:B},Y),G&&D)},d.LocalizationContext=S,d.Menu=function(o){var y=o.children,D=n.useRef(),N=n.useRef([]),W=n.useContext(u).direction===d.TextDirection.RightToLeft,G=function(Y){if(D.current)switch(Y.key){case"Tab":Y.preventDefault();break;case"ArrowDown":Y.preventDefault(),Z((function(B,J){return J+1}));break;case"ArrowUp":Y.preventDefault(),Z((function(B,J){return J-1}));break;case"End":Y.preventDefault(),Z((function(B,J){return B.length-1}));break;case"Home":Y.preventDefault(),Z((function(B,J){return 0}))}},Z=function(Y){if(D.current){var B=N.current,J=B.findIndex((function(lt){return lt.getAttribute("tabindex")==="0"})),K=Math.min(B.length-1,Math.max(0,Y(B,J)));J>=0&&J<=B.length-1&&B[J].setAttribute("tabindex","-1"),B[K].setAttribute("tabindex","0"),B[K].focus()}};return e((function(){var Y=D.current;if(Y){var B=(function(J){var K=[];return J.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(lt){if(lt instanceof HTMLElement){var ot=lt.parentElement;(ot===J||window.getComputedStyle(ot).display!=="none")&&K.push(lt)}})),K})(Y);N.current=B}}),[]),e((function(){return document.addEventListener("keydown",G),function(){document.removeEventListener("keydown",G)}}),[]),n.createElement("div",{ref:D,"aria-orientation":"vertical",className:c({"rpv-core__menu":!0,"rpv-core__menu--rtl":W}),role:"menu",tabIndex:0},y)},d.MenuDivider=function(){return n.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},d.MenuItem=function(o){var y=o.checked,D=y!==void 0&&y,N=o.children,W=o.icon,G=W===void 0?null:W,Z=o.isDisabled,Y=Z!==void 0&&Z,B=o.testId,J=o.onClick,K=n.useContext(u).direction===d.TextDirection.RightToLeft,lt=B?{"data-testid":B}:{};return n.createElement("button",t({className:c({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Y,"rpv-core__menu-item--ltr":!K,"rpv-core__menu-item--rtl":K}),role:"menuitem",tabIndex:-1,type:"button",onClick:J},lt),n.createElement("div",{className:c({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!K,"rpv-core__menu-item-icon--rtl":K})},G),n.createElement("div",{className:c({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!K,"rpv-core__menu-item-label--rtl":K})},N),n.createElement("div",{className:c({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!K,"rpv-core__menu-item-check--rtl":K})},D&&n.createElement(l,null)))},d.MinimalButton=function(o){var y=o.ariaLabel,D=y===void 0?"":y,N=o.ariaKeyShortcuts,W=N===void 0?"":N,G=o.children,Z=o.isDisabled,Y=Z!==void 0&&Z,B=o.isSelected,J=B!==void 0&&B,K=o.testId,lt=o.onClick,ot=n.useContext(u).direction===d.TextDirection.RightToLeft,at=K?{"data-testid":K}:{};return n.createElement("button",t({"aria-label":D},W&&{"aria-keyshortcuts":W},Y&&{"aria-disabled":!0},{className:c({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Y,"rpv-core__minimal-button--rtl":ot,"rpv-core__minimal-button--selected":J}),type:"button",onClick:lt},at),G)},d.Modal=function(o){var y=o.ariaControlsSuffix,D=o.closeOnClickOutside,N=o.closeOnEscape,W=o.content,G=o.isOpened,Z=G!==void 0&&G,Y=o.target,B=y||"".concat(F());return n.createElement(R,{target:Y?function(J,K){return n.createElement("div",{"aria-expanded":K?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(B)},Y(J,K))}:null,content:function(J){return n.createElement(_,null,n.createElement(s,{ariaControlsSuffix:B,closeOnClickOutside:D,closeOnEscape:N,onToggle:J},W(J)))},isOpened:Z})},d.Popover=function(o){var y=o.ariaHasPopup,D=y===void 0?"dialog":y,N=o.ariaControlsSuffix,W=o.closeOnClickOutside,G=o.closeOnEscape,Z=o.content,Y=o.lockScroll,B=Y===void 0||Y,J=o.offset,K=o.position,lt=o.target,ot=P(!1),at=ot.opened,_t=ot.toggle,mt=n.useRef(),pt=n.useMemo((function(){return N||"".concat(F())}),[]);return n.createElement("div",{ref:mt,"aria-expanded":at?"true":"false","aria-haspopup":D,"aria-controls":"rpv-core__popver-body-".concat(pt)},lt(_t,at),at&&n.createElement(n.Fragment,null,B&&n.createElement(Bt,{closeOnEscape:G,onClose:_t}),n.createElement(Lt,{ariaControlsSuffix:pt,closeOnClickOutside:W,offset:J,position:K,targetRef:mt,onClose:_t},Z(_t))))},d.PrimaryButton=w,d.ProgressBar=function(o){var y=o.progress,D=n.useContext(u).direction===d.TextDirection.RightToLeft;return n.createElement("div",{className:c({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":D})},n.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(y,"%")}},y,"%"))},d.Separator=function(){return n.createElement("div",{className:"rpv-core__separator"})},d.Spinner=x,d.Splitter=function(o){var y=o.constrain,D=n.useContext(u).direction===d.TextDirection.RightToLeft,N=n.useRef(),W=n.useRef(),G=n.useRef(),Z=n.useRef(0),Y=n.useRef(0),B=n.useRef(0),J=n.useRef(0),K={capture:!0},lt=function(at){var _t=N.current,mt=W.current,pt=G.current;if(_t&&mt&&pt){var Gt=J.current,xt=at.clientX-Z.current,Ft=B.current+(D?-xt:xt),Nt=_t.parentElement.getBoundingClientRect().width,Pt=100*Ft/Nt;if(_t.classList.add("rpv-core__splitter--resizing"),y){var Ht=Nt-Ft-Gt;if(!y({firstHalfPercentage:Pt,firstHalfSize:Ft,secondHalfPercentage:100*Ht/Nt,secondHalfSize:Ht}))return}mt.style.width="".concat(Pt,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),mt.classList.add("rpv-core__splitter-sibling--resizing"),pt.classList.add("rpv-core__splitter-sibling--resizing")}},ot=function(at){var _t=N.current,mt=W.current,pt=G.current;_t&&mt&&pt&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),_t.classList.remove("rpv-core__splitter--resizing"),mt.classList.remove("rpv-core__splitter-sibling--resizing"),pt.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",lt,K),document.removeEventListener("mouseup",ot,K))};return n.useEffect((function(){var at=N.current;at&&(J.current=at.getBoundingClientRect().width,W.current=at.previousElementSibling,G.current=at.nextElementSibling)}),[]),n.createElement("div",{ref:N,className:"rpv-core__splitter",onMouseDown:function(at){var _t=W.current;_t&&(Z.current=at.clientX,Y.current=at.clientY,B.current=_t.getBoundingClientRect().width,document.addEventListener("mousemove",lt,K),document.addEventListener("mouseup",ot,K))}})},d.TextBox=k,d.ThemeContext=u,d.Tooltip=function(o){var y=o.ariaControlsSuffix,D=o.content,N=o.offset,W=o.position,G=o.target,Z=P(!1),Y=Z.opened,B=Z.toggle,J=n.useRef(),K=n.useRef(),lt=n.useMemo((function(){return y||"".concat(F())}),[]);T((function(){J.current&&document.activeElement&&J.current.contains(document.activeElement)&&at()}));var ot=function(){B(d.ToggleStatus.Open)},at=function(){B(d.ToggleStatus.Close)};return n.createElement(n.Fragment,null,n.createElement("div",{ref:J,"aria-describedby":"rpv-core__tooltip-body-".concat(lt),onBlur:function(_t){_t.relatedTarget instanceof HTMLElement&&_t.currentTarget.parentElement&&_t.currentTarget.parentElement.contains(_t.relatedTarget)?K.current&&(K.current.style.display="none"):at()},onFocus:ot,onMouseEnter:ot,onMouseLeave:at},G),Y&&n.createElement(Xt,{ariaControlsSuffix:lt,contentRef:K,offset:N,position:W,targetRef:J},D()))},d.Viewer=function(o){var y=o.characterMap,D=o.defaultScale,N=o.enableSmoothScroll,W=N===void 0||N,G=o.fileUrl,Z=o.httpHeaders,Y=Z===void 0?{}:Z,B=o.initialPage,J=B===void 0?0:B,K=o.pageLayout,lt=o.initialRotation,ot=lt===void 0?0:lt,at=o.localization,_t=o.plugins,mt=_t===void 0?[]:_t,pt=o.renderError,Gt=o.renderLoader,xt=o.renderPage,Ft=o.renderProtectedView,Nt=o.scrollMode,Pt=Nt===void 0?d.ScrollMode.Vertical:Nt,Ht=o.setRenderRange,It=Ht===void 0?Ni:Ht,te=o.transformGetDocumentParams,Zt=o.theme,ee=Zt===void 0?{direction:d.TextDirection.LeftToRight,theme:"light"}:Zt,ie=o.viewMode,se=ie===void 0?d.ViewMode.SinglePage:ie,_e=o.withCredentials,fe=_e!==void 0&&_e,ye=o.onDocumentAskPassword,ge=o.onDocumentLoad,ve=ge===void 0?function(){}:ge,be=o.onPageChange,me=be===void 0?function(){}:be,Re=o.onRotate,We=Re===void 0?function(){}:Re,He=o.onRotatePage,Ce=He===void 0?function(){}:He,Le=o.onSwitchTheme,Ve=Le===void 0?function(){}:Le,Ot=o.onZoom,Dt=Ot===void 0?function(){}:Ot,Tt=n.useState({data:G,name:typeof G=="string"?G:"",shouldLoad:!1}),Rt=Tt[0],kt=Tt[1],Ut=function(de,pe){kt({data:pe,name:de,shouldLoad:!0})},jt=n.useState(!1),Mt=jt[0],wt=jt[1],Vt=ct(Rt);n.useEffect((function(){var de,pe,Ee,le;de=Vt.data,le=typeof(pe=G),(Ee=typeof de)=="string"&&le==="string"&&de===pe||Ee==="object"&&le==="object"&&de.length===pe.length&&de.every((function($e,ln){return $e===pe[ln]}))||kt({data:G,name:typeof G=="string"?G:"",shouldLoad:Mt})}),[G,Mt]);var Yt=g({onVisibilityChanged:function(de){wt(de.isVisible),de.isVisible&&kt((function(pe){return Object.assign({},pe,{shouldLoad:!0})}))}}),ue=typeof ee=="string"?{direction:d.TextDirection.LeftToRight,theme:ee}:ee,ce=n.useState(at||p),Te=ce[0],De=ce[1],qt={l10n:Te,setL10n:De},ke=Object.assign({},{direction:ue.direction},Oi(ue.theme||"light",Ve));return n.useEffect((function(){at&&De(at)}),[at]),n.createElement(S.Provider,{value:qt},n.createElement(u.Provider,{value:ke},n.createElement("div",{ref:Yt,className:"rpv-core__viewer rpv-core__viewer--".concat(ke.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Rt.shouldLoad&&n.createElement(Ii,{characterMap:y,file:Rt.data,httpHeaders:Y,render:function(de){return n.createElement(Li,{defaultScale:D,doc:de,render:function(pe,Ee){return n.createElement(Fi,{currentFile:{data:Rt.data,name:Rt.name},defaultScale:D,doc:de,enableSmoothScroll:W,initialPage:J,initialRotation:ot,initialScale:Ee,pageLayout:K,pageSizes:pe,plugins:mt,renderPage:xt,scrollMode:Pt,setRenderRange:It,viewMode:se,viewerState:{file:Rt,fullScreenMode:d.FullScreenMode.Normal,pageIndex:-1,pageHeight:pe[0].pageHeight,pageWidth:pe[0].pageWidth,pagesRotation:new Map,rotation:ot,scale:Ee,scrollMode:Pt,viewMode:se},onDocumentLoad:ve,onOpenFile:Ut,onPageChange:me,onRotate:We,onRotatePage:Ce,onZoom:Dt})},scrollMode:Pt,viewMode:se})},renderError:pt,renderLoader:Gt,renderProtectedView:Ft,transformGetDocumentParams:te,withCredentials:fe,onDocumentAskPassword:ye}))))},d.Worker=function(o){var y=o.children,D=o.workerUrl;return M.GlobalWorkerOptions.workerSrc=D,n.createElement(n.Fragment,null,y)},d.chunk=ne,d.classNames=c,d.createStore=function(o){var y=o||{},D={},N=function(G,Z){var Y;y=t(t({},y),((Y={})[G]=Z,Y)),(D[G]||[]).forEach((function(B){return B(y[G])}))},W=function(G){return y[G]};return{subscribe:function(G,Z){D[G]=(D[G]||[]).concat(Z)},unsubscribe:function(G,Z){D[G]=(D[G]||[]).filter((function(Y){return Y!==Z}))},update:function(G,Z){N(G,Z)},updateCurrentValue:function(G,Z){var Y=W(G);Y!==void 0&&N(G,Z(Y))},get:function(G){return W(G)}}},d.getDestination=hn,d.getPage=qe,d.isFullScreenEnabled=nt,d.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},d.useDebounceCallback=vt,d.useIntersectionObserver=g,d.useIsMounted=Et,d.useIsomorphicLayoutEffect=e,d.usePrevious=ct,d.useRenderQueue=f})(core_min)),core_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib.exports;hasRequiredLib=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib.exports=requireCore_min(),lib.exports}var libExports=requireLib();function ResumePage(){return jsxRuntimeExports.jsxs("section",{className:"max-w-6xl mx-auto px-4 py-16 mt-5",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-4",children:"My Resume"}),jsxRuntimeExports.jsx("div",{className:"w-full h-[80vh] border shadow-md",children:jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:"/portfolio/resume.pdf"})})})]})}export{ResumePage as default};
